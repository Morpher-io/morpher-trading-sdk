(function(oe,ye){typeof exports=="object"&&typeof module<"u"?ye(exports):typeof define=="function"&&define.amd?define(["exports"],ye):(oe=typeof globalThis<"u"?globalThis:oe||self,ye(oe.MorpherTradingSDK={}))})(this,function(oe){"use strict";var hE=Object.defineProperty;var g1=oe=>{throw TypeError(oe)};var yE=(oe,ye,Se)=>ye in oe?hE(oe,ye,{enumerable:!0,configurable:!0,writable:!0,value:Se}):oe[ye]=Se;var I=(oe,ye,Se)=>yE(oe,typeof ye!="symbol"?ye+"":ye,Se),dd=(oe,ye,Se)=>ye.has(oe)||g1("Cannot "+Se);var b=(oe,ye,Se)=>(dd(oe,ye,"read from private field"),Se?Se.call(oe):ye.get(oe)),B=(oe,ye,Se)=>ye.has(oe)?g1("Cannot add the same private member more than once"):ye instanceof WeakSet?ye.add(oe):ye.set(oe,Se),A=(oe,ye,Se,ci)=>(dd(oe,ye,"write to private field"),ci?ci.call(oe,Se):ye.set(oe,Se),Se),z=(oe,ye,Se)=>(dd(oe,ye,"access private method"),Se);var bc=(oe,ye,Se,ci)=>({set _(h0){A(oe,ye,h0,Se)},get _(){return b(oe,ye,ci)}});var sa,Gi,zr,aa,oa,fn,mr,ca,ua,$e,St,xr,Hi,$i,Vi,_n,dn,jr,zi,mc,Xo,ec,tc,It,la,ji,fa,gr,Wi,pa,a0,wt,Ot,Ki,Qi,Wr,qi,bd,A1,ha,kn,ya,Ji,wr,Zi,hn,ba,ma,xa,ga,wa,Aa,va,Ea,Ta,Pa,Sa,Xi,Kr,Ln,Qr,Ia,Oa,o0,nc,vr,Ca,Xu,v1,Je,yn,rc,md,Na,c0,qr,Ja,Dn,Un,Fn,tt,Gn,u0,l0,Er,ic,Jr,Ra,sc,ac,x1,Yr,ts,Zr,Ya,n0,E1,cc,uc,_a,ka,Xr,Tr,Jt,ei,Hn,Ma,f0,ns,rs,ti,Da,Pr,r0,Ua,Sr,Fa,Ga,ni,Yt,i0,T1,nt,ri,rt,Ha,Ct,is,ii,Ir,lc,Zt,$a,Va,re,Nt,xd,gd,xc,wd,gc,d0,za,p0,ut,$n,ss,si,as,ja,ai,Ad,vd,os,cs,Wa,Or,Vn,bn,Xt,At,fc,Ed,oi,Ka,Qa,qa,dc,us,pc,Td,hc,Pd,ls,wc,yc,Sd;function ye(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Se=Object.create,ci=Object.defineProperty,h0=Object.getOwnPropertyDescriptor,Id=Object.getOwnPropertyNames,P1=Object.getPrototypeOf,S1=Object.prototype.hasOwnProperty,gn=(n,e)=>function(){return e||(0,n[Id(n)[0]])((e={exports:{}}).exports,e),e.exports},I1=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(var i=Id(e),s=0,a=i.length,o;s<a;s++)o=i[s],!S1.call(n,o)&&o!==t&&ci(n,o,{get:(c=>e[c]).bind(null,o),enumerable:!(r=h0(e,o))||r.enumerable});return n},Ie=(n,e,t)=>(t=n!=null?Se(P1(n)):{},I1(e||!n||!n.__esModule?ci(t,"default",{value:n,enumerable:!0}):t,n)),Od=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(n,e){function t(r){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}),O1=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(n,e){var t=Od().default;function r(i,s){if(t(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var o=a.call(i,s||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}}),C1=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(n,e){var t=Od().default,r=O1();function i(s){var a=r(s,"string");return t(a)=="symbol"?a:a+""}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}}),ui=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(n,e){var t=C1();function r(i,s,a){return(s=t(s))in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}}),tn=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(n,e){var t=ui();function r(s,a){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);a&&(c=c.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),o.push.apply(o,c)}return o}function i(s){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?r(Object(o),!0).forEach(function(c){t(s,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(c){Object.defineProperty(s,c,Object.getOwnPropertyDescriptor(o,c))})}return s}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}});function Ac(n){const e={subscribe(t){let r=null,i=!1,s=!1,a=!1;function o(){if(r===null){a=!0;return}s||(s=!0,typeof r=="function"?r():r&&r.unsubscribe())}return r=n({next(c){var u;i||(u=t.next)===null||u===void 0||u.call(t,c)},error(c){var u;i||(i=!0,(u=t.error)===null||u===void 0||u.call(t,c),o())},complete(){var c;i||(i=!0,(c=t.complete)===null||c===void 0||c.call(t),o())}}),a&&o(),{unsubscribe:o}},pipe(...t){return t.reduce(N1,e)}};return e}function N1(n,e){return e(n)}function R1(n){const e=new AbortController;return new Promise((r,i)=>{let s=!1;function a(){s||(s=!0,o.unsubscribe())}e.signal.addEventListener("abort",()=>{i(e.signal.reason)});const o=n.subscribe({next(c){s=!0,r(c),a()},error(c){i(c)},complete(){e.abort(),a()}})})}function B1(n){return e=>{let t=0,r=null;const i=[];function s(){r||(r=e.subscribe({next(o){for(const u of i){var c;(c=u.next)===null||c===void 0||c.call(u,o)}},error(o){for(const u of i){var c;(c=u.error)===null||c===void 0||c.call(u,o)}},complete(){for(const c of i){var o;(o=c.complete)===null||o===void 0||o.call(c)}}}))}function a(){if(t===0&&r){const o=r;r=null,o.unsubscribe()}}return Ac(o=>(t++,i.push(o),s(),{unsubscribe(){t--,a();const c=i.findIndex(u=>u===o);c>-1&&i.splice(c,1)}}))}}function _1(n){let e=n;const t=[],r=a=>{e!==void 0&&a.next(e),t.push(a)},i=a=>{t.splice(t.indexOf(a),1)},s=Ac(a=>(r(a),()=>{i(a)}));return s.next=a=>{if(e!==a){e=a;for(const o of t)o.next(a)}},s.get=()=>e,s}function k1(n){return Ac(e=>{function t(i=0,s=n.op){const a=n.links[i];if(!a)throw new Error("No more links to execute - did you forget to add an ending link?");return a({op:s,next(c){return t(i+1,c)}})}return t().subscribe(e)})}function Za(n){return!!n&&!Array.isArray(n)&&typeof n=="object"}var L1=Object.create,Cd=Object.defineProperty,M1=Object.getOwnPropertyDescriptor,Nd=Object.getOwnPropertyNames,D1=Object.getPrototypeOf,U1=Object.prototype.hasOwnProperty,Xa=(n,e)=>function(){return e||(0,n[Nd(n)[0]])((e={exports:{}}).exports,e),e.exports},F1=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(var i=Nd(e),s=0,a=i.length,o;s<a;s++)o=i[s],!U1.call(n,o)&&o!==t&&Cd(n,o,{get:(c=>e[c]).bind(null,o),enumerable:!(r=M1(e,o))||r.enumerable});return n},vc=(n,e,t)=>(t=n!=null?L1(D1(n)):{},F1(Cd(t,"default",{value:n,enumerable:!0}),n));const Rd=()=>{},Bd=n=>{Object.freeze&&Object.freeze(n)};function _d(n,e,t){var r;const i=e.join(".");return(r=t[i])!==null&&r!==void 0||(t[i]=new Proxy(Rd,{get(s,a){if(!(typeof a!="string"||a==="then"))return _d(n,[...e,a],t)},apply(s,a,o){const c=e[e.length-1];let u={args:o,path:e};return c==="call"?u={args:o.length>=2?[o[1]]:[],path:e.slice(0,-1)}:c==="apply"&&(u={args:o.length>=2?o[1]:[],path:e.slice(0,-1)}),Bd(u.args),Bd(u.path),n(u)}})),t[i]}const G1=n=>_d(n,[],Object.create(null)),H1=n=>new Proxy(Rd,{get(e,t){if(t!=="then")return n(t)}});var kd=Xa({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(n,e){function t(r){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}),$1=Xa({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(n,e){var t=kd().default;function r(i,s){if(t(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var o=a.call(i,s||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}}),V1=Xa({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(n,e){var t=kd().default,r=$1();function i(s){var a=r(s,"string");return t(a)=="symbol"?a:a+""}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}}),Ld=Xa({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(n,e){var t=V1();function r(i,s,a){return(s=t(s))in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}}),y0=Xa({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(n,e){var t=Ld();function r(s,a){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);a&&(c=c.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),o.push.apply(o,c)}return o}function i(s){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?r(Object(o),!0).forEach(function(c){t(s,c,o[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(c){Object.defineProperty(s,c,Object.getOwnPropertyDescriptor(o,c))})}return s}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}});vc(y0()),vc(Ld());var Ec=vc(y0());function z1(n,e){if("error"in n){const r=e.deserialize(n.error);return{ok:!1,error:(0,Ec.default)((0,Ec.default)({},n),{},{error:r})}}return{ok:!0,result:(0,Ec.default)((0,Ec.default)({},n.result),(!n.result.type||n.result.type==="data")&&{type:"data",data:e.deserialize(n.result.data)})}}var b0=class extends Error{constructor(){super("Unable to transform response from server")}};function j1(n,e){let t;try{t=z1(n,e)}catch{throw new b0}if(!t.ok&&(!Za(t.error.error)||typeof t.error.error.code!="number"))throw new b0;if(t.ok&&!Za(t.result))throw new b0;return t}vc(y0());var Tc=Ie(ui(),1),ds=Ie(tn(),1);function W1(n){return n instanceof Pc}function K1(n){return Za(n)&&Za(n.error)&&typeof n.error.code=="number"&&typeof n.error.message=="string"}function Q1(n,e){return typeof n=="string"?n:Za(n)&&typeof n.message=="string"?n.message:e}var Pc=class s0 extends Error{constructor(e,t){var r,i;const s=t==null?void 0:t.cause;super(e,{cause:s}),(0,Tc.default)(this,"cause",void 0),(0,Tc.default)(this,"shape",void 0),(0,Tc.default)(this,"data",void 0),(0,Tc.default)(this,"meta",void 0),this.meta=t==null?void 0:t.meta,this.cause=s,this.shape=t==null||(r=t.result)===null||r===void 0?void 0:r.error,this.data=t==null||(i=t.result)===null||i===void 0?void 0:i.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,s0.prototype)}static from(e,t={}){const r=e;return W1(r)?(t.meta&&(r.meta=(0,ds.default)((0,ds.default)({},r.meta),t.meta)),r):K1(r)?new s0(r.error.message,(0,ds.default)((0,ds.default)({},t),{},{result:r})):new s0(Q1(r,"Unknown error"),(0,ds.default)((0,ds.default)({},t),{},{cause:r}))}};function q1(n){const e=n;return e?"input"in e?e:{input:e,output:e}:{input:{serialize:t=>t,deserialize:t=>t},output:{serialize:t=>t,deserialize:t=>t}}}const Md=n=>typeof n=="function";function J1(n){if(n)return n;if(typeof window<"u"&&Md(window.fetch))return window.fetch;if(typeof globalThis<"u"&&Md(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}var eo=Ie(tn());function Y1(n){return{url:n.url.toString(),fetch:n.fetch,transformer:q1(n.transformer),methodOverride:n.methodOverride}}function Z1(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[t]=r}return e}const X1={query:"GET",mutation:"POST",subscription:"PATCH"};function Dd(n){return"input"in n?n.transformer.input.serialize(n.input):Z1(n.inputs.map(e=>n.transformer.input.serialize(e)))}const Ud=n=>{const e=n.url.split("?");let r=e[0].replace(/\/$/,"")+"/"+n.path;const i=[];if(e[1]&&i.push(e[1]),"inputs"in n&&i.push("batch=1"),n.type==="query"||n.type==="subscription"){const s=Dd(n);s!==void 0&&n.methodOverride!=="POST"&&i.push(`input=${encodeURIComponent(JSON.stringify(s))}`)}return i.length&&(r+="?"+i.join("&")),r},eg=n=>{if(n.type==="query"&&n.methodOverride!=="POST")return;const e=Dd(n);return e!==void 0?JSON.stringify(e):void 0},tg=n=>sg((0,eo.default)((0,eo.default)({},n),{},{contentTypeHeader:"application/json",getUrl:Ud,getBody:eg}));var ng=class extends Error{constructor(){const n="AbortError";super(n),this.name=n,this.message=n}};const rg=n=>{var e;if(n!=null&&n.aborted)throw(e=n.throwIfAborted)===null||e===void 0||e.call(n),typeof DOMException<"u"?new DOMException("AbortError","AbortError"):new ng};async function ig(n){var e;rg(n.signal);const t=n.getUrl(n),r=n.getBody(n),i=(e=n.methodOverride)!==null&&e!==void 0?e:X1[n.type],s=await(async()=>{const o=await n.headers();return Symbol.iterator in o?Object.fromEntries(o):o})(),a=(0,eo.default)((0,eo.default)((0,eo.default)({},n.contentTypeHeader&&i!=="GET"?{"content-type":n.contentTypeHeader}:{}),n.trpcAcceptHeader?{"trpc-accept":n.trpcAcceptHeader}:void 0),s);return J1(n.fetch)(t,{method:i,signal:n.signal,body:r,headers:a})}async function sg(n){const e={},t=await ig(n);e.response=t;const r=await t.json();return e.responseJSON=r,{json:r,meta:e}}Ie(tn(),1);const Fd=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function Gd(n){let e=null,t=null;const r=()=>{clearTimeout(t),t=null,e=null};function i(o){const c=[[]];let u=0;for(;;){const d=o[u];if(!d)break;const p=c[c.length-1];if(d.aborted){var l;(l=d.reject)===null||l===void 0||l.call(d,new Error("Aborted")),u++;continue}if(n.validate(p.concat(d).map(h=>h.key))){p.push(d),u++;continue}if(p.length===0){var f;(f=d.reject)===null||f===void 0||f.call(d,new Error("Input is too big for a single dispatch")),u++;continue}c.push([])}return c}function s(){const o=i(e);r();for(const c of o){if(!c.length)continue;const u={items:c};for(const f of c)f.batch=u;n.fetch(u.items.map(f=>f.key)).then(async f=>{await Promise.all(f.map(async(p,y)=>{const h=u.items[y];try{var m;const w=await Promise.resolve(p);(m=h.resolve)===null||m===void 0||m.call(h,w)}catch(w){var x;(x=h.reject)===null||x===void 0||x.call(h,w)}h.batch=null,h.reject=null,h.resolve=null}));for(const p of u.items){var d;(d=p.reject)===null||d===void 0||d.call(p,new Error("Missing result")),p.batch=null}}).catch(f=>{for(const p of u.items){var d;(d=p.reject)===null||d===void 0||d.call(p,f),p.batch=null}})}}function a(o){var c;const u={aborted:!1,key:o,batch:null,resolve:Fd,reject:Fd},l=new Promise((f,d)=>{var p;u.reject=d,u.resolve=f,(p=e)!==null&&p!==void 0||(e=[]),e.push(u)});return(c=t)!==null&&c!==void 0||(t=setTimeout(s)),l}return{load:a}}function ag(...n){const e=new AbortController,t=n.length;let r=0;const i=()=>{++r===t&&e.abort()};for(const s of n)s!=null&&s.aborted?i():s==null||s.addEventListener("abort",i,{once:!0});return e.signal}var Sc=Ie(tn(),1);function og(n){var e,t;const r=Y1(n),i=(e=n.maxURLLength)!==null&&e!==void 0?e:1/0,s=(t=n.maxItems)!==null&&t!==void 0?t:1/0;return()=>{const a=l=>({validate(f){if(i===1/0&&s===1/0)return!0;if(f.length>s)return!1;const d=f.map(h=>h.path).join(","),p=f.map(h=>h.input);return Ud((0,Sc.default)((0,Sc.default)({},r),{},{type:l,path:d,inputs:p,signal:null})).length<=i},async fetch(f){const d=f.map(w=>w.path).join(","),p=f.map(w=>w.input),y=ag(...f.map(w=>w.signal)),h=await tg((0,Sc.default)((0,Sc.default)({},r),{},{path:d,inputs:p,type:l,headers(){return n.headers?typeof n.headers=="function"?n.headers({opList:f}):n.headers:{}},signal:y}));return(Array.isArray(h.json)?h.json:f.map(()=>h.json)).map(w=>({meta:h.meta,json:w}))}}),o=Gd(a("query")),c=Gd(a("mutation")),u={query:o,mutation:c};return({op:l})=>Ac(f=>{/* istanbul ignore if -- @preserve */if(l.type==="subscription")throw new Error("Subscriptions are unsupported by `httpLink` - use `httpSubscriptionLink` or `wsLink`");const p=u[l.type].load(l);let y;return p.then(h=>{y=h;const m=j1(h.json,r.transformer.output);if(!m.ok){f.error(Pc.from(m.error,{meta:h.meta}));return}f.next({context:h.meta,result:m.result}),f.complete()}).catch(h=>{f.error(Pc.from(h,{meta:y==null?void 0:y.meta}))}),()=>{}})}}Ie(tn(),1);const Hd=(n,...e)=>typeof n=="function"?n(...e):n;Ie(ui(),1);function cg(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}async function ug(n){const e=await Hd(n.url);if(!n.connectionParams)return e;const r=`${e.includes("?")?"&":"?"}connectionParams=1`;return e+r}async function lg(n){const e={method:"connectionParams",data:await Hd(n)};return JSON.stringify(e)}Ie(ui(),1);var li=Ie(ui(),1);function fg(n){const{promise:e,resolve:t,reject:r}=cg();return n.addEventListener("open",()=>{n.removeEventListener("error",r),t()}),n.addEventListener("error",r),e}function dg(n,{intervalMs:e,pongTimeoutMs:t}){let r,i;function s(){r=setTimeout(()=>{n.send("PING"),i=setTimeout(()=>{n.close()},t)},e)}function a(){clearTimeout(r),s()}function o(){clearTimeout(i),a()}n.addEventListener("open",s),n.addEventListener("message",({data:c})=>{clearTimeout(r),s(),c==="PONG"&&o()}),n.addEventListener("close",()=>{clearTimeout(r),clearTimeout(i)})}var pg=class pd{constructor(e){var t;if((0,li.default)(this,"id",++pd.connectCount),(0,li.default)(this,"WebSocketPonyfill",void 0),(0,li.default)(this,"urlOptions",void 0),(0,li.default)(this,"keepAliveOpts",void 0),(0,li.default)(this,"wsObservable",_1(null)),(0,li.default)(this,"openPromise",null),this.WebSocketPonyfill=(t=e.WebSocketPonyfill)!==null&&t!==void 0?t:WebSocket,!this.WebSocketPonyfill)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");this.urlOptions=e.urlOptions,this.keepAliveOpts=e.keepAlive}get ws(){return this.wsObservable.get()}set ws(e){this.wsObservable.next(e)}isOpen(){return!!this.ws&&this.ws.readyState===this.WebSocketPonyfill.OPEN&&!this.openPromise}isClosed(){return!!this.ws&&(this.ws.readyState===this.WebSocketPonyfill.CLOSING||this.ws.readyState===this.WebSocketPonyfill.CLOSED)}async open(){var e=this;if(e.openPromise)return e.openPromise;e.id=++pd.connectCount;const t=ug(e.urlOptions).then(r=>new e.WebSocketPonyfill(r));e.openPromise=t.then(async r=>{e.ws=r,r.addEventListener("message",function({data:i}){i==="PING"&&this.send("PONG")}),e.keepAliveOpts.enabled&&dg(r,e.keepAliveOpts),r.addEventListener("close",()=>{e.ws===r&&(e.ws=null)}),await fg(r),e.urlOptions.connectionParams&&r.send(await lg(e.urlOptions.connectionParams))});try{await e.openPromise}finally{e.openPromise=null}}async close(){var e=this;try{await e.openPromise}finally{var t;(t=e.ws)===null||t===void 0||t.close()}}};(0,li.default)(pg,"connectCount",0),Ie(ui(),1),Ie(tn(),1);var m0=Ie(ui(),1),$d=Ie(tn(),1),hg=class{constructor(n){(0,m0.default)(this,"links",void 0),(0,m0.default)(this,"runtime",void 0),(0,m0.default)(this,"requestId",void 0),this.requestId=0,this.runtime={},this.links=n.links.map(e=>e(this.runtime))}$request(n){var e;return k1({links:this.links,op:(0,$d.default)((0,$d.default)({},n),{},{context:(e=n.context)!==null&&e!==void 0?e:{},id:++this.requestId})}).pipe(B1())}async requestAsPromise(n){var e=this;try{const t=e.$request(n);return(await R1(t)).result.data}catch(t){throw Pc.from(t)}}query(n,e,t){return this.requestAsPromise({type:"query",path:n,input:e,context:t==null?void 0:t.context,signal:t==null?void 0:t.signal})}mutation(n,e,t){return this.requestAsPromise({type:"mutation",path:n,input:e,context:t==null?void 0:t.context,signal:t==null?void 0:t.signal})}subscription(n,e,t){return this.$request({type:"subscription",path:n,input:e,context:t.context,signal:t.signal}).subscribe({next(i){switch(i.result.type){case"state":{var s;(s=t.onConnectionStateChange)===null||s===void 0||s.call(t,i.result);break}case"started":{var a;(a=t.onStarted)===null||a===void 0||a.call(t,{context:i.context});break}case"stopped":{var o;(o=t.onStopped)===null||o===void 0||o.call(t);break}case"data":case void 0:{var c;(c=t.onData)===null||c===void 0||c.call(t,i.result.data);break}}},error(i){var s;(s=t.onError)===null||s===void 0||s.call(t,i)},complete(){var i;(i=t.onComplete)===null||i===void 0||i.call(t)}})}};const yg=Symbol.for("trpc_untypedClient"),bg={query:"query",mutate:"mutation",subscribe:"subscription"},mg=n=>bg[n];function xg(n){const e=G1(({path:t,args:r})=>{const i=[...t],s=mg(i.pop()),a=i.join(".");return n[s](a,...r)});return H1(t=>t===yg?n:e[t])}function gg(n){const e=new hg(n);return xg(e)}Ie(tn(),1),Ie(tn(),1);var wg=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncIterator.js"(n,e){function t(i){var s,a,o,c=2;for(typeof Symbol<"u"&&(a=Symbol.asyncIterator,o=Symbol.iterator);c--;){if(a&&(s=i[a])!=null)return s.call(i);if(o&&(s=i[o])!=null)return new r(s.call(i));a="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}function r(i){function s(a){if(Object(a)!==a)return Promise.reject(new TypeError(a+" is not an object."));var o=a.done;return Promise.resolve(a.value).then(function(c){return{value:c,done:o}})}return r=function(o){this.s=o,this.n=o.next},r.prototype={s:null,n:null,next:function(){return s(this.n.apply(this.s,arguments))},return:function(o){var c=this.s.return;return c===void 0?Promise.resolve({value:o,done:!0}):s(c.apply(this.s,arguments))},throw:function(o){var c=this.s.return;return c===void 0?Promise.reject(o):s(c.apply(this.s,arguments))}},new r(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}});Ie(wg(),1),Ie(tn(),1);var Ag=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js"(n,e){function t(){var r=typeof SuppressedError=="function"?SuppressedError:function(o,c){var u=Error();return u.name="SuppressedError",u.error=o,u.suppressed=c,u},i={},s=[];function a(o,c){if(c!=null){if(Object(c)!==c)throw new TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(o)var u=c[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(u===void 0&&(u=c[Symbol.dispose||Symbol.for("Symbol.dispose")],o))var l=u;if(typeof u!="function")throw new TypeError("Object is not disposable.");l&&(u=function(){try{l.call(c)}catch(d){return Promise.reject(d)}}),s.push({v:c,d:u,a:o})}else o&&s.push({d:c,a:o});return c}return{e:i,u:a.bind(null,!1),a:a.bind(null,!0),d:function(){var c,u=this.e,l=0;function f(){for(;c=s.pop();)try{if(!c.a&&l===1)return l=0,s.push(c),Promise.resolve().then(f);if(c.d){var p=c.d.call(c.v);if(c.a)return l|=2,Promise.resolve(p).then(f,d)}else l|=1}catch(y){return d(y)}if(l===1)return u!==i?Promise.reject(u):Promise.resolve();if(u!==i)throw u}function d(p){return u=u!==i?new r(p,u):p,f()}return f()}}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}),Vd=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/OverloadYield.js"(n,e){function t(r,i){this.v=r,this.k=i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}),vg=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/awaitAsyncGenerator.js"(n,e){var t=Vd();function r(i){return new t(i,0)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}}),Eg=gn({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/wrapAsyncGenerator.js"(n,e){var t=Vd();function r(s){return function(){return new i(s.apply(this,arguments))}}function i(s){var a,o;function c(l,f){try{var d=s[l](f),p=d.value,y=p instanceof t;Promise.resolve(y?p.v:p).then(function(h){if(y){var m=l==="return"?"return":"next";if(!p.k||h.done)return c(m,h);h=s[m](h).value}u(d.done?"return":"normal",h)},function(h){c("throw",h)})}catch(h){u("throw",h)}}function u(l,f){switch(l){case"return":a.resolve({value:f,done:!0});break;case"throw":a.reject(f);break;default:a.resolve({value:f,done:!1})}(a=a.next)?c(a.key,a.arg):o=null}this._invoke=function(l,f){return new Promise(function(d,p){var y={key:l,arg:f,resolve:d,reject:p,next:null};o?o=o.next=y:(a=o=y,c(l,f))})},typeof s.return!="function"&&(this.return=void 0)}i.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},i.prototype.next=function(s){return this._invoke("next",s)},i.prototype.throw=function(s){return this._invoke("throw",s)},i.prototype.return=function(s){return this._invoke("return",s)},e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}});Ie(Ag(),1),Ie(vg(),1),Ie(Eg(),1),Ie(tn(),1);function ft(n){return n===null?"null":Array.isArray(n)?"array":typeof n}function fi(n){return ft(n)==="object"}function Tg(n){return Array.isArray(n)&&n.length>0&&n.every(e=>"message"in e)}function zd(n,e){return n.length<124?n:e}const Pg="graphql-transport-ws";var Rt=(n=>(n[n.InternalServerError=4500]="InternalServerError",n[n.InternalClientError=4005]="InternalClientError",n[n.BadRequest=4400]="BadRequest",n[n.BadResponse=4004]="BadResponse",n[n.Unauthorized=4401]="Unauthorized",n[n.Forbidden=4403]="Forbidden",n[n.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",n[n.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",n[n.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",n[n.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",n[n.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests",n))(Rt||{}),Bt=(n=>(n.ConnectionInit="connection_init",n.ConnectionAck="connection_ack",n.Ping="ping",n.Pong="pong",n.Subscribe="subscribe",n.Next="next",n.Error="error",n.Complete="complete",n))(Bt||{});function jd(n){if(!fi(n))throw new Error(`Message is expected to be an object, but got ${ft(n)}`);if(!n.type)throw new Error("Message is missing the 'type' property");if(typeof n.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${ft(n.type)}`);switch(n.type){case"connection_init":case"connection_ack":case"ping":case"pong":{if(n.payload!=null&&!fi(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${n.payload}"`);break}case"subscribe":{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${ft(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!fi(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object, but got ${ft(n.payload)}`);if(typeof n.payload.query!="string")throw new Error(`"${n.type}" message payload expects the 'query' property to be a string, but got ${ft(n.payload.query)}`);if(n.payload.variables!=null&&!fi(n.payload.variables))throw new Error(`"${n.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${ft(n.payload.variables)}`);if(n.payload.operationName!=null&&ft(n.payload.operationName)!=="string")throw new Error(`"${n.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${ft(n.payload.operationName)}`);if(n.payload.extensions!=null&&!fi(n.payload.extensions))throw new Error(`"${n.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${ft(n.payload.extensions)}`);break}case"next":{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${ft(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!fi(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object, but got ${ft(n.payload)}`);break}case"error":{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${ft(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!Tg(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(n.payload)}`);break}case"complete":{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${ft(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${n.type}"`)}return n}function Sg(n,e){return jd(typeof n=="string"?JSON.parse(n,e):n)}function to(n,e){return jd(n),JSON.stringify(n,e)}function Wd(n){const{url:e,connectionParams:t,lazy:r=!0,onNonLazyError:i=console.error,lazyCloseTimeout:s=0,keepAlive:a=0,disablePong:o,connectionAckWaitTimeout:c=0,retryAttempts:u=5,retryWait:l=async function(P){const T=Math.pow(2,P);await new Promise(N=>setTimeout(N,T*1e3+Math.floor(Math.random()*2700+300)))},shouldRetry:f=x0,on:d,webSocketImpl:p,generateID:y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,P=>{const T=Math.random()*16|0;return(P=="x"?T:T&3|8).toString(16)})},jsonMessageReplacer:h,jsonMessageReviver:m}=n;let x;if(p){if(!Og(p))throw new Error("Invalid WebSocket implementation provided");x=p}else typeof WebSocket<"u"?x=WebSocket:typeof global<"u"?x=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(x=window.WebSocket||window.MozWebSocket);if(!x)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const w=x,g=(()=>{const G=(()=>{const T={};return{on(N,k){return T[N]=k,()=>{delete T[N]}},emit(N){var k;"id"in N&&((k=T[N.id])==null||k.call(T,N))}}})(),P={connecting:d!=null&&d.connecting?[d.connecting]:[],opened:d!=null&&d.opened?[d.opened]:[],connected:d!=null&&d.connected?[d.connected]:[],ping:d!=null&&d.ping?[d.ping]:[],pong:d!=null&&d.pong?[d.pong]:[],message:d!=null&&d.message?[G.emit,d.message]:[G.emit],closed:d!=null&&d.closed?[d.closed]:[],error:d!=null&&d.error?[d.error]:[]};return{onMessage:G.on,on(T,N){const k=P[T];return k.push(N),()=>{k.splice(k.indexOf(N),1)}},emit(T,...N){for(const k of[...P[T]])k(...N)}}})();function v(G){const P=[g.on("error",T=>{P.forEach(N=>N()),G(T)}),g.on("closed",T=>{P.forEach(N=>N()),G(T)})]}let S,O=0,R,C=!1,_=0,U=!1;async function D(){clearTimeout(R);const[G,P]=await(S??(S=new Promise((k,L)=>(async()=>{if(C){if(await l(_),!O)return S=void 0,L({code:1e3,reason:"All Subscriptions Gone"});_++}g.emit("connecting",C);const M=new w(typeof e=="function"?await e():e,Pg);let W,Z;function le(){isFinite(a)&&a>0&&(clearTimeout(Z),Z=setTimeout(()=>{M.readyState===w.OPEN&&(M.send(to({type:Bt.Ping})),g.emit("ping",!1,void 0))},a))}v(J=>{S=void 0,clearTimeout(W),clearTimeout(Z),L(J),J instanceof Kd&&(M.close(4499,"Terminated"),M.onerror=null,M.onclose=null)}),M.onerror=J=>g.emit("error",J),M.onclose=J=>g.emit("closed",J),M.onopen=async()=>{try{g.emit("opened",M);const J=typeof t=="function"?await t():t;if(M.readyState!==w.OPEN)return;M.send(to(J?{type:Bt.ConnectionInit,payload:J}:{type:Bt.ConnectionInit},h)),isFinite(c)&&c>0&&(W=setTimeout(()=>{M.close(Rt.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},c)),le()}catch(J){g.emit("error",J),M.close(Rt.InternalClientError,zd(J instanceof Error?J.message:String(J),"Internal client error"))}};let ie=!1;M.onmessage=({data:J})=>{try{const X=Sg(J,m);if(g.emit("message",X),X.type==="ping"||X.type==="pong"){g.emit(X.type,!0,X.payload),X.type==="pong"?le():o||(M.send(to(X.payload?{type:Bt.Pong,payload:X.payload}:{type:Bt.Pong})),g.emit("pong",!1,X.payload));return}if(ie)return;if(X.type!==Bt.ConnectionAck)throw new Error(`First message cannot be of type ${X.type}`);clearTimeout(W),ie=!0,g.emit("connected",M,X.payload,C),C=!1,_=0,k([M,new Promise((Pe,en)=>v(en))])}catch(X){M.onmessage=null,g.emit("error",X),M.close(Rt.BadResponse,zd(X instanceof Error?X.message:String(X),"Bad response"))}}})())));G.readyState===w.CLOSING&&await P;let T=()=>{};const N=new Promise(k=>T=k);return[G,T,Promise.race([N.then(()=>{if(!O){const k=()=>G.close(1e3,"Normal Closure");isFinite(s)&&s>0?R=setTimeout(()=>{G.readyState===w.OPEN&&k()},s):k()}}),P])]}function $(G){if(x0(G)&&(Ig(G.code)||[Rt.InternalServerError,Rt.InternalClientError,Rt.BadRequest,Rt.BadResponse,Rt.Unauthorized,Rt.SubprotocolNotAcceptable,Rt.SubscriberAlreadyExists,Rt.TooManyInitialisationRequests].includes(G.code)))throw G;if(U)return!1;if(x0(G)&&G.code===1e3)return O>0;if(!u||_>=u||!f(G))throw G;return C=!0}r||(async()=>{for(O++;;)try{const[,,G]=await D();await G}catch(G){try{if(!$(G))return}catch(P){return i==null?void 0:i(P)}}})();function H(G,P){const T=y(G);let N=!1,k=!1,L=()=>{O--,N=!0};return(async()=>{for(O++;;)try{const[M,W,Z]=await D();if(N)return W();const le=g.onMessage(T,ie=>{switch(ie.type){case Bt.Next:{P.next(ie.payload);return}case Bt.Error:{k=!0,N=!0,P.error(ie.payload),L();return}case Bt.Complete:{N=!0,L();return}}});M.send(to({id:T,type:Bt.Subscribe,payload:G},h)),L=()=>{!N&&M.readyState===w.OPEN&&M.send(to({id:T,type:Bt.Complete},h)),O--,N=!0,W()},await Z.finally(le);return}catch(M){if(!$(M))return}})().then(()=>{k||P.complete()}).catch(M=>{P.error(M)}),()=>{N||L()}}return{on:g.on,subscribe:H,iterate(G){const P=[],T={done:!1,error:null,resolve:()=>{}},N=H(G,{next(L){P.push(L),T.resolve()},error(L){T.done=!0,T.error=L,T.resolve()},complete(){T.done=!0,T.resolve()}}),k=async function*(){for(;;){for(P.length||await new Promise(M=>T.resolve=M);P.length;)yield P.shift();if(T.error)throw T.error;if(T.done)return}}();return k.throw=async L=>(T.done||(T.done=!0,T.error=L,T.resolve()),{done:!0,value:void 0}),k.return=async()=>(N(),{done:!0,value:void 0}),k},async dispose(){if(U=!0,S){const[G]=await S;G.close(1e3,"Normal Closure")}},terminate(){S&&g.emit("closed",new Kd)}}}class Kd extends Error{constructor(){super(...arguments);I(this,"name","TerminatedCloseEvent");I(this,"message","4499: Terminated");I(this,"code",4499);I(this,"reason","Terminated");I(this,"wasClean",!1)}}function x0(n){return fi(n)&&"code"in n&&"reason"in n}function Ig(n){return[1e3,1001,1006,1005,1012,1013,1014].includes(n)?!1:n>=1e3&&n<=1999}function Og(n){return typeof n=="function"&&"constructor"in n&&"CLOSED"in n&&"CLOSING"in n&&"CONNECTING"in n&&"OPEN"in n}const Cg="1.1.0";let _t=class hd extends Error{constructor(e,t={}){var a;const r=t.cause instanceof hd?t.cause.details:(a=t.cause)!=null&&a.message?t.cause.message:t.details,i=t.cause instanceof hd&&t.cause.docsPath||t.docsPath,s=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Cg}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}};function zn(n,e){const t=n.exec(e);return t==null?void 0:t.groups}const Qd=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,qd=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Jd=/^\(.+?\).*?$/,Yd=/^tuple(?<array>(\[(\d*)\])*)$/;function g0(n){let e=n.type;if(Yd.test(n.type)&&"components"in n){e="(";const t=n.components.length;for(let i=0;i<t;i++){const s=n.components[i];e+=g0(s),i<t-1&&(e+=", ")}const r=zn(Yd,n.type);return e+=`)${(r==null?void 0:r.array)??""}`,g0({...n,type:e})}return"indexed"in n&&n.indexed&&(e=`${e} indexed`),n.name?`${e} ${n.name}`:e}function no(n){let e="";const t=n.length;for(let r=0;r<t;r++){const i=n[r];e+=g0(i),r!==t-1&&(e+=", ")}return e}function Ng(n){var e;return n.type==="function"?`function ${n.name}(${no(n.inputs)})${n.stateMutability&&n.stateMutability!=="nonpayable"?` ${n.stateMutability}`:""}${(e=n.outputs)!=null&&e.length?` returns (${no(n.outputs)})`:""}`:n.type==="event"?`event ${n.name}(${no(n.inputs)})`:n.type==="error"?`error ${n.name}(${no(n.inputs)})`:n.type==="constructor"?`constructor(${no(n.inputs)})${n.stateMutability==="payable"?" payable":""}`:n.type==="fallback"?`fallback() external${n.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Zd=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Rg(n){return Zd.test(n)}function Bg(n){return zn(Zd,n)}const Xd=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function _g(n){return Xd.test(n)}function kg(n){return zn(Xd,n)}const ep=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Lg(n){return ep.test(n)}function Mg(n){return zn(ep,n)}const tp=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function np(n){return tp.test(n)}function Dg(n){return zn(tp,n)}const rp=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Ug(n){return rp.test(n)}function Fg(n){return zn(rp,n)}const ip=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Gg(n){return ip.test(n)}function Hg(n){return zn(ip,n)}const $g=/^receive\(\) external payable$/;function Vg(n){return $g.test(n)}const zg=new Set(["indexed"]),w0=new Set(["calldata","memory","storage"]);class jg extends _t{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Wg extends _t{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Kg extends _t{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Qg extends _t{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class qg extends _t{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Jg extends _t{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Yg extends _t{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ps extends _t{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Zg extends _t{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Xg extends _t{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class e2 extends _t{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class t2 extends _t{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function n2(n,e,t){let r="";if(t)for(const i of Object.entries(t)){if(!i)continue;let s="";for(const a of i[1])s+=`[${a.type}${a.name?`:${a.name}`:""}]`;r+=`(${i[0]}{${s}})`}return e?`${e}:${n}${r}`:n}const A0=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function r2(n,e={}){if(Lg(n))return i2(n,e);if(_g(n))return s2(n,e);if(Rg(n))return a2(n,e);if(Ug(n))return o2(n,e);if(Gg(n))return c2(n);if(Vg(n))return{type:"receive",stateMutability:"payable"};throw new Zg({signature:n})}function i2(n,e={}){const t=Mg(n);if(!t)throw new ps({signature:n,type:"function"});const r=nn(t.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(di(r[o],{modifiers:w0,structs:e,type:"function"}));const a=[];if(t.returns){const o=nn(t.returns),c=o.length;for(let u=0;u<c;u++)a.push(di(o[u],{modifiers:w0,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:i,outputs:a}}function s2(n,e={}){const t=kg(n);if(!t)throw new ps({signature:n,type:"event"});const r=nn(t.parameters),i=[],s=r.length;for(let a=0;a<s;a++)i.push(di(r[a],{modifiers:zg,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:i}}function a2(n,e={}){const t=Bg(n);if(!t)throw new ps({signature:n,type:"error"});const r=nn(t.parameters),i=[],s=r.length;for(let a=0;a<s;a++)i.push(di(r[a],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:i}}function o2(n,e={}){const t=Fg(n);if(!t)throw new ps({signature:n,type:"constructor"});const r=nn(t.parameters),i=[],s=r.length;for(let a=0;a<s;a++)i.push(di(r[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:i}}function c2(n){const e=Hg(n);if(!e)throw new ps({signature:n,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const u2=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,l2=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,f2=/^u?int$/;function di(n,e){var f,d;const t=n2(n,e==null?void 0:e.type,e==null?void 0:e.structs);if(A0.has(t))return A0.get(t);const r=Jd.test(n),i=zn(r?l2:u2,n);if(!i)throw new Kg({param:n});if(i.name&&p2(i.name))throw new Qg({param:n,name:i.name});const s=i.name?{name:i.name}:{},a=i.modifier==="indexed"?{indexed:!0}:{},o=(e==null?void 0:e.structs)??{};let c,u={};if(r){c="tuple";const p=nn(i.type),y=[],h=p.length;for(let m=0;m<h;m++)y.push(di(p[m],{structs:o}));u={components:y}}else if(i.type in o)c="tuple",u={components:o[i.type]};else if(f2.test(i.type))c=`${i.type}256`;else if(i.type==="address payable")c="address";else if(c=i.type,(e==null?void 0:e.type)!=="struct"&&!sp(c))throw new Wg({type:c});if(i.modifier){if(!((d=(f=e==null?void 0:e.modifiers)==null?void 0:f.has)!=null&&d.call(f,i.modifier)))throw new qg({param:n,type:e==null?void 0:e.type,modifier:i.modifier});if(w0.has(i.modifier)&&!h2(c,!!i.array))throw new Jg({param:n,type:e==null?void 0:e.type,modifier:i.modifier})}const l={type:`${c}${i.array??""}`,...s,...a,...u};return A0.set(t,l),l}function nn(n,e=[],t="",r=0){const i=n.trim().length;for(let s=0;s<i;s++){const a=n[s],o=n.slice(s+1);switch(a){case",":return r===0?nn(o,[...e,t.trim()]):nn(o,e,`${t}${a}`,r);case"(":return nn(o,e,`${t}${a}`,r+1);case")":return nn(o,e,`${t}${a}`,r-1);default:return nn(o,e,`${t}${a}`,r)}}if(t==="")return e;if(r!==0)throw new t2({current:t,depth:r});return e.push(t.trim()),e}function sp(n){return n==="address"||n==="bool"||n==="function"||n==="string"||Qd.test(n)||qd.test(n)}const d2=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function p2(n){return n==="address"||n==="bool"||n==="function"||n==="string"||n==="tuple"||Qd.test(n)||qd.test(n)||d2.test(n)}function h2(n,e){return e||n==="bytes"||n==="string"||n==="tuple"}function y2(n){const e={},t=n.length;for(let a=0;a<t;a++){const o=n[a];if(!np(o))continue;const c=Dg(o);if(!c)throw new ps({signature:o,type:"struct"});const u=c.properties.split(";"),l=[],f=u.length;for(let d=0;d<f;d++){const y=u[d].trim();if(!y)continue;const h=di(y,{type:"struct"});l.push(h)}if(!l.length)throw new Xg({signature:o});e[c.name]=l}const r={},i=Object.entries(e),s=i.length;for(let a=0;a<s;a++){const[o,c]=i[a];r[o]=ap(c,e)}return r}const b2=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function ap(n,e,t=new Set){const r=[],i=n.length;for(let s=0;s<i;s++){const a=n[s];if(Jd.test(a.type))r.push(a);else{const c=zn(b2,a.type);if(!(c!=null&&c.type))throw new Yg({abiParameter:a});const{array:u,type:l}=c;if(l in e){if(t.has(l))throw new e2({type:l});r.push({...a,type:`tuple${u??""}`,components:ap(e[l]??[],e,new Set([...t,l]))})}else if(sp(l))r.push(a);else throw new jg({type:l})}}return r}function op(n){const e=y2(n),t=[],r=n.length;for(let i=0;i<r;i++){const s=n[i];np(s)||t.push(r2(s,e))}return t}function be(n,e,t){const r=n[e.name];if(typeof r=="function")return r;const i=n[t];return typeof i=="function"?i:s=>e(n,s)}function rn(n,{includeName:e=!1}={}){if(n.type!=="function"&&n.type!=="event"&&n.type!=="error")throw new O2(n.type);return`${n.name}(${Ic(n.inputs,{includeName:e})})`}function Ic(n,{includeName:e=!1}={}){return n?n.map(t=>m2(t,{includeName:e})).join(e?", ":","):""}function m2(n,{includeName:e}){return n.type.startsWith("tuple")?`(${Ic(n.components,{includeName:e})})${n.type.slice(5)}`:n.type+(e&&n.name?` ${n.name}`:"")}function jn(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function Le(n){return jn(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const cp="2.38.0";let ro={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${cp}`},j=class yd extends Error{constructor(e,t={}){var o;const r=(()=>{var c;return t.cause instanceof yd?t.cause.details:(c=t.cause)!=null&&c.message?t.cause.message:t.details})(),i=t.cause instanceof yd&&t.cause.docsPath||t.docsPath,s=(o=ro.getDocsUrl)==null?void 0:o.call(ro,{...t,docsPath:i}),a=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...ro.version?[`Version: ${ro.version}`]:[]].join(`
`);super(a,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=cp}walk(e){return up(this,e)}};function up(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?up(n.cause,e):e?null:n}class x2 extends j{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class lp extends j{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class fp extends j{constructor({data:e,params:t,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Ic(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}}class v0 extends j{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class g2 extends j{constructor({expectedLength:e,givenLength:t,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class w2 extends j{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Le(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class A2 extends j{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class v2 extends j{constructor(e,{docsPath:t}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:t,name:"AbiErrorInputsNotFoundError"})}}class dp extends j{constructor(e,{docsPath:t}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:t,name:"AbiErrorNotFoundError"})}}class pp extends j{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class E2 extends j{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class hp extends j{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}}class yp extends j{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t,name:"AbiEventNotFoundError"})}}class hs extends j{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class bp extends j{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class T2 extends j{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class P2 extends j{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${rn(e.abiItem)}\`, and`,`\`${t.type}\` in \`${rn(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Oc extends j{constructor({abiItem:e,data:t,params:r,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Ic(r,{includeName:!0})})`,`Data:   ${t} (${i} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=i}}class E0 extends j{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${rn(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class S2 extends j{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}}class I2 extends j{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}}class mp extends j{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class O2 extends j{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class C2 extends j{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class xp extends j{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let gp=class extends j{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};class wp extends j{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${t} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function ys(n,{dir:e,size:t=32}={}){return typeof n=="string"?Cr(n,{dir:e,size:t}):N2(n,{dir:e,size:t})}function Cr(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new gp({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function N2(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new gp({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let i=0;i<t;i++){const s=e==="right";r[s?i:t-i-1]=n[s?i:n.length-i-1]}return r}let Ap=class extends j{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}};class R2 extends j{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class B2 extends j{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function T0(n,{dir:e="left"}={}){let t=typeof n=="string"?n.replace("0x",""):n,r=0;for(let i=0;i<t.length-1&&t[e==="left"?i:t.length-i-1].toString()==="0";i++)r++;return t=e==="left"?t.slice(r):t.slice(0,t.length-r),typeof n=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}function wn(n,{size:e}){if(Le(n)>e)throw new B2({givenSize:Le(n),maxSize:e})}function io(n,e={}){const{signed:t}=e;e.size&&wn(n,{size:e.size});const r=BigInt(n);if(!t)return r;const i=(n.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function bs(n,e={}){return Number(io(n,e))}const _2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function An(n,e={}){return typeof n=="number"||typeof n=="bigint"?se(n,e):typeof n=="string"?Ep(n,e):typeof n=="boolean"?vp(n,e):dt(n,e)}function vp(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(wn(t,{size:e.size}),ys(t,{size:e.size})):t}function dt(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=_2[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(wn(r,{size:e.size}),ys(r,{dir:"right",size:e.size})):r}function se(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<a){const c=typeof n=="bigint"?"n":"";throw new Ap({max:s?`${s}${c}`:void 0,min:`${a}${c}`,signed:t,size:r,value:`${n}${c}`})}const o=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?ys(o,{size:r}):o}const k2=new TextEncoder;function Ep(n,e={}){const t=k2.encode(n);return dt(t,e)}const L2=new TextEncoder;function so(n,e={}){return typeof n=="number"||typeof n=="bigint"?D2(n,e):typeof n=="boolean"?M2(n,e):jn(n)?Kn(n,e):Pp(n,e)}function M2(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(wn(t,{size:e.size}),ys(t,{size:e.size})):t}const Wn={zero:48,nine:57,A:65,F:70,a:97,f:102};function Tp(n){if(n>=Wn.zero&&n<=Wn.nine)return n-Wn.zero;if(n>=Wn.A&&n<=Wn.F)return n-(Wn.A-10);if(n>=Wn.a&&n<=Wn.f)return n-(Wn.a-10)}function Kn(n,e={}){let t=n;e.size&&(wn(t,{size:e.size}),t=ys(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let a=0,o=0;a<i;a++){const c=Tp(r.charCodeAt(o++)),u=Tp(r.charCodeAt(o++));if(c===void 0||u===void 0)throw new j(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);s[a]=c*16+u}return s}function D2(n,e){const t=se(n,e);return Kn(t)}function Pp(n,e={}){const t=L2.encode(n);return typeof e.size=="number"?(wn(t,{size:e.size}),ys(t,{dir:"right",size:e.size})):t}const Cc=BigInt(2**32-1),Sp=BigInt(32);function U2(n,e=!1){return e?{h:Number(n&Cc),l:Number(n>>Sp&Cc)}:{h:Number(n>>Sp&Cc)|0,l:Number(n&Cc)|0}}function F2(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:a,l:o}=U2(n[s],e);[r[s],i[s]]=[a,o]}return[r,i]}const G2=(n,e,t)=>n<<t|e>>>32-t,H2=(n,e,t)=>e<<t|n>>>32-t,$2=(n,e,t)=>e<<t-32|n>>>64-t,V2=(n,e,t)=>n<<t-32|e>>>64-t,ms=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z2(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function ao(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function pi(n,...e){if(!z2(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function j2(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ao(n.outputLen),ao(n.blockLen)}function xs(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Ip(n,e){pi(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function W2(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function gs(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function P0(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function vn(n,e){return n<<32-e|n>>>e}const K2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Q2(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function q2(n){for(let e=0;e<n.length;e++)n[e]=Q2(n[e]);return n}const Op=K2?n=>n:q2;function J2(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Nc(n){return typeof n=="string"&&(n=J2(n)),pi(n),n}function Y2(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];pi(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let S0=class{};function Cp(n){const e=r=>n().update(Nc(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Z2(n=32){if(ms&&typeof ms.getRandomValues=="function")return ms.getRandomValues(new Uint8Array(n));if(ms&&typeof ms.randomBytes=="function")return Uint8Array.from(ms.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const X2=BigInt(0),oo=BigInt(1),e6=BigInt(2),t6=BigInt(7),n6=BigInt(256),r6=BigInt(113),Np=[],Rp=[],Bp=[];for(let n=0,e=oo,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],Np.push(2*(5*r+t)),Rp.push((n+1)*(n+2)/2%64);let i=X2;for(let s=0;s<7;s++)e=(e<<oo^(e>>t6)*r6)%n6,e&e6&&(i^=oo<<(oo<<BigInt(s))-oo);Bp.push(i)}const _p=F2(Bp,!0),i6=_p[0],s6=_p[1],kp=(n,e,t)=>t>32?$2(n,e,t):G2(n,e,t),Lp=(n,e,t)=>t>32?V2(n,e,t):H2(n,e,t);function a6(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)t[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=t[c],l=t[c+1],f=kp(u,l,1)^t[o],d=Lp(u,l,1)^t[o+1];for(let p=0;p<50;p+=10)n[a+p]^=f,n[a+p+1]^=d}let i=n[2],s=n[3];for(let a=0;a<24;a++){const o=Rp[a],c=kp(i,s,o),u=Lp(i,s,o),l=Np[a];i=n[l],s=n[l+1],n[l]=c,n[l+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)t[o]=n[a+o];for(let o=0;o<10;o++)n[a+o]^=~t[(o+2)%10]&t[(o+4)%10]}n[0]^=i6[r],n[1]^=s6[r]}gs(t)}let o6=class w1 extends S0{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,ao(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=W2(this.state)}clone(){return this._cloneInto()}keccak(){Op(this.state32),a6(this.state32,this.rounds),Op(this.state32),this.posOut=0,this.pos=0}update(e){xs(this),e=Nc(e),pi(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const a=Math.min(t-this.pos,i-s);for(let o=0;o<a;o++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){xs(this,!1),pi(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ao(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ip(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,gs(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new w1(t,r,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}};const c6=(n,e,t)=>Cp(()=>new o6(e,n,t)),u6=c6(1,136,256/8);function hi(n,e){const t=e||"hex",r=u6(jn(n,{strict:!1})?so(n):n);return t==="bytes"?r:An(r)}const l6=n=>hi(so(n));function f6(n){return l6(n)}function d6(n){let e=!0,t="",r=0,i="",s=!1;for(let a=0;a<n.length;a++){const o=n[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function",""].includes(i))i="";else if(i+=o,o===")"){s=!0;break}continue}if(o===" "){n[a-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}i+=o,t+=o}}if(!s)throw new j("Unable to normalize signature.");return i}const p6=n=>{const e=typeof n=="string"?n:Ng(n);return d6(e)};function Mp(n){return f6(p6(n))}const Rc=Mp;class yi extends j{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class I0 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const O0=new I0(8192);function Bc(n,e){if(O0.has(`${n}.${e}`))return O0.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=hi(Pp(t),"bytes"),i=t.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&i[a]&&(i[a]=i[a].toUpperCase()),(r[a>>1]&15)>=8&&i[a+1]&&(i[a+1]=i[a+1].toUpperCase());const s=`0x${i.join("")}`;return O0.set(`${n}.${e}`,s),s}function it(n,e){if(!En(n,{strict:!1}))throw new yi({address:n});return Bc(n,e)}const h6=/^0x[a-fA-F0-9]{40}$/,C0=new I0(8192);function En(n,e){const{strict:t=!0}=e??{},r=`${n}.${t}`;if(C0.has(r))return C0.get(r);const i=h6.test(n)?n.toLowerCase()===n?!0:t?Bc(n)===n:!0:!1;return C0.set(r,i),i}function bi(n){return typeof n[0]=="string"?co(n):y6(n)}function y6(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function co(n){return`0x${n.reduce((e,t)=>e+t.replace("0x",""),"")}`}function ws(n,e,t,{strict:r}={}){return jn(n,{strict:!1})?b6(n,e,t,{strict:r}):Fp(n,e,t,{strict:r})}function Dp(n,e){if(typeof e=="number"&&e>0&&e>Le(n)-1)throw new xp({offset:e,position:"start",size:Le(n)})}function Up(n,e,t){if(typeof e=="number"&&typeof t=="number"&&Le(n)!==t-e)throw new xp({offset:t,position:"end",size:Le(n)})}function Fp(n,e,t,{strict:r}={}){Dp(n,e);const i=n.slice(e,t);return r&&Up(i,e,t),i}function b6(n,e,t,{strict:r}={}){Dp(n,e);const i=`0x${n.replace("0x","").slice((e??0)*2,(t??n.length)*2)}`;return r&&Up(i,e,t),i}const m6=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function As(n,e){if(n.length!==e.length)throw new A2({expectedLength:n.length,givenLength:e.length});const t=x6({params:n,values:e}),r=R0(t);return r.length===0?"0x":r}function x6({params:n,values:e}){const t=[];for(let r=0;r<n.length;r++)t.push(N0({param:n[r],value:e[r]}));return t}function N0({param:n,value:e}){const t=B0(n.type);if(t){const[r,i]=t;return w6(e,{length:r,param:{...n,type:i}})}if(n.type==="tuple")return P6(e,{param:n});if(n.type==="address")return g6(e);if(n.type==="bool")return v6(e);if(n.type.startsWith("uint")||n.type.startsWith("int")){const r=n.type.startsWith("int"),[,,i="256"]=m6.exec(n.type)??[];return E6(e,{signed:r,size:Number(i)})}if(n.type.startsWith("bytes"))return A6(e,{param:n});if(n.type==="string")return T6(e);throw new S2(n.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function R0(n){let e=0;for(let s=0;s<n.length;s++){const{dynamic:a,encoded:o}=n[s];a?e+=32:e+=Le(o)}const t=[],r=[];let i=0;for(let s=0;s<n.length;s++){const{dynamic:a,encoded:o}=n[s];a?(t.push(se(e+i,{size:32})),r.push(o),i+=Le(o)):t.push(o)}return bi([...t,...r])}function g6(n){if(!En(n))throw new yi({address:n});return{dynamic:!1,encoded:Cr(n.toLowerCase())}}function w6(n,{length:e,param:t}){const r=e===null;if(!Array.isArray(n))throw new mp(n);if(!r&&n.length!==e)throw new g2({expectedLength:e,givenLength:n.length,type:`${t.type}[${e}]`});let i=!1;const s=[];for(let a=0;a<n.length;a++){const o=N0({param:t,value:n[a]});o.dynamic&&(i=!0),s.push(o)}if(r||i){const a=R0(s);if(r){const o=se(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?bi([o,a]):o}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:bi(s.map(({encoded:a})=>a))}}function A6(n,{param:e}){const[,t]=e.type.split("bytes"),r=Le(n);if(!t){let i=n;return r%32!==0&&(i=Cr(i,{dir:"right",size:Math.ceil((n.length-2)/2/32)*32})),{dynamic:!0,encoded:bi([Cr(se(r,{size:32})),i])}}if(r!==Number.parseInt(t,10))throw new w2({expectedSize:Number.parseInt(t,10),value:n});return{dynamic:!1,encoded:Cr(n,{dir:"right"})}}function v6(n){if(typeof n!="boolean")throw new j(`Invalid boolean value: "${n}" (type: ${typeof n}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Cr(vp(n))}}function E6(n,{signed:e,size:t=256}){if(typeof t=="number"){const r=2n**(BigInt(t)-(e?1n:0n))-1n,i=e?-r-1n:0n;if(n>r||n<i)throw new Ap({max:r.toString(),min:i.toString(),signed:e,size:t/8,value:n.toString()})}return{dynamic:!1,encoded:se(n,{size:32,signed:e})}}function T6(n){const e=Ep(n),t=Math.ceil(Le(e)/32),r=[];for(let i=0;i<t;i++)r.push(Cr(ws(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:bi([Cr(se(Le(e),{size:32})),...r])}}function P6(n,{param:e}){let t=!1;const r=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],a=Array.isArray(n)?i:s.name,o=N0({param:s,value:n[a]});r.push(o),o.dynamic&&(t=!0)}return{dynamic:t,encoded:t?R0(r):bi(r.map(({encoded:i})=>i))}}function B0(n){const e=n.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const uo=n=>ws(Mp(n),0,4);function mi(n){const{abi:e,args:t=[],name:r}=n,i=jn(r,{strict:!1}),s=e.filter(o=>i?o.type==="function"?uo(o)===r:o.type==="event"?Rc(o)===r:!1:"name"in o&&o.name===r);if(s.length===0)return;if(s.length===1)return s[0];let a;for(const o of s){if(!("inputs"in o))continue;if(!t||t.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==t.length)continue;if(t.every((u,l)=>{const f="inputs"in o&&o.inputs[l];return f?_0(u,f):!1})){if(a&&"inputs"in a&&a.inputs){const u=Gp(o.inputs,a.inputs,t);if(u)throw new P2({abiItem:o,type:u[0]},{abiItem:a,type:u[1]})}a=o}}return a||s[0]}function _0(n,e){const t=typeof n,r=e.type;switch(r){case"address":return En(n,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>_0(Object.values(n)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||n instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(n)&&n.every(i=>_0(i,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Gp(n,e,t){for(const r in n){const i=n[r],s=e[r];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return Gp(i.components,s.components,t[r]);const a=[i.type,s.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?En(t[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?En(t[r],{strict:!1}):!1)return a}}const Hp="/docs/contract/encodeEventTopics";function k0(n){var c;const{abi:e,eventName:t,args:r}=n;let i=e[0];if(t){const u=mi({abi:e,name:t});if(!u)throw new yp(t,{docsPath:Hp});i=u}if(i.type!=="event")throw new yp(void 0,{docsPath:Hp});const s=rn(i),a=Rc(s);let o=[];if(r&&"inputs"in i){const u=(c=i.inputs)==null?void 0:c.filter(f=>"indexed"in f&&f.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(f=>r[f.name]))??[]:[];l.length>0&&(o=(u==null?void 0:u.map((f,d)=>Array.isArray(l[d])?l[d].map((p,y)=>$p({param:f,value:l[d][y]})):typeof l[d]<"u"&&l[d]!==null?$p({param:f,value:l[d]}):null))??[])}return[a,...o]}function $p({param:n,value:e}){if(n.type==="string"||n.type==="bytes")return hi(so(e));if(n.type==="tuple"||n.type.match(/^(.*)\[(\d+)?\]$/))throw new C2(n.type);return As([n],[e])}function S6(n,{method:e}){var r,i;const t={};return n.transport.type==="fallback"&&((i=(r=n.transport).onResponse)==null||i.call(r,({method:s,response:a,status:o,transport:c})=>{o==="success"&&e===s&&(t[a]=c.request)})),s=>t[s]||n.request}async function Vp(n,e){const{address:t,abi:r,args:i,eventName:s,fromBlock:a,strict:o,toBlock:c}=e,u=S6(n,{method:"eth_newFilter"}),l=s?k0({abi:r,args:i,eventName:s}):void 0,f=await n.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?se(a):a,toBlock:typeof c=="bigint"?se(c):c,topics:l}]});return{abi:r,args:i,eventName:s,id:f,request:u(f),strict:!!o,type:"event"}}function Qn(n){return typeof n=="string"?{address:n,type:"json-rpc"}:n}const zp="/docs/contract/encodeFunctionData";function I6(n){const{abi:e,args:t,functionName:r}=n;let i=e[0];if(r){const s=mi({abi:e,args:t,name:r});if(!s)throw new hs(r,{docsPath:zp});i=s}if(i.type!=="function")throw new hs(void 0,{docsPath:zp});return{abi:[i],functionName:uo(rn(i))}}function Nr(n){const{args:e}=n,{abi:t,functionName:r}=(()=>{var o;return n.abi.length===1&&((o=n.functionName)!=null&&o.startsWith("0x"))?n:I6(n)})(),i=t[0],s=r,a="inputs"in i&&i.inputs?As(i.inputs,e??[]):void 0;return co([s,a??"0x"])}const O6={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},jp={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},C6={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Wp extends j{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Kp extends j{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class N6 extends j{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const R6={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new N6({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new Kp({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new Wp({offset:n});const e=this.position-n;this.assertPosition(e),this.position=e},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new Wp({offset:n});const e=this.position+n;this.assertPosition(e),this.position=e},inspectByte(n){const e=n??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(n,e){const t=e??this.position;return this.assertPosition(t+n-1),this.bytes.subarray(t,t+n)},inspectUint8(n){const e=n??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(n){const e=n??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(n){const e=n??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(n){const e=n??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1),this.bytes.set(n,this.position),this.position+=n.length},pushUint8(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushUint16(n){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,n),this.position+=2},pushUint24(n){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,n>>8),this.dataView.setUint8(this.position+2,n&255),this.position+=3},pushUint32(n){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,n),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const n=this.inspectByte();return this.position++,n},readBytes(n,e){this.assertReadLimit(),this._touch();const t=this.inspectBytes(n);return this.position+=e??n,t},readUint8(){this.assertReadLimit(),this._touch();const n=this.inspectUint8();return this.position+=1,n},readUint16(){this.assertReadLimit(),this._touch();const n=this.inspectUint16();return this.position+=2,n},readUint24(){this.assertReadLimit(),this._touch();const n=this.inspectUint24();return this.position+=3,n},readUint32(){this.assertReadLimit(),this._touch();const n=this.inspectUint32();return this.position+=4,n},get remaining(){return this.bytes.length-this.position},setPosition(n){const e=this.position;return this.assertPosition(n),this.position=n,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1),n>0&&this.recursiveReadCount++}};function L0(n,{recursiveReadLimit:e=8192}={}){const t=Object.create(R6);return t.bytes=n,t.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}function B6(n,e={}){typeof e.size<"u"&&wn(n,{size:e.size});const t=dt(n,e);return io(t,e)}function _6(n,e={}){let t=n;if(typeof e.size<"u"&&(wn(t,{size:e.size}),t=T0(t)),t.length>1||t[0]>1)throw new R2(t);return!!t[0]}function qn(n,e={}){typeof e.size<"u"&&wn(n,{size:e.size});const t=dt(n,e);return bs(t,e)}function k6(n,e={}){let t=n;return typeof e.size<"u"&&(wn(t,{size:e.size}),t=T0(t,{dir:"right"})),new TextDecoder().decode(t)}function lo(n,e){const t=typeof e=="string"?Kn(e):e,r=L0(t);if(Le(t)===0&&n.length>0)throw new v0;if(Le(e)&&Le(e)<32)throw new fp({data:typeof e=="string"?e:dt(e),params:n,size:Le(e)});let i=0;const s=[];for(let a=0;a<n.length;++a){const o=n[a];r.setPosition(i);const[c,u]=vs(r,o,{staticPosition:0});i+=u,s.push(c)}return s}function vs(n,e,{staticPosition:t}){const r=B0(e.type);if(r){const[i,s]=r;return M6(n,{...e,type:s},{length:i,staticPosition:t})}if(e.type==="tuple")return G6(n,e,{staticPosition:t});if(e.type==="address")return L6(n);if(e.type==="bool")return D6(n);if(e.type.startsWith("bytes"))return U6(n,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return F6(n,e);if(e.type==="string")return H6(n,{staticPosition:t});throw new I2(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Qp=32,M0=32;function L6(n){const e=n.readBytes(32);return[Bc(dt(Fp(e,-20))),32]}function M6(n,e,{length:t,staticPosition:r}){if(!t){const a=qn(n.readBytes(M0)),o=r+a,c=o+Qp;n.setPosition(o);const u=qn(n.readBytes(Qp)),l=fo(e);let f=0;const d=[];for(let p=0;p<u;++p){n.setPosition(c+(l?p*32:f));const[y,h]=vs(n,e,{staticPosition:c});f+=h,d.push(y)}return n.setPosition(r+32),[d,32]}if(fo(e)){const a=qn(n.readBytes(M0)),o=r+a,c=[];for(let u=0;u<t;++u){n.setPosition(o+u*32);const[l]=vs(n,e,{staticPosition:o});c.push(l)}return n.setPosition(r+32),[c,32]}let i=0;const s=[];for(let a=0;a<t;++a){const[o,c]=vs(n,e,{staticPosition:r+i});i+=c,s.push(o)}return[s,i]}function D6(n){return[_6(n.readBytes(32),{size:32}),32]}function U6(n,e,{staticPosition:t}){const[r,i]=e.type.split("bytes");if(!i){const a=qn(n.readBytes(32));n.setPosition(t+a);const o=qn(n.readBytes(32));if(o===0)return n.setPosition(t+32),["0x",32];const c=n.readBytes(o);return n.setPosition(t+32),[dt(c),32]}return[dt(n.readBytes(Number.parseInt(i,10),32)),32]}function F6(n,e){const t=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),i=n.readBytes(32);return[r>48?B6(i,{signed:t}):qn(i,{signed:t}),32]}function G6(n,e,{staticPosition:t}){const r=e.components.length===0||e.components.some(({name:a})=>!a),i=r?[]:{};let s=0;if(fo(e)){const a=qn(n.readBytes(M0)),o=t+a;for(let c=0;c<e.components.length;++c){const u=e.components[c];n.setPosition(o+s);const[l,f]=vs(n,u,{staticPosition:o});s+=f,i[r?c:u==null?void 0:u.name]=l}return n.setPosition(t+32),[i,32]}for(let a=0;a<e.components.length;++a){const o=e.components[a],[c,u]=vs(n,o,{staticPosition:t});i[r?a:o==null?void 0:o.name]=c,s+=u}return[i,s]}function H6(n,{staticPosition:e}){const t=qn(n.readBytes(32)),r=e+t;n.setPosition(r);const i=qn(n.readBytes(32));if(i===0)return n.setPosition(e+32),["",32];const s=n.readBytes(i,32),a=k6(T0(s));return n.setPosition(e+32),[a,32]}function fo(n){var r;const{type:e}=n;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=n.components)==null?void 0:r.some(fo);const t=B0(n.type);return!!(t&&fo({...n,type:t[1]}))}function qp(n){const{abi:e,data:t}=n,r=ws(t,0,4);if(r==="0x")throw new v0;const s=[...e||[],jp,C6].find(a=>a.type==="error"&&r===uo(rn(a)));if(!s)throw new pp(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?lo(s.inputs,ws(t,4)):void 0,errorName:s.name}}const xi=(n,e,t)=>JSON.stringify(n,(r,i)=>typeof i=="bigint"?i.toString():i,t);function Jp({abiItem:n,args:e,includeFunctionName:t=!0,includeName:r=!1}){if("name"in n&&"inputs"in n&&n.inputs)return`${t?n.name:""}(${n.inputs.map((i,s)=>`${r&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?xi(e[s]):e[s]}`).join(", ")})`}const $6={gwei:9,wei:18},V6={ether:-9,wei:9};function Yp(n,e){let t=n.toString();const r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[i,s]=[t.slice(0,t.length-e),t.slice(t.length-e)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${i||"0"}${s?`.${s}`:""}`}function D0(n,e="wei"){return Yp(n,$6[e])}function pt(n,e="wei"){return Yp(n,V6[e])}class z6 extends j{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class j6 extends j{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Zp(n){return n.reduce((e,{slot:t,value:r})=>`${e}        ${t}: ${r}
`,"")}function W6(n){return n.reduce((e,{address:t,...r})=>{let i=`${e}    ${t}:
`;return r.nonce&&(i+=`      nonce: ${r.nonce}
`),r.balance&&(i+=`      balance: ${r.balance}
`),r.code&&(i+=`      code: ${r.code}
`),r.state&&(i+=`      state:
`,i+=Zp(r.state)),r.stateDiff&&(i+=`      stateDiff:
`,i+=Zp(r.stateDiff)),i},`  State Override:
`).slice(0,-1)}function po(n){const e=Object.entries(n).map(([r,i])=>i===void 0||i===!1?null:[r,i]).filter(Boolean),t=e.reduce((r,[i])=>Math.max(r,i.length),0);return e.map(([r,i])=>`  ${`${r}:`.padEnd(t+1)}  ${i}`).join(`
`)}class K6 extends j{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Q6 extends j{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",po(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class q6 extends j{constructor(e,{account:t,docsPath:r,chain:i,data:s,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d}){var y;const p=po({chain:i&&`${i==null?void 0:i.name} (id: ${i==null?void 0:i.id})`,from:t==null?void 0:t.address,to:f,value:typeof d<"u"&&`${D0(d)} ${((y=i==null?void 0:i.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:s,gas:a,gasPrice:typeof o<"u"&&`${pt(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${pt(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${pt(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}const J6=n=>n,_c=n=>n;class Y6 extends j{constructor(e,{account:t,docsPath:r,chain:i,data:s,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d,stateOverride:p}){var m;const y=t?Qn(t):void 0;let h=po({from:y==null?void 0:y.address,to:f,value:typeof d<"u"&&`${D0(d)} ${((m=i==null?void 0:i.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:s,gas:a,gasPrice:typeof o<"u"&&`${pt(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${pt(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${pt(u)} gwei`,nonce:l});p&&(h+=`
${W6(p)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",h].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Z6 extends j{constructor(e,{abi:t,args:r,contractAddress:i,docsPath:s,functionName:a,sender:o}){const c=mi({abi:t,args:r,name:a}),u=c?Jp({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?rn(c,{includeName:!0}):void 0,f=po({address:i&&J6(i),function:l,args:u&&u!=="()"&&`${[...Array((a==null?void 0:a.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=r,this.cause=e,this.contractAddress=i,this.functionName=a,this.sender=o}}class X6 extends j{constructor({abi:e,data:t,functionName:r,message:i}){let s,a,o,c;if(t&&t!=="0x")try{a=qp({abi:e,data:t});const{abiItem:l,errorName:f,args:d}=a;if(f==="Error")c=d[0];else if(f==="Panic"){const[p]=d;c=O6[p]}else{const p=l?rn(l,{includeName:!0}):void 0,y=l&&d?Jp({abiItem:l,args:d,includeFunctionName:!1,includeName:!1}):void 0;o=[p?`Error: ${p}`:"",y&&y!=="()"?`       ${[...Array((f==null?void 0:f.length)??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(l){s=l}else i&&(c=i);let u;s instanceof pp&&(u=s.signature,o=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=t,this.reason=c,this.signature=u}}class e5 extends j{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class t5 extends j{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Xp extends j{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class eh extends j{constructor({body:e,cause:t,details:r,headers:i,status:s,url:a}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${_c(a)}`,e&&`Request body: ${xi(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=a}}class th extends j{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${_c(r)}`,`Request body: ${xi(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}const n5=-1;class nh extends j{constructor(e,{code:t,docsPath:r,metaMessages:i,name:s,shortMessage:a}){super(a,{cause:e,docsPath:r,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof th?e.code:t??n5}}class kc extends nh{constructor(e){super(e,{code:kc.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(kc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Lc extends nh{constructor(e){super(e,{code:Lc.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Lc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});const r5=3;function Mc(n,{abi:e,address:t,args:r,docsPath:i,functionName:s,sender:a}){const o=n instanceof Xp?n:n instanceof j?n.walk(y=>"data"in y)||n.walk():{},{code:c,data:u,details:l,message:f,shortMessage:d}=o,p=n instanceof v0?new e5({functionName:s}):[r5,kc.code].includes(c)&&(u||l||f||d)?new X6({abi:e,data:typeof u=="object"?u.data:u,functionName:s,message:o instanceof th?l:d??f}):n;return new Z6(p,{abi:e,args:r,contractAddress:t,docsPath:i,functionName:s,sender:a})}function i5(n){const e=hi(`0x${n.substring(4)}`).substring(26);return Bc(`0x${e}`)}async function s5({hash:n,signature:e}){const t=jn(n)?n:An(n),{secp256k1:r}=await Promise.resolve().then(()=>d8);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:f,yParity:d}=e,p=Number(d??f),y=rh(p);return new r.Signature(io(u),io(l)).addRecoveryBit(y)}const a=jn(e)?e:An(e);if(Le(a)!==65)throw new Error("invalid signature length");const o=bs(`0x${a.slice(130)}`),c=rh(o);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function rh(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function a5({hash:n,signature:e}){return i5(await s5({hash:n,signature:e}))}function o5(n,e="hex"){const t=ih(n),r=L0(new Uint8Array(t.length));return t.encode(r),e==="hex"?dt(r.bytes):r.bytes}function ih(n){return Array.isArray(n)?c5(n.map(e=>ih(e))):u5(n)}function c5(n){const e=n.reduce((i,s)=>i+s.length,0),t=sh(e);return{length:e<=55?1+e:1+t+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+t),t===1?i.pushUint8(e):t===2?i.pushUint16(e):t===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of n)s(i)}}}function u5(n){const e=typeof n=="string"?Kn(n):n,t=sh(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+t),t===1?i.pushUint8(e.length):t===2?i.pushUint16(e.length):t===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function sh(n){if(n<2**8)return 1;if(n<2**16)return 2;if(n<2**24)return 3;if(n<2**32)return 4;throw new j("Length is too large.")}function l5(n){const{chainId:e,nonce:t,to:r}=n,i=n.contractAddress??n.address,s=hi(co(["0x05",o5([e?se(e):"0x",i,t?se(t):"0x"])]));return r==="bytes"?Kn(s):s}async function ah(n){const{authorization:e,signature:t}=n;return a5({hash:l5(e),signature:t??e})}class f5 extends j{constructor(e,{account:t,docsPath:r,chain:i,data:s,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d}){var y;const p=po({from:t==null?void 0:t.address,to:f,value:typeof d<"u"&&`${D0(d)} ${((y=i==null?void 0:i.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:s,gas:a,gasPrice:typeof o<"u"&&`${pt(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${pt(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${pt(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Es extends j{constructor({cause:e,message:t}={}){var i;const r=(i=t==null?void 0:t.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Es,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Es,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Dc extends j{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${pt(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Dc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class U0 extends j{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${pt(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(U0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class F0 extends j{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(F0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class G0 extends j{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(G0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class H0 extends j{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(H0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class $0 extends j{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty($0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class V0 extends j{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(V0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class z0 extends j{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(z0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class j0 extends j{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(j0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Uc extends j{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${pt(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${pt(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Uc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Fc extends j{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function W0(n,e){const t=(n.details||"").toLowerCase(),r=n instanceof j?n.walk(i=>(i==null?void 0:i.code)===Es.code):n;return r instanceof j?new Es({cause:n,message:r.details}):Es.nodeMessage.test(t)?new Es({cause:n,message:n.details}):Dc.nodeMessage.test(t)?new Dc({cause:n,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):U0.nodeMessage.test(t)?new U0({cause:n,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):F0.nodeMessage.test(t)?new F0({cause:n,nonce:e==null?void 0:e.nonce}):G0.nodeMessage.test(t)?new G0({cause:n,nonce:e==null?void 0:e.nonce}):H0.nodeMessage.test(t)?new H0({cause:n,nonce:e==null?void 0:e.nonce}):$0.nodeMessage.test(t)?new $0({cause:n}):V0.nodeMessage.test(t)?new V0({cause:n,gas:e==null?void 0:e.gas}):z0.nodeMessage.test(t)?new z0({cause:n,gas:e==null?void 0:e.gas}):j0.nodeMessage.test(t)?new j0({cause:n}):Uc.nodeMessage.test(t)?new Uc({cause:n,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Fc({cause:n})}function d5(n,{docsPath:e,...t}){const r=(()=>{const i=W0(n,t);return i instanceof Fc?n:i})();return new f5(r,{docsPath:e,...t})}function K0(n,{format:e}){if(!e)return{};const t={};function r(s){const a=Object.keys(s);for(const o of a)o in n&&(t[o]=n[o]),s[o]&&typeof s[o]=="object"&&!Array.isArray(s[o])&&r(s[o])}const i=e(n||{});return r(i),t}const p5={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Q0(n,e){const t={};return typeof n.authorizationList<"u"&&(t.authorizationList=h5(n.authorizationList)),typeof n.accessList<"u"&&(t.accessList=n.accessList),typeof n.blobVersionedHashes<"u"&&(t.blobVersionedHashes=n.blobVersionedHashes),typeof n.blobs<"u"&&(typeof n.blobs[0]!="string"?t.blobs=n.blobs.map(r=>dt(r)):t.blobs=n.blobs),typeof n.data<"u"&&(t.data=n.data),typeof n.from<"u"&&(t.from=n.from),typeof n.gas<"u"&&(t.gas=se(n.gas)),typeof n.gasPrice<"u"&&(t.gasPrice=se(n.gasPrice)),typeof n.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=se(n.maxFeePerBlobGas)),typeof n.maxFeePerGas<"u"&&(t.maxFeePerGas=se(n.maxFeePerGas)),typeof n.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=se(n.maxPriorityFeePerGas)),typeof n.nonce<"u"&&(t.nonce=se(n.nonce)),typeof n.to<"u"&&(t.to=n.to),typeof n.type<"u"&&(t.type=p5[n.type]),typeof n.value<"u"&&(t.value=se(n.value)),t}function h5(n){return n.map(e=>({address:e.address,r:e.r?se(BigInt(e.r)):e.r,s:e.s?se(BigInt(e.s)):e.s,chainId:se(e.chainId),nonce:se(e.nonce),...typeof e.yParity<"u"?{yParity:se(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:se(e.v)}:{}}))}function oh(n){if(!(!n||n.length===0))return n.reduce((e,{slot:t,value:r})=>{if(t.length!==66)throw new wp({size:t.length,targetSize:66,type:"hex"});if(r.length!==66)throw new wp({size:r.length,targetSize:66,type:"hex"});return e[t]=r,e},{})}function y5(n){const{balance:e,nonce:t,state:r,stateDiff:i,code:s}=n,a={};if(s!==void 0&&(a.code=s),e!==void 0&&(a.balance=se(e)),t!==void 0&&(a.nonce=se(t)),r!==void 0&&(a.state=oh(r)),i!==void 0){if(a.state)throw new j6;a.stateDiff=oh(i)}return a}function ch(n){if(!n)return;const e={};for(const{address:t,...r}of n){if(!En(t,{strict:!1}))throw new yi({address:t});if(e[t])throw new z6({address:t});e[t]=y5(r)}return e}const b5=2n**256n-1n;function Gc(n){const{account:e,gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:i,to:s}=n,a=e?Qn(e):void 0;if(a&&!En(a.address))throw new yi({address:a.address});if(s&&!En(s))throw new yi({address:s});if(typeof t<"u"&&(typeof r<"u"||typeof i<"u"))throw new K6;if(r&&r>b5)throw new Dc({maxFeePerGas:r});if(i&&r&&i>r)throw new Uc({maxFeePerGas:r,maxPriorityFeePerGas:i})}class m5 extends j{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class q0 extends j{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class x5 extends j{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${pt(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class g5 extends j{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const w5={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function A5(n,e){const t={...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,chainId:n.chainId?bs(n.chainId):void 0,gas:n.gas?BigInt(n.gas):void 0,gasPrice:n.gasPrice?BigInt(n.gasPrice):void 0,maxFeePerBlobGas:n.maxFeePerBlobGas?BigInt(n.maxFeePerBlobGas):void 0,maxFeePerGas:n.maxFeePerGas?BigInt(n.maxFeePerGas):void 0,maxPriorityFeePerGas:n.maxPriorityFeePerGas?BigInt(n.maxPriorityFeePerGas):void 0,nonce:n.nonce?bs(n.nonce):void 0,to:n.to?n.to:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,type:n.type?w5[n.type]:void 0,typeHex:n.type?n.type:void 0,value:n.value?BigInt(n.value):void 0,v:n.v?BigInt(n.v):void 0};return n.authorizationList&&(t.authorizationList=v5(n.authorizationList)),t.yParity=(()=>{if(n.yParity)return Number(n.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}function v5(n){return n.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function E5(n,e){const t=(n.transactions??[]).map(r=>typeof r=="string"?r:A5(r));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:t,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}async function Hc(n,{blockHash:e,blockNumber:t,blockTag:r=n.experimental_blockTag??"latest",includeTransactions:i}={}){var u,l,f;const s=i??!1,a=t!==void 0?se(t):void 0;let o=null;if(e?o=await n.request({method:"eth_getBlockByHash",params:[e,s]},{dedupe:!0}):o=await n.request({method:"eth_getBlockByNumber",params:[a||r,s]},{dedupe:!!a}),!o)throw new g5({blockHash:e,blockNumber:t});return(((f=(l=(u=n.chain)==null?void 0:u.formatters)==null?void 0:l.block)==null?void 0:f.format)||E5)(o,"getBlock")}async function uh(n){const e=await n.request({method:"eth_gasPrice"});return BigInt(e)}async function T5(n,e){var s,a;const{block:t,chain:r=n.chain,request:i}=e||{};try{const o=((s=r==null?void 0:r.fees)==null?void 0:s.maxPriorityFeePerGas)??((a=r==null?void 0:r.fees)==null?void 0:a.defaultPriorityFee);if(typeof o=="function"){const u=t||await be(n,Hc,"getBlock")({}),l=await o({block:u,client:n,request:i});if(l===null)throw new Error;return l}if(typeof o<"u")return o;const c=await n.request({method:"eth_maxPriorityFeePerGas"});return io(c)}catch{const[o,c]=await Promise.all([t?Promise.resolve(t):be(n,Hc,"getBlock")({}),be(n,uh,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new q0;const u=c-o.baseFeePerGas;return u<0n?0n:u}}async function lh(n,e){var d,p;const{block:t,chain:r=n.chain,request:i,type:s="eip1559"}=e||{},a=await(async()=>{var y,h;return typeof((y=r==null?void 0:r.fees)==null?void 0:y.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:t,client:n,request:i}):((h=r==null?void 0:r.fees)==null?void 0:h.baseFeeMultiplier)??1.2})();if(a<1)throw new m5;const c=10**(((d=a.toString().split(".")[1])==null?void 0:d.length)??0),u=y=>y*BigInt(Math.ceil(a*c))/BigInt(c),l=t||await be(n,Hc,"getBlock")({});if(typeof((p=r==null?void 0:r.fees)==null?void 0:p.estimateFeesPerGas)=="function"){const y=await r.fees.estimateFeesPerGas({block:t,client:n,multiply:u,request:i,type:s});if(y!==null)return y}if(s==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new q0;const y=typeof(i==null?void 0:i.maxPriorityFeePerGas)=="bigint"?i.maxPriorityFeePerGas:await T5(n,{block:l,chain:r,request:i}),h=u(l.baseFeePerGas);return{maxFeePerGas:(i==null?void 0:i.maxFeePerGas)??h+y,maxPriorityFeePerGas:y}}return{gasPrice:(i==null?void 0:i.gasPrice)??u(await be(n,uh,"getGasPrice")({}))}}async function P5(n,{address:e,blockTag:t="latest",blockNumber:r}){const i=await n.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?se(r):t]},{dedupe:!!r});return bs(i)}function fh(n){const{kzg:e}=n,t=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),r=typeof n.blobs[0]=="string"?n.blobs.map(s=>Kn(s)):n.blobs,i=[];for(const s of r)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return t==="bytes"?i:i.map(s=>dt(s))}function dh(n){const{kzg:e}=n,t=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),r=typeof n.blobs[0]=="string"?n.blobs.map(a=>Kn(a)):n.blobs,i=typeof n.commitments[0]=="string"?n.commitments.map(a=>Kn(a)):n.commitments,s=[];for(let a=0;a<r.length;a++){const o=r[a],c=i[a];s.push(Uint8Array.from(e.computeBlobKzgProof(o,c)))}return t==="bytes"?s:s.map(a=>dt(a))}function S5(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(t>>i&s),o=Number(t&s),c=r?4:0,u=r?0:4;n.setUint32(e+c,a,r),n.setUint32(e+u,o,r)}function I5(n,e,t){return n&e^~n&t}function O5(n,e,t){return n&e^n&t^e&t}class C5 extends S0{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=P0(this.buffer)}update(e){xs(this),e=Nc(e),pi(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=P0(e);for(;i<=s-a;a+=i)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xs(this),Ip(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,gs(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(r,0),a=0);for(let f=a;f<i;f++)t[f]=0;S5(r,i-8,BigInt(this.length*8),s),this.process(r,0);const o=P0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)o.setUint32(4*f,l[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=s,e.length=i,e.pos=o,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Rr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),N5=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Br=new Uint32Array(64);let R5=class extends C5{constructor(e=32){super(64,e,8,!1),this.A=Rr[0]|0,this.B=Rr[1]|0,this.C=Rr[2]|0,this.D=Rr[3]|0,this.E=Rr[4]|0,this.F=Rr[5]|0,this.G=Rr[6]|0,this.H=Rr[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:a,G:o,H:c}=this;return[e,t,r,i,s,a,o,c]}set(e,t,r,i,s,a,o,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)Br[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=Br[f-15],p=Br[f-2],y=vn(d,7)^vn(d,18)^d>>>3,h=vn(p,17)^vn(p,19)^p>>>10;Br[f]=h+Br[f-7]+y+Br[f-16]|0}let{A:r,B:i,C:s,D:a,E:o,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=vn(o,6)^vn(o,11)^vn(o,25),p=l+d+I5(o,c,u)+N5[f]+Br[f]|0,h=(vn(r,2)^vn(r,13)^vn(r,22))+O5(r,i,s)|0;l=u,u=c,c=o,o=a+p|0,a=s,s=i,i=r,r=p+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,s,a,o,c,u,l)}roundClean(){gs(Br)}destroy(){this.set(0,0,0,0,0,0,0,0),gs(this.buffer)}};const ph=Cp(()=>new R5),B5=ph;function _5(n,e){return B5(jn(n,{strict:!1})?so(n):n)}function k5(n){const{commitment:e,version:t=1}=n,r=n.to??(typeof e=="string"?"hex":"bytes"),i=_5(e);return i.set([t],0),r==="bytes"?i:dt(i)}function L5(n){const{commitments:e,version:t}=n,r=n.to,i=[];for(const s of e)i.push(k5({commitment:s,to:r,version:t}));return i}const hh=6,yh=32,J0=4096,bh=yh*J0,mh=bh*hh-1-1*J0*hh;class M5 extends j{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class D5 extends j{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function U5(n){const e=typeof n.data=="string"?Kn(n.data):n.data,t=Le(e);if(!t)throw new D5;if(t>mh)throw new M5({maxSize:mh,size:t});const r=[];let i=!0,s=0;for(;i;){const a=L0(new Uint8Array(bh));let o=0;for(;o<J0;){const c=e.slice(s,s+(yh-1));if(a.pushByte(0),a.pushBytes(c),c.length<31){a.pushByte(128),i=!1;break}o++,s+=31}r.push(a)}return r.map(a=>dt(a.bytes))}function F5(n){const{data:e,kzg:t,to:r}=n,i=n.blobs??U5({data:e}),s=n.commitments??fh({blobs:i,kzg:t,to:r}),a=n.proofs??dh({blobs:i,commitments:s,kzg:t,to:r}),o=[];for(let c=0;c<i.length;c++)o.push({blob:i[c],commitment:s[c],proof:a[c]});return o}function G5(n){if(n.type)return n.type;if(typeof n.authorizationList<"u")return"eip7702";if(typeof n.blobs<"u"||typeof n.blobVersionedHashes<"u"||typeof n.maxFeePerBlobGas<"u"||typeof n.sidecars<"u")return"eip4844";if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")return"eip1559";if(typeof n.gasPrice<"u")return typeof n.accessList<"u"?"eip2930":"legacy";throw new Q6({transaction:n})}async function xh(n){const e=await n.request({method:"eth_chainId"},{dedupe:!0});return bs(e)}const gh=["blobVersionedHashes","chainId","fees","gas","nonce","type"],wh=new Map;async function Ah(n,e){const{account:t=n.account,blobs:r,chain:i,gas:s,kzg:a,nonce:o,nonceManager:c,parameters:u=gh,type:l}=e,f=t&&Qn(t),d={...e,...f?{from:f==null?void 0:f.address}:{}};let p;async function y(){return p||(p=await be(n,Hc,"getBlock")({blockTag:"latest"}),p)}let h;async function m(){return h||(i?i.id:typeof e.chainId<"u"?e.chainId:(h=await be(n,xh,"getChainId")({}),h))}if(u.includes("nonce")&&typeof o>"u"&&f)if(c){const x=await m();d.nonce=await c.consume({address:f.address,chainId:x,client:n})}else d.nonce=await be(n,P5,"getTransactionCount")({address:f.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&a){const x=fh({blobs:r,kzg:a});if(u.includes("blobVersionedHashes")){const w=L5({commitments:x,to:"hex"});d.blobVersionedHashes=w}if(u.includes("sidecars")){const w=dh({blobs:r,commitments:x,kzg:a}),g=F5({blobs:r,commitments:x,proofs:w,to:"hex"});d.sidecars=g}}if(u.includes("chainId")&&(d.chainId=await m()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{d.type=G5(d)}catch{let x=wh.get(n.uid);if(typeof x>"u"){const w=await y();x=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",wh.set(n.uid,x)}d.type=x?"eip1559":"legacy"}if(u.includes("fees"))if(d.type!=="legacy"&&d.type!=="eip2930"){if(typeof d.maxFeePerGas>"u"||typeof d.maxPriorityFeePerGas>"u"){const x=await y(),{maxFeePerGas:w,maxPriorityFeePerGas:g}=await lh(n,{block:x,chain:i,request:d});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<g)throw new x5({maxPriorityFeePerGas:g});d.maxPriorityFeePerGas=g,d.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new q0;if(typeof e.gasPrice>"u"){const x=await y(),{gasPrice:w}=await lh(n,{block:x,chain:i,request:d,type:"legacy"});d.gasPrice=w}}return u.includes("gas")&&typeof s>"u"&&(d.gas=await be(n,vh,"estimateGas")({...d,account:f&&{address:f.address,type:"json-rpc"}})),Gc(d),delete d.parameters,d}async function vh(n,e){var i,s,a;const{account:t=n.account}=e,r=t?Qn(t):void 0;try{const{accessList:o,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:f,blockTag:d,data:p,gas:y,gasPrice:h,maxFeePerBlobGas:m,maxFeePerGas:x,maxPriorityFeePerGas:w,nonce:g,value:v,stateOverride:S,...O}=await Ah(n,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),C=(typeof f=="bigint"?se(f):void 0)||d,_=ch(S),U=await(async()=>{if(O.to)return O.to;if(c&&c.length>0)return await ah({authorization:c[0]}).catch(()=>{throw new j("`to` is required. Could not infer from `authorizationList`")})})();Gc(e);const D=(a=(s=(i=n.chain)==null?void 0:i.formatters)==null?void 0:s.transactionRequest)==null?void 0:a.format,H=(D||Q0)({...K0(O,{format:D}),from:r==null?void 0:r.address,accessList:o,authorizationList:c,blobs:u,blobVersionedHashes:l,data:p,gas:y,gasPrice:h,maxFeePerBlobGas:m,maxFeePerGas:x,maxPriorityFeePerGas:w,nonce:g,to:U,value:v},"estimateGas");return BigInt(await n.request({method:"eth_estimateGas",params:_?[H,C??n.experimental_blockTag??"latest",_]:C?[H,C]:[H]}))}catch(o){throw d5(o,{...e,account:r,chain:n.chain})}}async function H5(n,e){const{abi:t,address:r,args:i,functionName:s,dataSuffix:a,...o}=e,c=Nr({abi:t,args:i,functionName:s});try{return await be(n,vh,"estimateGas")({data:`${c}${a?a.replace("0x",""):""}`,to:r,...o})}catch(u){const l=o.account?Qn(o.account):void 0;throw Mc(u,{abi:t,address:r,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:l==null?void 0:l.address})}}function Eh(n,e){if(!En(n,{strict:!1}))throw new yi({address:n});if(!En(e,{strict:!1}))throw new yi({address:e});return n.toLowerCase()===e.toLowerCase()}const Th="/docs/contract/decodeEventLog";function Ph(n){const{abi:e,data:t,strict:r,topics:i}=n,s=r??!0,[a,...o]=i;if(!a)throw new E2({docsPath:Th});const c=e.find(h=>h.type==="event"&&a===Rc(rn(h)));if(!(c&&"name"in c)||c.type!=="event")throw new hp(a,{docsPath:Th});const{name:u,inputs:l}=c,f=l==null?void 0:l.some(h=>!("name"in h&&h.name)),d=f?[]:{},p=l.map((h,m)=>[h,m]).filter(([h])=>"indexed"in h&&h.indexed);for(let h=0;h<p.length;h++){const[m,x]=p[h],w=o[h];if(!w)throw new E0({abiItem:c,param:m});d[f?x:m.name||x]=$5({param:m,value:w})}const y=l.filter(h=>!("indexed"in h&&h.indexed));if(y.length>0){if(t&&t!=="0x")try{const h=lo(y,t);if(h)if(f)for(let m=0;m<l.length;m++)d[m]=d[m]??h.shift();else for(let m=0;m<y.length;m++)d[y[m].name]=h[m]}catch(h){if(s)throw h instanceof fp||h instanceof Kp?new Oc({abiItem:c,data:t,params:y,size:Le(t)}):h}else if(s)throw new Oc({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(d).length>0?d:void 0}}function $5({param:n,value:e}){return n.type==="string"||n.type==="bytes"||n.type==="tuple"||n.type.match(/^(.*)\[(\d+)?\]$/)?e:(lo([n],e)||[])[0]}function Jn(n){const{abi:e,args:t,logs:r,strict:i=!0}=n,s=(()=>{if(n.eventName)return Array.isArray(n.eventName)?n.eventName:[n.eventName]})();return r.map(a=>{var o;try{const c=e.find(l=>l.type==="event"&&a.topics[0]===Rc(l));if(!c)return null;const u=Ph({...a,abi:[c],strict:i});return s&&!s.includes(u.eventName)||!V5({args:u.args,inputs:c.inputs,matchArgs:t})?null:{...u,...a}}catch(c){let u,l;if(c instanceof hp)return null;if(c instanceof Oc||c instanceof E0){if(i)return null;u=c.abiItem.name,l=(o=c.abiItem.inputs)==null?void 0:o.some(f=>!("name"in f&&f.name))}return{...a,args:l?[]:{},eventName:u}}}).filter(Boolean)}function V5(n){const{args:e,inputs:t,matchArgs:r}=n;if(!r)return!0;if(!e)return!1;function i(s,a,o){try{return s.type==="address"?Eh(a,o):s.type==="string"||s.type==="bytes"?hi(so(a))===o:a===o}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((s,a)=>{if(s==null)return!0;const o=t[a];return o?(Array.isArray(s)?s:[s]).some(u=>i(o,u,e[a])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,a])=>{if(a==null)return!0;const o=t.find(u=>u.name===s);return o?(Array.isArray(a)?a:[a]).some(u=>i(o,u,e[s])):!1}):!1}function $c(n,{args:e,eventName:t}={}){return{...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,logIndex:n.logIndex?Number(n.logIndex):null,transactionHash:n.transactionHash?n.transactionHash:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function z5(n,{address:e,blockHash:t,fromBlock:r,toBlock:i,event:s,events:a,args:o,strict:c}={}){const u=c??!1,l=a??(s?[s]:void 0);let f=[];l&&(f=[l.flatMap(h=>k0({abi:[h],eventName:h.name,args:a?void 0:o}))],s&&(f=f[0]));let d;t?d=await n.request({method:"eth_getLogs",params:[{address:e,topics:f,blockHash:t}]}):d=await n.request({method:"eth_getLogs",params:[{address:e,topics:f,fromBlock:typeof r=="bigint"?se(r):r,toBlock:typeof i=="bigint"?se(i):i}]});const p=d.map(y=>$c(y));return l?Jn({abi:l,args:o,logs:p,strict:u}):p}async function Sh(n,e){const{abi:t,address:r,args:i,blockHash:s,eventName:a,fromBlock:o,toBlock:c,strict:u}=e,l=a?mi({abi:t,name:a}):void 0,f=l?void 0:t.filter(d=>d.type==="event");return be(n,z5,"getLogs")({address:r,args:i,blockHash:s,event:l,events:f,fromBlock:o,toBlock:c,strict:u})}const Y0="/docs/contract/decodeFunctionResult";function Z0(n){const{abi:e,args:t,functionName:r,data:i}=n;let s=e[0];if(r){const o=mi({abi:e,args:t,name:r});if(!o)throw new hs(r,{docsPath:Y0});s=o}if(s.type!=="function")throw new hs(void 0,{docsPath:Y0});if(!s.outputs)throw new bp(s.name,{docsPath:Y0});const a=lo(s.outputs,i);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const j5="0.1.1";function W5(){return j5}class ho extends Error{constructor(e,t={}){const r=(()=>{var c;if(t.cause instanceof ho){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&typeof t.cause.details=="string"?t.cause.details:(c=t.cause)!=null&&c.message?t.cause.message:t.details})(),i=t.cause instanceof ho&&t.cause.docsPath||t.docsPath,a=`https://oxlib.sh${i??""}`,o=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${a}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${W5()}`}),this.cause=t.cause,this.details=r,this.docs=a,this.docsPath=i,this.shortMessage=e}walk(e){return Ih(this,e)}}function Ih(n,e){return e!=null&&e(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?Ih(n.cause,e):e?null:n}function K5(n,e={}){const{dir:t,size:r=32}=e;if(r===0)return n;const i=n.replace("0x","");if(i.length>r*2)throw new J5({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[t==="right"?"padEnd":"padStart"](r*2,"0")}`}function Yn(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<a){const u=typeof n=="bigint"?"n":"";throw new q5({max:s?`${s}${u}`:void 0,min:`${a}${u}`,signed:t,size:r,value:`${n}${u}`})}const c=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Q5(c,r):c}function Q5(n,e){return K5(n,{dir:"left",size:e})}class q5 extends ho{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class J5 extends ho{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Y5(n){return{address:n.address,amount:Yn(n.amount),index:Yn(n.index),validatorIndex:Yn(n.validatorIndex)}}function Z5(n){return{...typeof n.baseFeePerGas=="bigint"&&{baseFeePerGas:Yn(n.baseFeePerGas)},...typeof n.blobBaseFee=="bigint"&&{blobBaseFee:Yn(n.blobBaseFee)},...typeof n.feeRecipient=="string"&&{feeRecipient:n.feeRecipient},...typeof n.gasLimit=="bigint"&&{gasLimit:Yn(n.gasLimit)},...typeof n.number=="bigint"&&{number:Yn(n.number)},...typeof n.prevRandao=="bigint"&&{prevRandao:Yn(n.prevRandao)},...typeof n.time=="bigint"&&{time:Yn(n.time)},...n.withdrawals&&{withdrawals:n.withdrawals.map(Y5)}}}const Oh=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],X0=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Vc=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],X5="0x82ad56cb",ew="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",tw="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",nw="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class el extends j{constructor({blockNumber:e,chain:t,contract:r}){super(`Chain "${t.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class rw extends j{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class iw extends j{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Ch extends j{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const tl="/docs/contract/encodeDeployData";function Nh(n){const{abi:e,args:t,bytecode:r}=n;if(!t||t.length===0)return r;const i=e.find(a=>"type"in a&&a.type==="constructor");if(!i)throw new x2({docsPath:tl});if(!("inputs"in i))throw new lp({docsPath:tl});if(!i.inputs||i.inputs.length===0)throw new lp({docsPath:tl});const s=As(i.inputs,t);return co([r,s])}function sw({blockNumber:n,chain:e,contract:t}){var i;const r=(i=e==null?void 0:e.contracts)==null?void 0:i[t];if(!r)throw new el({chain:e,contract:{name:t}});if(n&&r.blockCreated&&r.blockCreated>n)throw new el({blockNumber:n,chain:e,contract:{name:t,blockCreated:r.blockCreated}});return r.address}function aw(n,{docsPath:e,...t}){const r=(()=>{const i=W0(n,t);return i instanceof Fc?n:i})();return new Y6(r,{docsPath:e,...t})}function ow(){let n=()=>{},e=()=>{};return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}const nl=new Map;function cw({fn:n,id:e,shouldSplitBatch:t,wait:r=0,sort:i}){const s=async()=>{const l=c();a();const f=l.map(({args:d})=>d);f.length!==0&&n(f).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let p=0;p<l.length;p++){const{resolve:y}=l[p];y==null||y([d[p],d])}}).catch(d=>{for(let p=0;p<l.length;p++){const{reject:y}=l[p];y==null||y(d)}})},a=()=>nl.delete(e),o=()=>c().map(({args:l})=>l),c=()=>nl.get(e)||[],u=l=>nl.set(e,[...c(),l]);return{flush:a,async schedule(l){const{promise:f,resolve:d,reject:p}=ow();return(t==null?void 0:t([...o(),l]))&&s(),c().length>0?(u({args:l,resolve:d,reject:p}),f):(u({args:l,resolve:d,reject:p}),setTimeout(s,r),f)}}}async function rl(n,e){var H,G,P,T;const{account:t=n.account,authorizationList:r,batch:i=!!((H=n.batch)!=null&&H.multicall),blockNumber:s,blockTag:a=n.experimental_blockTag??"latest",accessList:o,blobs:c,blockOverrides:u,code:l,data:f,factory:d,factoryData:p,gas:y,gasPrice:h,maxFeePerBlobGas:m,maxFeePerGas:x,maxPriorityFeePerGas:w,nonce:g,to:v,value:S,stateOverride:O,...R}=e,C=t?Qn(t):void 0;if(l&&(d||p))throw new j("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&v)throw new j("Cannot provide both `code` & `to` as parameters.");const _=l&&f,U=d&&p&&v&&f,D=_||U,$=_?Rh({code:l,data:f}):U?fw({data:f,factory:d,factoryData:p,to:v}):f;try{Gc(e);const k=(typeof s=="bigint"?se(s):void 0)||a,L=u?Z5(u):void 0,M=ch(O),W=(T=(P=(G=n.chain)==null?void 0:G.formatters)==null?void 0:P.transactionRequest)==null?void 0:T.format,le=(W||Q0)({...K0(R,{format:W}),from:C==null?void 0:C.address,accessList:o,authorizationList:r,blobs:c,data:$,gas:y,gasPrice:h,maxFeePerBlobGas:m,maxFeePerGas:x,maxPriorityFeePerGas:w,nonce:g,to:D?void 0:v,value:S},"call");if(i&&uw({request:le})&&!M&&!L)try{return await lw(n,{...le,blockNumber:s,blockTag:a})}catch(X){if(!(X instanceof Ch)&&!(X instanceof el))throw X}const ie=(()=>{const X=[le,k];return M&&L?[...X,M,L]:M?[...X,M]:L?[...X,{},L]:X})(),J=await n.request({method:"eth_call",params:ie});return J==="0x"?{data:void 0}:{data:J}}catch(N){const k=dw(N),{offchainLookup:L,offchainLookupSignature:M}=await Promise.resolve().then(()=>Uw);if(n.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===M&&v)return{data:await L(n,{data:k,to:v})};throw D&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new t5({factory:d}):aw(N,{...e,account:C,chain:n.chain})}}function uw({request:n}){const{data:e,to:t,...r}=n;return!(!e||e.startsWith(X5)||!t||Object.values(r).filter(i=>typeof i<"u").length>0)}async function lw(n,e){var h;const{batchSize:t=1024,deployless:r=!1,wait:i=0}=typeof((h=n.batch)==null?void 0:h.multicall)=="object"?n.batch.multicall:{},{blockNumber:s,blockTag:a=n.experimental_blockTag??"latest",data:o,to:c}=e,u=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(n.chain)return sw({blockNumber:s,chain:n.chain,contract:"multicall3"});throw new Ch})(),f=(typeof s=="bigint"?se(s):void 0)||a,{schedule:d}=cw({id:`${n.uid}.${f}`,wait:i,shouldSplitBatch(m){return m.reduce((w,{data:g})=>w+(g.length-2),0)>t*2},fn:async m=>{const x=m.map(v=>({allowFailure:!0,callData:v.data,target:v.to})),w=Nr({abi:Oh,args:[x],functionName:"aggregate3"}),g=await n.request({method:"eth_call",params:[{...u===null?{data:Rh({code:nw,data:w})}:{to:u,data:w}},f]});return Z0({abi:Oh,args:[x],functionName:"aggregate3",data:g||"0x"})}}),[{returnData:p,success:y}]=await d({data:o,to:c});if(!y)throw new Xp({data:p});return p==="0x"?{data:void 0}:{data:p}}function Rh(n){const{code:e,data:t}=n;return Nh({abi:op(["constructor(bytes, bytes)"]),bytecode:ew,args:[e,t]})}function fw(n){const{data:e,factory:t,factoryData:r,to:i}=n;return Nh({abi:op(["constructor(address, bytes, address, bytes)"]),bytecode:tw,args:[i,e,t,r]})}function dw(n){var t;if(!(n instanceof j))return;const e=n.walk();return typeof(e==null?void 0:e.data)=="object"?(t=e.data)==null?void 0:t.data:e.data}async function pw(n,e){const{abi:t,address:r,args:i,functionName:s,...a}=e,o=Nr({abi:t,args:i,functionName:s});try{const{data:c}=await be(n,rl,"call")({...a,data:o,to:r});return Z0({abi:t,args:i,functionName:s,data:c||"0x"})}catch(c){throw Mc(c,{abi:t,address:r,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}async function hw(n,e){const{abi:t,address:r,args:i,dataSuffix:s,functionName:a,...o}=e,c=o.account?Qn(o.account):n.account,u=Nr({abi:t,args:i,functionName:a});try{const{data:l}=await be(n,rl,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:r,...o,account:c}),f=Z0({abi:t,args:i,functionName:a,data:l||"0x"}),d=t.filter(p=>"name"in p&&p.name===e.functionName);return{result:f,request:{abi:d,address:r,args:i,dataSuffix:s,functionName:a,...o,account:c}}}catch(l){throw Mc(l,{abi:t,address:r,args:i,docsPath:"/docs/contract/simulateContract",functionName:a,sender:c==null?void 0:c.address})}}const il=new Map,Bh=new Map;let yw=0;function _h(n,e,t){const r=++yw,i=()=>il.get(n)||[],s=()=>{const l=i();il.set(n,l.filter(f=>f.id!==r))},a=()=>{const l=i();if(!l.some(d=>d.id===r))return;const f=Bh.get(n);if(l.length===1&&f){const d=f();d instanceof Promise&&d.catch(()=>{})}s()},o=i();if(il.set(n,[...o,{id:r,fns:e}]),o&&o.length>0)return a;const c={};for(const l in e)c[l]=(...f)=>{var p,y;const d=i();if(d.length!==0)for(const h of d)(y=(p=h.fns)[l])==null||y.call(p,...f)};const u=t(c);return typeof u=="function"&&Bh.set(n,u),a}async function kh(n){return new Promise(e=>setTimeout(e,n))}function bw(n,{emitOnBegin:e,initialWaitTime:t,interval:r}){let i=!0;const s=()=>i=!1;return(async()=>{let o;o=await n({unpoll:s});const c=await(t==null?void 0:t(o))??r;await kh(c);const u=async()=>{i&&(await n({unpoll:s}),await kh(r),u())};u()})(),s}const mw=new Map,xw=new Map;function gw(n){const e=(i,s)=>({clear:()=>s.delete(i),get:()=>s.get(i),set:a=>s.set(i,a)}),t=e(n,mw),r=e(n,xw);return{clear:()=>{t.clear(),r.clear()},promise:t,response:r}}async function ww(n,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){const r=gw(e),i=r.response.get();if(i&&t>0&&Date.now()-i.created.getTime()<t)return i.data;let s=r.promise.get();s||(s=n(),r.promise.set(s));try{const a=await s;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const Aw=n=>`blockNumber.${n}`;async function vw(n,{cacheTime:e=n.cacheTime}={}){const t=await ww(()=>n.request({method:"eth_blockNumber"}),{cacheKey:Aw(n.uid),cacheTime:e});return BigInt(t)}async function Ew(n,{filter:e}){const t="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const i=r.map(s=>$c(s));return!("abi"in e)||!e.abi?i:Jn({abi:e.abi,logs:i,strict:t})}async function Tw(n,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Pw(n,e){const{abi:t,address:r,args:i,batch:s=!0,eventName:a,fromBlock:o,onError:c,onLogs:u,poll:l,pollingInterval:f=n.pollingInterval,strict:d}=e;return(typeof l<"u"?l:typeof o=="bigint"?!0:!(n.transport.type==="webSocket"||n.transport.type==="ipc"||n.transport.type==="fallback"&&(n.transport.transports[0].config.type==="webSocket"||n.transport.transports[0].config.type==="ipc")))?(()=>{const m=d??!1,x=xi(["watchContractEvent",r,i,s,n.uid,a,f,m,o]);return _h(x,{onLogs:u,onError:c},w=>{let g;o!==void 0&&(g=o-1n);let v,S=!1;const O=bw(async()=>{var R;if(!S){try{v=await be(n,Vp,"createContractEventFilter")({abi:t,address:r,args:i,eventName:a,strict:m,fromBlock:o})}catch{}S=!0;return}try{let C;if(v)C=await be(n,Ew,"getFilterChanges")({filter:v});else{const _=await be(n,vw,"getBlockNumber")({});g&&g<_?C=await be(n,Sh,"getContractEvents")({abi:t,address:r,args:i,eventName:a,fromBlock:g+1n,toBlock:_,strict:m}):C=[],g=_}if(C.length===0)return;if(s)w.onLogs(C);else for(const _ of C)w.onLogs([_])}catch(C){v&&C instanceof Lc&&(S=!1),(R=w.onError)==null||R.call(w,C)}},{emitOnBegin:!0,interval:f});return async()=>{v&&await be(n,Tw,"uninstallFilter")({filter:v}),O()}})})():(()=>{const m=d??!1,x=xi(["watchContractEvent",r,i,s,n.uid,a,f,m]);let w=!0,g=()=>w=!1;return _h(x,{onLogs:u,onError:c},v=>((async()=>{try{const S=(()=>{if(n.transport.type==="fallback"){const C=n.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return C?C.value:n.transport}return n.transport})(),O=a?k0({abi:t,eventName:a,args:i}):[],{unsubscribe:R}=await S.subscribe({params:["logs",{address:r,topics:O}],onData(C){var U;if(!w)return;const _=C.result;try{const{eventName:D,args:$}=Ph({abi:t,data:_.data,topics:_.topics,strict:d}),H=$c(_,{args:$,eventName:D});v.onLogs([H])}catch(D){let $,H;if(D instanceof Oc||D instanceof E0){if(d)return;$=D.abiItem.name,H=(U=D.abiItem.inputs)==null?void 0:U.some(P=>!("name"in P&&P.name))}const G=$c(_,{args:H?[]:{},eventName:$});v.onLogs([G])}},onError(C){var _;(_=v.onError)==null||_.call(v,C)}});g=R,w||g()}catch(S){c==null||c(S)}})(),()=>g()))})()}class Lh extends j{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class sl extends j{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}function Sw({chain:n,currentChainId:e}){if(!n)throw new iw;if(e!==n.id)throw new rw({chain:n,currentChainId:e})}function Iw(n,{docsPath:e,...t}){const r=(()=>{const i=W0(n,t);return i instanceof Fc?n:i})();return new q6(r,{docsPath:e,...t})}async function Ow(n,{serializedTransaction:e}){return n.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const al=new I0(128);async function Cw(n,e){var w,g,v,S;const{account:t=n.account,chain:r=n.chain,accessList:i,authorizationList:s,blobs:a,data:o,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,type:y,value:h,...m}=e;if(typeof t>"u")throw new Lh({docsPath:"/docs/actions/wallet/sendTransaction"});const x=t?Qn(t):null;try{Gc(e);const O=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await ah({authorization:s[0]}).catch(()=>{throw new j("`to` is required. Could not infer from `authorizationList`.")})})();if((x==null?void 0:x.type)==="json-rpc"||x===null){let R;r!==null&&(R=await be(n,xh,"getChainId")({}),Sw({currentChainId:R,chain:r}));const C=(v=(g=(w=n.chain)==null?void 0:w.formatters)==null?void 0:g.transactionRequest)==null?void 0:v.format,U=(C||Q0)({...K0(m,{format:C}),accessList:i,authorizationList:s,blobs:a,chainId:R,data:o,from:x==null?void 0:x.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,to:O,type:y,value:h},"sendTransaction"),D=al.get(n.uid),$=D?"wallet_sendTransaction":"eth_sendTransaction";try{return await n.request({method:$,params:[U]},{retryCount:0})}catch(H){if(D===!1)throw H;const G=H;if(G.name==="InvalidInputRpcError"||G.name==="InvalidParamsRpcError"||G.name==="MethodNotFoundRpcError"||G.name==="MethodNotSupportedRpcError")return await n.request({method:"wallet_sendTransaction",params:[U]},{retryCount:0}).then(P=>(al.set(n.uid,!0),P)).catch(P=>{const T=P;throw T.name==="MethodNotFoundRpcError"||T.name==="MethodNotSupportedRpcError"?(al.set(n.uid,!1),G):T});throw G}}if((x==null?void 0:x.type)==="local"){const R=await be(n,Ah,"prepareTransactionRequest")({account:x,accessList:i,authorizationList:s,blobs:a,chain:r,data:o,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,nonceManager:x.nonceManager,parameters:[...gh,"sidecars"],type:y,value:h,...m,to:O}),C=(S=r==null?void 0:r.serializers)==null?void 0:S.transaction,_=await x.signTransaction(R,{serializer:C});return await be(n,Ow,"sendRawTransaction")({serializedTransaction:_})}throw(x==null?void 0:x.type)==="smart"?new sl({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new sl({docsPath:"/docs/actions/wallet/sendTransaction",type:x==null?void 0:x.type})}catch(O){throw O instanceof sl?O:Iw(O,{...e,account:x,chain:e.chain||void 0})}}async function zc(n,e){return zc.internal(n,Cw,"sendTransaction",e)}(function(n){async function e(t,r,i,s){const{abi:a,account:o=t.account,address:c,args:u,dataSuffix:l,functionName:f,...d}=s;if(typeof o>"u")throw new Lh({docsPath:"/docs/contract/writeContract"});const p=o?Qn(o):null,y=Nr({abi:a,args:u,functionName:f});try{return await be(t,r,i)({data:`${y}${l?l.replace("0x",""):""}`,to:c,account:p,...d})}catch(h){throw Mc(h,{abi:a,address:c,args:u,docsPath:"/docs/contract/writeContract",functionName:f,sender:p==null?void 0:p.address})}}n.internal=e})(zc||(zc={}));function kt({abi:n,address:e,client:t}){const r=t,[i,s]=r?"public"in r&&"wallet"in r?[r.public,r.wallet]:"public"in r?[r.public,void 0]:"wallet"in r?[void 0,r.wallet]:[r,r]:[void 0,void 0],a=i!=null,o=s!=null,c={};let u=!1,l=!1,f=!1;for(const d of n)if(d.type==="function"?d.stateMutability==="view"||d.stateMutability==="pure"?u=!0:l=!0:d.type==="event"&&(f=!0),u&&l&&f)break;return a&&(u&&(c.read=new Proxy({},{get(d,p){return(...y)=>{const{args:h,options:m}=jc(y);return be(i,pw,"readContract")({abi:n,address:e,functionName:p,args:h,...m})}}})),l&&(c.simulate=new Proxy({},{get(d,p){return(...y)=>{const{args:h,options:m}=jc(y);return be(i,hw,"simulateContract")({abi:n,address:e,functionName:p,args:h,...m})}}})),f&&(c.createEventFilter=new Proxy({},{get(d,p){return(...y)=>{const h=n.find(w=>w.type==="event"&&w.name===p),{args:m,options:x}=ol(y,h);return be(i,Vp,"createContractEventFilter")({abi:n,address:e,eventName:p,args:m,...x})}}}),c.getEvents=new Proxy({},{get(d,p){return(...y)=>{const h=n.find(w=>w.type==="event"&&w.name===p),{args:m,options:x}=ol(y,h);return be(i,Sh,"getContractEvents")({abi:n,address:e,eventName:p,args:m,...x})}}}),c.watchEvent=new Proxy({},{get(d,p){return(...y)=>{const h=n.find(w=>w.type==="event"&&w.name===p),{args:m,options:x}=ol(y,h);return be(i,Pw,"watchContractEvent")({abi:n,address:e,eventName:p,args:m,...x})}}}))),o&&l&&(c.write=new Proxy({},{get(d,p){return(...y)=>{const{args:h,options:m}=jc(y);return be(s,zc,"writeContract")({abi:n,address:e,functionName:p,args:h,...m})}}})),(a||o)&&l&&(c.estimateGas=new Proxy({},{get(d,p){return(...y)=>{const{args:h,options:m}=jc(y);return be(i??s,H5,"estimateContractGas")({abi:n,address:e,functionName:p,args:h,...m,account:m.account??s.account})}}})),c.address=e,c.abi=n,c}function jc(n){const e=n.length&&Array.isArray(n[0]),t=e?n[0]:[],r=(e?n[1]:n[0])??{};return{args:t,options:r}}function ol(n,e){let t=!1;Array.isArray(n[0])?t=!0:n.length===1?t=e.inputs.some(s=>s.indexed):n.length===2&&(t=!0);const r=t?n[0]:void 0,i=(t?n[1]:n[0])??{};return{args:r,options:i}}function Nw(n){const{abi:e,data:t}=n,r=ws(t,0,4),i=e.find(s=>s.type==="function"&&r===uo(rn(s)));if(!i)throw new T2(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:i.name,args:"inputs"in i&&i.inputs&&i.inputs.length>0?lo(i.inputs,ws(t,4)):void 0}}const cl="/docs/contract/encodeErrorResult";function Mh(n){const{abi:e,errorName:t,args:r}=n;let i=e[0];if(t){const c=mi({abi:e,args:r,name:t});if(!c)throw new dp(t,{docsPath:cl});i=c}if(i.type!=="error")throw new dp(void 0,{docsPath:cl});const s=rn(i),a=uo(s);let o="0x";if(r&&r.length>0){if(!i.inputs)throw new v2(i.name,{docsPath:cl});o=As(i.inputs,r)}return co([a,o])}const ul="/docs/contract/encodeFunctionResult";function Rw(n){const{abi:e,functionName:t,result:r}=n;let i=e[0];if(t){const a=mi({abi:e,name:t});if(!a)throw new hs(t,{docsPath:ul});i=a}if(i.type!=="function")throw new hs(void 0,{docsPath:ul});if(!i.outputs)throw new bp(i.name,{docsPath:ul});const s=(()=>{if(i.outputs.length===0)return[];if(i.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new mp(r)})();return As(i.outputs,s)}const Dh="x-batch-gateway:true";async function Uh(n){const{data:e,ccipRequest:t}=n,{args:[r]}=Nw({abi:X0,data:e}),i=[],s=[];return await Promise.all(r.map(async(a,o)=>{try{s[o]=a.urls.includes(Dh)?await Uh({data:a.data,ccipRequest:t}):await t(a),i[o]=!1}catch(c){i[o]=!0,s[o]=Bw(c)}})),Rw({abi:X0,functionName:"query",result:[i,s]})}function Bw(n){return n.name==="HttpRequestError"&&n.status?Mh({abi:X0,errorName:"HttpError",args:[n.status,n.shortMessage]}):Mh({abi:[jp],errorName:"Error",args:["shortMessage"in n?n.shortMessage:n.message]})}class _w extends j{constructor({callbackSelector:e,cause:t,data:r,extraData:i,sender:s,urls:a}){var o;super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],(o=t.metaMessages)!=null&&o.length?"":[],"Offchain Gateway Call:",a&&["  Gateway URL(s):",...a.map(c=>`    ${_c(c)}`)],`  Sender: ${s}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${i}`].flat(),name:"OffchainLookupError"})}}class kw extends j{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${_c(t)}`,`Response: ${xi(e)}`],name:"OffchainLookupResponseMalformedError"})}}class Lw extends j{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}const Mw="0x556f1830",Fh={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function Dw(n,{blockNumber:e,blockTag:t,data:r,to:i}){const{args:s}=qp({data:r,abi:[Fh]}),[a,o,c,u,l]=s,{ccipRead:f}=n,d=f&&typeof(f==null?void 0:f.request)=="function"?f.request:Gh;try{if(!Eh(i,a))throw new Lw({sender:a,to:i});const p=o.includes(Dh)?await Uh({data:c,ccipRequest:d}):await d({data:c,sender:a,urls:o}),{data:y}=await rl(n,{blockNumber:e,blockTag:t,data:bi([u,As([{type:"bytes"},{type:"bytes"}],[p,l])]),to:i});return y}catch(p){throw new _w({callbackSelector:u,cause:p,data:r,extraData:l,sender:a,urls:o})}}async function Gh({data:n,sender:e,urls:t}){var i;let r=new Error("An unknown error occurred.");for(let s=0;s<t.length;s++){const a=t[s],o=a.includes("{data}")?"GET":"POST",c=o==="POST"?{data:n,sender:e}:void 0,u=o==="POST"?{"Content-Type":"application/json"}:{};try{const l=await fetch(a.replace("{sender}",e.toLowerCase()).replace("{data}",n),{body:JSON.stringify(c),headers:u,method:o});let f;if((i=l.headers.get("Content-Type"))!=null&&i.startsWith("application/json")?f=(await l.json()).data:f=await l.text(),!l.ok){r=new eh({body:c,details:f!=null&&f.error?xi(f.error):l.statusText,headers:l.headers,status:l.status,url:a});continue}if(!jn(f)){r=new kw({result:f,url:a});continue}return f}catch(l){r=new eh({body:c,details:l.message,url:a})}}throw r}const Uw=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:Gh,offchainLookup:Dw,offchainLookupAbiItem:Fh,offchainLookupSignature:Mw},Symbol.toStringTag,{value:"Module"}));let Hh=class extends S0{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,j2(e);const r=Nc(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),gs(s)}update(e){return xs(this),this.iHash.update(e),this}digestInto(e){xs(this),pi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const $h=(n,e,t)=>new Hh(n,e).update(t).digest();$h.create=(n,e)=>new Hh(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ll=BigInt(0),fl=BigInt(1);function yo(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function dl(n){if(!yo(n))throw new Error("Uint8Array expected")}function bo(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function Wc(n){const e=n.toString(16);return e.length&1?"0"+e:e}function Vh(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?ll:BigInt("0x"+n)}const zh=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Fw=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function mo(n){if(dl(n),zh)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Fw[n[t]];return e}const Zn={_0:48,_9:57,A:65,F:70,a:97,f:102};function jh(n){if(n>=Zn._0&&n<=Zn._9)return n-Zn._0;if(n>=Zn.A&&n<=Zn.F)return n-(Zn.A-10);if(n>=Zn.a&&n<=Zn.f)return n-(Zn.a-10)}function Kc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(zh)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const a=jh(n.charCodeAt(s)),o=jh(n.charCodeAt(s+1));if(a===void 0||o===void 0){const c=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=a*16+o}return r}function gi(n){return Vh(mo(n))}function Wh(n){return dl(n),Vh(mo(Uint8Array.from(n).reverse()))}function xo(n,e){return Kc(n.toString(16).padStart(e*2,"0"))}function Kh(n,e){return xo(n,e).reverse()}function Lt(n,e,t){let r;if(typeof e=="string")try{r=Kc(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(yo(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function Qc(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];dl(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}const pl=n=>typeof n=="bigint"&&ll<=n;function hl(n,e,t){return pl(n)&&pl(e)&&pl(t)&&e<=n&&n<t}function Ts(n,e,t,r){if(!hl(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function Gw(n){let e;for(e=0;n>ll;n>>=fl,e+=1);return e}const qc=n=>(fl<<BigInt(n))-fl,yl=n=>new Uint8Array(n),Qh=n=>Uint8Array.from(n);function Hw(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=yl(n),i=yl(n),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=(...f)=>t(i,r,...f),c=(f=yl(0))=>{i=o(Qh([0]),f),r=o(),f.length!==0&&(i=o(Qh([1]),f),r=o())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=o();const p=r.slice();d.push(p),f+=r.length}return Qc(...d)};return(f,d)=>{a(),c(f);let p;for(;!(p=d(u()));)c();return a(),p}}const $w={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||yo(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Jc(n,e,t={}){const r=(i,s,a)=>{const o=$w[s];if(typeof o!="function")throw new Error("invalid validator function");const c=n[i];if(!(a&&c===void 0)&&!o(c,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}function qh(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ht=BigInt(0),st=BigInt(1),wi=BigInt(2),Vw=BigInt(3),Jh=BigInt(4),Yh=BigInt(5),Zh=BigInt(8);function yt(n,e){const t=n%e;return t>=ht?t:e+t}function Mt(n,e,t){let r=n;for(;e-- >ht;)r*=r,r%=t;return r}function bl(n,e){if(n===ht)throw new Error("invert: expected non-zero number");if(e<=ht)throw new Error("invert: expected positive modulus, got "+e);let t=yt(n,e),r=e,i=ht,s=st;for(;t!==ht;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==st)throw new Error("invert: does not exist");return yt(i,e)}function Xh(n,e){const t=(n.ORDER+st)/Jh,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function zw(n,e){const t=(n.ORDER-Yh)/Zh,r=n.mul(e,wi),i=n.pow(r,t),s=n.mul(e,i),a=n.mul(n.mul(s,wi),i),o=n.mul(s,n.sub(a,n.ONE));if(!n.eql(n.sqr(o),e))throw new Error("Cannot find square root");return o}function jw(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-st,t=0;for(;e%wi===ht;)e/=wi,t++;let r=wi;const i=ml(n);for(;ty(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Xh;let s=i.pow(r,e);const a=(e+st)/wi;return function(c,u){if(c.is0(u))return u;if(ty(c,u)!==1)throw new Error("Cannot find square root");let l=t,f=c.mul(c.ONE,s),d=c.pow(u,e),p=c.pow(u,a);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let y=1,h=c.sqr(d);for(;!c.eql(h,c.ONE);)if(y++,h=c.sqr(h),y===l)throw new Error("Cannot find square root");const m=st<<BigInt(l-y-1),x=c.pow(f,m);l=y,f=c.sqr(x),d=c.mul(d,f),p=c.mul(p,x)}return p}}function Ww(n){return n%Jh===Vw?Xh:n%Zh===Yh?zw:jw(n)}const Kw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qw(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Kw.reduce((r,i)=>(r[i]="function",r),e);return Jc(n,t)}function qw(n,e,t){if(t<ht)throw new Error("invalid exponent, negatives unsupported");if(t===ht)return n.ONE;if(t===st)return e;let r=n.ONE,i=e;for(;t>ht;)t&st&&(r=n.mul(r,i)),i=n.sqr(i),t>>=st;return r}function ey(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((a,o,c)=>n.is0(o)?a:(r[c]=a,n.mul(a,o)),n.ONE),s=n.inv(i);return e.reduceRight((a,o,c)=>n.is0(o)?a:(r[c]=n.mul(a,r[c]),n.mul(a,o)),s),r}function ty(n,e){const t=(n.ORDER-st)/wi,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),a=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!a)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function ny(n,e){e!==void 0&&ao(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ml(n,e,t=!1,r={}){if(n<=ht)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=ny(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:qc(i),ZERO:ht,ONE:st,create:c=>yt(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ht<=c&&c<n},is0:c=>c===ht,isOdd:c=>(c&st)===st,neg:c=>yt(-c,n),eql:(c,u)=>c===u,sqr:c=>yt(c*c,n),add:(c,u)=>yt(c+u,n),sub:(c,u)=>yt(c-u,n),mul:(c,u)=>yt(c*u,n),pow:(c,u)=>qw(o,c,u),div:(c,u)=>yt(c*bl(u,n),n),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>bl(c,n),sqrt:r.sqrt||(c=>(a||(a=Ww(n)),a(o,c))),toBytes:c=>t?Kh(c,s):xo(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return t?Wh(c):gi(c)},invertBatch:c=>ey(o,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(o)}function ry(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function iy(n){const e=ry(n);return e+Math.ceil(e/2)}function Jw(n,e,t=!1){const r=n.length,i=ry(e),s=iy(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const a=t?Wh(n):gi(n),o=yt(a,e-st)+st;return t?Kh(o,i):xo(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sy=BigInt(0),xl=BigInt(1);function gl(n,e){const t=e.negate();return n?t:e}function ay(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function wl(n,e){ay(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=qc(n),a=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:a}}function oy(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:a}=t;let o=Number(n&i),c=n>>a;o>r&&(o-=s,c+=xl);const u=e*r,l=u+Math.abs(o)-1,f=o===0,d=o<0,p=e%2!==0;return{nextN:c,offset:l,isZero:f,isNeg:d,isNegF:p,offsetF:u}}function Yw(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function Zw(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Al=new WeakMap,cy=new WeakMap;function vl(n){return cy.get(n)||1}function Xw(n,e){return{constTimeNegate:gl,hasPrecomputes(t){return vl(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>sy;)r&xl&&(i=i.add(s)),s=s.double(),r>>=xl;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=wl(r,e),a=[];let o=t,c=o;for(let u=0;u<i;u++){c=o,a.push(c);for(let l=1;l<s;l++)c=c.add(o),a.push(c);o=c.double()}return a},wNAF(t,r,i){let s=n.ZERO,a=n.BASE;const o=wl(t,e);for(let c=0;c<o.windows;c++){const{nextN:u,offset:l,isZero:f,isNeg:d,isNegF:p,offsetF:y}=oy(i,c,o);i=u,f?a=a.add(gl(p,r[y])):s=s.add(gl(d,r[l]))}return{p:s,f:a}},wNAFUnsafe(t,r,i,s=n.ZERO){const a=wl(t,e);for(let o=0;o<a.windows&&i!==sy;o++){const{nextN:c,offset:u,isZero:l,isNeg:f}=oy(i,o,a);if(i=c,!l){const d=r[u];s=s.add(f?d.negate():d)}}return s},getPrecomputes(t,r,i){let s=Al.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&Al.set(r,i(s))),s},wNAFCached(t,r,i){const s=vl(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const a=vl(t);return a===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(a,this.getPrecomputes(a,t,i),r,s)},setWindowSize(t,r){ay(r,e),cy.set(t,r),Al.delete(t)}}}function e8(n,e,t,r){Yw(t,n),Zw(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const a=n.ZERO,o=Gw(BigInt(i));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const u=qc(c),l=new Array(Number(u)+1).fill(a),f=Math.floor((e.BITS-1)/c)*c;let d=a;for(let p=f;p>=0;p-=c){l.fill(a);for(let h=0;h<s;h++){const m=r[h],x=Number(m>>BigInt(p)&u);l[x]=l[x].add(t[h])}let y=a;for(let h=l.length-1,m=a;h>0;h--)m=m.add(l[h]),y=y.add(m);if(d=d.add(y),p!==0)for(let h=0;h<c;h++)d=d.double()}return d}function uy(n){return Qw(n.Fp),Jc(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ny(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ly(n){n.lowS!==void 0&&bo("lowS",n.lowS),n.prehash!==void 0&&bo("prehash",n.prehash)}function t8(n){const e=uy(n);Jc(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class n8 extends Error{constructor(e=""){super(e)}}const Xn={Err:n8,_tlv:{encode:(n,e)=>{const{Err:t}=Xn;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=Wc(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?Wc(i.length/2|128):"";return Wc(n)+s+i+e},decode(n,e){const{Err:t}=Xn;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let a=0;if(!s)a=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const l of u)a=a<<8|l;if(r+=c,a<128)throw new t("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new t("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(n){const{Err:e}=Xn;if(n<er)throw new e("integer: negative integers are not allowed");let t=Wc(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Xn;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gi(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Xn,i=Lt("signature",n),{v:s,l:a}=r.decode(48,i);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(o),s:t.decode(u)}},hexFromSig(n){const{_tlv:e,_int:t}=Xn,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}};function El(n,e){return mo(xo(n,e))}const er=BigInt(0),De=BigInt(1);BigInt(2);const Tl=BigInt(3),r8=BigInt(4);function i8(n){const e=t8(n),{Fp:t}=e,r=ml(e.n,e.nBitLength),i=e.toBytes||((g,v,S)=>{const O=v.toAffine();return Qc(Uint8Array.from([4]),t.toBytes(O.x),t.toBytes(O.y))}),s=e.fromBytes||(g=>{const v=g.subarray(1),S=t.fromBytes(v.subarray(0,t.BYTES)),O=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:S,y:O}});function a(g){const{a:v,b:S}=e,O=t.sqr(g),R=t.mul(O,g);return t.add(t.add(R,t.mul(g,v)),S)}function o(g,v){const S=t.sqr(v),O=a(g);return t.eql(S,O)}if(!o(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=t.mul(t.pow(e.a,Tl),r8),u=t.mul(t.sqr(e.b),BigInt(27));if(t.is0(t.add(c,u)))throw new Error("bad curve params: a or b");function l(g){return hl(g,De,e.n)}function f(g){const{allowedPrivateKeyLengths:v,nByteLength:S,wrapPrivateKey:O,n:R}=e;if(v&&typeof g!="bigint"){if(yo(g)&&(g=mo(g)),typeof g!="string"||!v.includes(g.length))throw new Error("invalid private key");g=g.padStart(S*2,"0")}let C;try{C=typeof g=="bigint"?g:gi(Lt("private key",g,S))}catch{throw new Error("invalid private key, expected hex or "+S+" bytes, got "+typeof g)}return O&&(C=yt(C,R)),Ts("private key",C,De,R),C}function d(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const p=qh((g,v)=>{const{px:S,py:O,pz:R}=g;if(t.eql(R,t.ONE))return{x:S,y:O};const C=g.is0();v==null&&(v=C?t.ONE:t.inv(R));const _=t.mul(S,v),U=t.mul(O,v),D=t.mul(R,v);if(C)return{x:t.ZERO,y:t.ZERO};if(!t.eql(D,t.ONE))throw new Error("invZ was invalid");return{x:_,y:U}}),y=qh(g=>{if(g.is0()){if(e.allowInfinityPoint&&!t.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:v,y:S}=g.toAffine();if(!t.isValid(v)||!t.isValid(S))throw new Error("bad point: x or y not FE");if(!o(v,S))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(v,S,O){if(v==null||!t.isValid(v))throw new Error("x required");if(S==null||!t.isValid(S)||t.is0(S))throw new Error("y required");if(O==null||!t.isValid(O))throw new Error("z required");this.px=v,this.py=S,this.pz=O,Object.freeze(this)}static fromAffine(v){const{x:S,y:O}=v||{};if(!v||!t.isValid(S)||!t.isValid(O))throw new Error("invalid affine point");if(v instanceof h)throw new Error("projective point not allowed");const R=C=>t.eql(C,t.ZERO);return R(S)&&R(O)?h.ZERO:new h(S,O,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const S=ey(t,v.map(O=>O.pz));return v.map((O,R)=>O.toAffine(S[R])).map(h.fromAffine)}static fromHex(v){const S=h.fromAffine(s(Lt("pointHex",v)));return S.assertValidity(),S}static fromPrivateKey(v){return h.BASE.multiply(f(v))}static msm(v,S){return e8(h,r,v,S)}_setWindowSize(v){w.setWindowSize(this,v)}assertValidity(){y(this)}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){d(v);const{px:S,py:O,pz:R}=this,{px:C,py:_,pz:U}=v,D=t.eql(t.mul(S,U),t.mul(C,R)),$=t.eql(t.mul(O,U),t.mul(_,R));return D&&$}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:S}=e,O=t.mul(S,Tl),{px:R,py:C,pz:_}=this;let U=t.ZERO,D=t.ZERO,$=t.ZERO,H=t.mul(R,R),G=t.mul(C,C),P=t.mul(_,_),T=t.mul(R,C);return T=t.add(T,T),$=t.mul(R,_),$=t.add($,$),U=t.mul(v,$),D=t.mul(O,P),D=t.add(U,D),U=t.sub(G,D),D=t.add(G,D),D=t.mul(U,D),U=t.mul(T,U),$=t.mul(O,$),P=t.mul(v,P),T=t.sub(H,P),T=t.mul(v,T),T=t.add(T,$),$=t.add(H,H),H=t.add($,H),H=t.add(H,P),H=t.mul(H,T),D=t.add(D,H),P=t.mul(C,_),P=t.add(P,P),H=t.mul(P,T),U=t.sub(U,H),$=t.mul(P,G),$=t.add($,$),$=t.add($,$),new h(U,D,$)}add(v){d(v);const{px:S,py:O,pz:R}=this,{px:C,py:_,pz:U}=v;let D=t.ZERO,$=t.ZERO,H=t.ZERO;const G=e.a,P=t.mul(e.b,Tl);let T=t.mul(S,C),N=t.mul(O,_),k=t.mul(R,U),L=t.add(S,O),M=t.add(C,_);L=t.mul(L,M),M=t.add(T,N),L=t.sub(L,M),M=t.add(S,R);let W=t.add(C,U);return M=t.mul(M,W),W=t.add(T,k),M=t.sub(M,W),W=t.add(O,R),D=t.add(_,U),W=t.mul(W,D),D=t.add(N,k),W=t.sub(W,D),H=t.mul(G,M),D=t.mul(P,k),H=t.add(D,H),D=t.sub(N,H),H=t.add(N,H),$=t.mul(D,H),N=t.add(T,T),N=t.add(N,T),k=t.mul(G,k),M=t.mul(P,M),N=t.add(N,k),k=t.sub(T,k),k=t.mul(G,k),M=t.add(M,k),T=t.mul(N,M),$=t.add($,T),T=t.mul(W,M),D=t.mul(L,D),D=t.sub(D,T),T=t.mul(L,N),H=t.mul(W,H),H=t.add(H,T),new h(D,$,H)}subtract(v){return this.add(v.negate())}is0(){return this.equals(h.ZERO)}wNAF(v){return w.wNAFCached(this,v,h.normalizeZ)}multiplyUnsafe(v){const{endo:S,n:O}=e;Ts("scalar",v,er,O);const R=h.ZERO;if(v===er)return R;if(this.is0()||v===De)return this;if(!S||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,v,h.normalizeZ);let{k1neg:C,k1:_,k2neg:U,k2:D}=S.splitScalar(v),$=R,H=R,G=this;for(;_>er||D>er;)_&De&&($=$.add(G)),D&De&&(H=H.add(G)),G=G.double(),_>>=De,D>>=De;return C&&($=$.negate()),U&&(H=H.negate()),H=new h(t.mul(H.px,S.beta),H.py,H.pz),$.add(H)}multiply(v){const{endo:S,n:O}=e;Ts("scalar",v,De,O);let R,C;if(S){const{k1neg:_,k1:U,k2neg:D,k2:$}=S.splitScalar(v);let{p:H,f:G}=this.wNAF(U),{p:P,f:T}=this.wNAF($);H=w.constTimeNegate(_,H),P=w.constTimeNegate(D,P),P=new h(t.mul(P.px,S.beta),P.py,P.pz),R=H.add(P),C=G.add(T)}else{const{p:_,f:U}=this.wNAF(v);R=_,C=U}return h.normalizeZ([R,C])[0]}multiplyAndAddUnsafe(v,S,O){const R=h.BASE,C=(U,D)=>D===er||D===De||!U.equals(R)?U.multiplyUnsafe(D):U.multiply(D),_=C(this,S).add(C(v,O));return _.is0()?void 0:_}toAffine(v){return p(this,v)}isTorsionFree(){const{h:v,isTorsionFree:S}=e;if(v===De)return!0;if(S)return S(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:S}=e;return v===De?this:S?S(h,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return bo("isCompressed",v),this.assertValidity(),i(h,this,v)}toHex(v=!0){return bo("isCompressed",v),mo(this.toRawBytes(v))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const{endo:m,nBitLength:x}=e,w=Xw(h,m?Math.ceil(x/2):x);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:l}}function s8(n){const e=uy(n);return Jc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function a8(n){const e=s8(n),{Fp:t,n:r,nByteLength:i,nBitLength:s}=e,a=t.BYTES+1,o=2*t.BYTES+1;function c(P){return yt(P,r)}function u(P){return bl(P,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:d,isWithinCurveOrder:p}=i8({...e,toBytes(P,T,N){const k=T.toAffine(),L=t.toBytes(k.x),M=Qc;return bo("isCompressed",N),N?M(Uint8Array.from([T.hasEvenY()?2:3]),L):M(Uint8Array.from([4]),L,t.toBytes(k.y))},fromBytes(P){const T=P.length,N=P[0],k=P.subarray(1);if(T===a&&(N===2||N===3)){const L=gi(k);if(!hl(L,De,t.ORDER))throw new Error("Point is not on curve");const M=d(L);let W;try{W=t.sqrt(M)}catch(ie){const J=ie instanceof Error?": "+ie.message:"";throw new Error("Point is not on curve"+J)}const Z=(W&De)===De;return(N&1)===1!==Z&&(W=t.neg(W)),{x:L,y:W}}else if(T===o&&N===4){const L=t.fromBytes(k.subarray(0,t.BYTES)),M=t.fromBytes(k.subarray(t.BYTES,2*t.BYTES));return{x:L,y:M}}else{const L=a,M=o;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+M+", got "+T)}}});function y(P){const T=r>>De;return P>T}function h(P){return y(P)?c(-P):P}const m=(P,T,N)=>gi(P.slice(T,N));class x{constructor(T,N,k){Ts("r",T,De,r),Ts("s",N,De,r),this.r=T,this.s=N,k!=null&&(this.recovery=k),Object.freeze(this)}static fromCompact(T){const N=i;return T=Lt("compactSignature",T,N*2),new x(m(T,0,N),m(T,N,2*N))}static fromDER(T){const{r:N,s:k}=Xn.toSig(Lt("DER",T));return new x(N,k)}assertValidity(){}addRecoveryBit(T){return new x(this.r,this.s,T)}recoverPublicKey(T){const{r:N,s:k,recovery:L}=this,M=R(Lt("msgHash",T));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const W=L===2||L===3?N+e.n:N;if(W>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=L&1?"03":"02",le=l.fromHex(Z+El(W,t.BYTES)),ie=u(W),J=c(-M*ie),X=c(k*ie),Pe=l.BASE.multiplyAndAddUnsafe(le,J,X);if(!Pe)throw new Error("point at infinify");return Pe.assertValidity(),Pe}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Kc(this.toDERHex())}toDERHex(){return Xn.hexFromSig(this)}toCompactRawBytes(){return Kc(this.toCompactHex())}toCompactHex(){const T=i;return El(this.r,T)+El(this.s,T)}}const w={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=iy(e.n);return Jw(e.randomBytes(P),e.n)},precompute(P=8,T=l.BASE){return T._setWindowSize(P),T.multiply(BigInt(3)),T}};function g(P,T=!0){return l.fromPrivateKey(P).toRawBytes(T)}function v(P){if(typeof P=="bigint")return!1;if(P instanceof l)return!0;const N=Lt("key",P).length,k=t.BYTES,L=k+1,M=2*k+1;if(!(e.allowedPrivateKeyLengths||i===L))return N===L||N===M}function S(P,T,N=!0){if(v(P)===!0)throw new Error("first arg must be private key");if(v(T)===!1)throw new Error("second arg must be public key");return l.fromHex(T).multiply(f(P)).toRawBytes(N)}const O=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const T=gi(P),N=P.length*8-s;return N>0?T>>BigInt(N):T},R=e.bits2int_modN||function(P){return c(O(P))},C=qc(s);function _(P){return Ts("num < 2^"+s,P,er,C),xo(P,i)}function U(P,T,N=D){if(["recovered","canonical"].some(Me=>Me in N))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:L}=e;let{lowS:M,prehash:W,extraEntropy:Z}=N;M==null&&(M=!0),P=Lt("msgHash",P),ly(N),W&&(P=Lt("prehashed msgHash",k(P)));const le=R(P),ie=f(T),J=[_(ie),_(le)];if(Z!=null&&Z!==!1){const Me=Z===!0?L(t.BYTES):Z;J.push(Lt("extraEntropy",Me))}const X=Qc(...J),Pe=le;function en(Me){const Ve=O(Me);if(!p(Ve))return;const xn=u(Ve),Ye=l.BASE.multiply(Ve).toAffine(),ge=c(Ye.x);if(ge===er)return;const ke=c(xn*c(Pe+ge*ie));if(ke===er)return;let vt=(Ye.x===ge?0:2)|Number(Ye.y&De),lt=ke;return M&&y(ke)&&(lt=h(ke),vt^=1),new x(ge,lt,vt)}return{seed:X,k2sig:en}}const D={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function H(P,T,N=D){const{seed:k,k2sig:L}=U(P,T,N),M=e;return Hw(M.hash.outputLen,M.nByteLength,M.hmac)(k,L)}l.BASE._setWindowSize(8);function G(P,T,N,k=$){var vt;const L=P;T=Lt("msgHash",T),N=Lt("publicKey",N);const{lowS:M,prehash:W,format:Z}=k;if(ly(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(Z!==void 0&&Z!=="compact"&&Z!=="der")throw new Error("format must be compact or der");const le=typeof L=="string"||yo(L),ie=!le&&!Z&&typeof L=="object"&&L!==null&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!le&&!ie)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let J,X;try{if(ie&&(J=new x(L.r,L.s)),le){try{Z!=="compact"&&(J=x.fromDER(L))}catch(lt){if(!(lt instanceof Xn.Err))throw lt}!J&&Z!=="der"&&(J=x.fromCompact(L))}X=l.fromHex(N)}catch{return!1}if(!J||M&&J.hasHighS())return!1;W&&(T=e.hash(T));const{r:Pe,s:en}=J,Me=R(T),Ve=u(en),xn=c(Me*Ve),Ye=c(Pe*Ve),ge=(vt=l.BASE.multiplyAndAddUnsafe(X,xn,Ye))==null?void 0:vt.toAffine();return ge?c(ge.x)===Pe:!1}return{CURVE:e,getPublicKey:g,getSharedSecret:S,sign:H,verify:G,ProjectivePoint:l,Signature:x,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function o8(n){return{hash:n,hmac:(e,...t)=>$h(n,e,Y2(...t)),randomBytes:Z2}}function c8(n,e){const t=r=>a8({...n,...o8(r)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fy=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),dy=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u8=BigInt(0),l8=BigInt(1),Pl=BigInt(2),py=(n,e)=>(n+e/Pl)/e;function f8(n){const e=fy,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),u=n*n*n%e,l=u*u*n%e,f=Mt(l,t,e)*l%e,d=Mt(f,t,e)*l%e,p=Mt(d,Pl,e)*u%e,y=Mt(p,i,e)*p%e,h=Mt(y,s,e)*y%e,m=Mt(h,o,e)*h%e,x=Mt(m,c,e)*m%e,w=Mt(x,o,e)*h%e,g=Mt(w,t,e)*l%e,v=Mt(g,a,e)*y%e,S=Mt(v,r,e)*u%e,O=Mt(S,Pl,e);if(!Sl.eql(Sl.sqr(O),n))throw new Error("Cannot find square root");return O}const Sl=ml(fy,void 0,void 0,{sqrt:f8}),hy=c8({a:u8,b:BigInt(7),Fp:Sl,n:dy,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=dy,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-l8*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),o=py(s*n,e),c=py(-r*n,e);let u=yt(n-o*t-c*i,e),l=yt(-o*r-c*s,e);const f=u>a,d=l>a;if(f&&(u=e-u),d&&(l=e-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:u,k2neg:d,k2:l}}}},ph),d8=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:hy},Symbol.toStringTag,{value:"Module"}));function Ps(n){const{r:e,s:t}=hy.Signature.fromCompact(n.slice(2,130)),r=+`0x${n.slice(130)}`,[i,s]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof i<"u"?{r:se(e,{size:32}),s:se(t,{size:32}),v:i,yParity:s}:{r:se(e,{size:32}),s:se(t,{size:32}),yParity:s}}const _e=[{type:"function",name:"_CANCEL_ORDER_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"_PERMIT_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"__callback",inputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"},{name:"_price",type:"uint256",internalType:"uint256"},{name:"_unadjustedMarketPrice",type:"uint256",internalType:"uint256"},{name:"_spread",type:"uint256",internalType:"uint256"},{name:"_liquidationTimestamp",type:"uint256",internalType:"uint256"},{name:"_timeStamp",type:"uint256",internalType:"uint256"},{name:"_gasForNextCallback",type:"uint256",internalType:"uint256"}],outputs:[{name:"createdPosition",type:"tuple",internalType:"struct MorpherTradeEngine.position",components:[{name:"lastUpdated",type:"uint256",internalType:"uint256"},{name:"longShares",type:"uint256",internalType:"uint256"},{name:"shortShares",type:"uint256",internalType:"uint256"},{name:"meanEntryPrice",type:"uint256",internalType:"uint256"},{name:"meanEntrySpread",type:"uint256",internalType:"uint256"},{name:"meanEntryLeverage",type:"uint256",internalType:"uint256"},{name:"liquidationPrice",type:"uint256",internalType:"uint256"},{name:"positionHash",type:"bytes32",internalType:"bytes32"}]}],stateMutability:"nonpayable"},{type:"function",name:"adminLiquidationOrder",inputs:[{name:"_address",type:"address",internalType:"address"},{name:"_marketId",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"}],stateMutability:"nonpayable"},{type:"function",name:"callBackAddress",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"callBackCollectionAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address payable"}],stateMutability:"view"},{type:"function",name:"cancelOrder",inputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"checkOrderConditions",inputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"},{name:"_price",type:"uint256",internalType:"uint256"}],outputs:[{name:"_conditionsMet",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"createLiquidationOrder",inputs:[{name:"_address",type:"address",internalType:"address"},{name:"_marketId",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"}],stateMutability:"payable"},{type:"function",name:"createOrder",inputs:[{name:"createOrderParams",type:"tuple",internalType:"struct MorpherOracle.CreateOrderStruct",components:[{name:"_marketId",type:"bytes32",internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",internalType:"uint256"},{name:"_tradeDirection",type:"bool",internalType:"bool"},{name:"_orderLeverage",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",internalType:"uint256"},{name:"_goodUntil",type:"uint256",internalType:"uint256"},{name:"_goodFrom",type:"uint256",internalType:"uint256"}]}],outputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"}],stateMutability:"payable"},{type:"function",name:"createOrder",inputs:[{name:"_marketId",type:"bytes32",internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",internalType:"uint256"},{name:"_tradeDirection",type:"bool",internalType:"bool"},{name:"_orderLeverage",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",internalType:"uint256"},{name:"_goodUntil",type:"uint256",internalType:"uint256"},{name:"_goodFrom",type:"uint256",internalType:"uint256"}],outputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"}],stateMutability:"payable"},{type:"function",name:"createOrderFromGasToken",inputs:[{name:"createOrderParams",type:"tuple",internalType:"struct MorpherOracle.CreateOrderStruct",components:[{name:"_marketId",type:"bytes32",internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",internalType:"uint256"},{name:"_tradeDirection",type:"bool",internalType:"bool"},{name:"_orderLeverage",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",internalType:"uint256"},{name:"_goodUntil",type:"uint256",internalType:"uint256"},{name:"_goodFrom",type:"uint256",internalType:"uint256"}]}],outputs:[{name:"orderId",type:"bytes32",internalType:"bytes32"}],stateMutability:"payable"},{type:"function",name:"createOrderFromToken",inputs:[{name:"createOrderParams",type:"tuple",internalType:"struct MorpherOracle.CreateOrderStruct",components:[{name:"_marketId",type:"bytes32",internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",internalType:"uint256"},{name:"_tradeDirection",type:"bool",internalType:"bool"},{name:"_orderLeverage",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",internalType:"uint256"},{name:"_goodUntil",type:"uint256",internalType:"uint256"},{name:"_goodFrom",type:"uint256",internalType:"uint256"}]},{name:"inputToken",type:"tuple",internalType:"struct MorpherOracle.TokenPermitEIP712Struct",components:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"owner",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"minOutValue",type:"uint256",internalType:"uint256"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createOrderFromToken",inputs:[{name:"createOrderParams",type:"tuple",internalType:"struct MorpherOracle.CreateOrderStruct",components:[{name:"_marketId",type:"bytes32",internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",internalType:"uint256"},{name:"_tradeDirection",type:"bool",internalType:"bool"},{name:"_orderLeverage",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",internalType:"uint256"},{name:"_goodUntil",type:"uint256",internalType:"uint256"},{name:"_goodFrom",type:"uint256",internalType:"uint256"}]},{name:"inputToken",type:"tuple",internalType:"struct MorpherOracle.TokenPermitEIP712Struct",components:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"owner",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"minOutValue",type:"uint256",internalType:"uint256"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}]},{name:"_addressPositionOwner",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"createOrderPermittedBySignature",inputs:[{name:"createOrderParams",type:"tuple",internalType:"struct MorpherOracle.CreateOrderStruct",components:[{name:"_marketId",type:"bytes32",internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",internalType:"uint256"},{name:"_tradeDirection",type:"bool",internalType:"bool"},{name:"_orderLeverage",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",internalType:"uint256"},{name:"_goodUntil",type:"uint256",internalType:"uint256"},{name:"_goodFrom",type:"uint256",internalType:"uint256"}]},{name:"_addressPositionOwner",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"orderId",type:"bytes32",internalType:"bytes32"}],stateMutability:"nonpayable"},{type:"function",name:"initiateCancelOrder",inputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"initiateCancelOrderPermitted",inputs:[{name:"_orderId",type:"bytes32",internalType:"bytes32"},{name:"_owner",type:"address",internalType:"address"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"nonces",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"orderCancellationRequested",inputs:[{name:"",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"setCallbackCollectionAddress",inputs:[{name:"_address",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setMorpherSwapHelperAddress",inputs:[{name:"_helperAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setStateAddress",inputs:[{name:"_address",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"uniswapRouter",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"useWhiteList",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"wMaticAddress",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"whiteList",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"AddressBlackListed",inputs:[{name:"_address",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"AddressWhiteListed",inputs:[{name:"_address",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"AdminLiquidationOrderCreated",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_address",type:"address",indexed:!0,internalType:"address"},{name:"_marketId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_tradeDirection",type:"bool",indexed:!1,internalType:"bool"},{name:"_orderLeverage",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"AdminOrderCancelled",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_sender",type:"address",indexed:!0,internalType:"address"},{name:"_oracleAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"LiquidationOrderCreated",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_sender",type:"address",indexed:!1,internalType:"address"},{name:"_address",type:"address",indexed:!0,internalType:"address"},{name:"_marketId",type:"bytes32",indexed:!0,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"OrderCancellationRequestedEvent",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_sender",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OrderCancelled",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_sender",type:"address",indexed:!0,internalType:"address"},{name:"_oracleAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OrderCreated",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_address",type:"address",indexed:!0,internalType:"address"},{name:"_marketId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_tradeDirection",type:"bool",indexed:!1,internalType:"bool"},{name:"_orderLeverage",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_goodFrom",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_goodUntil",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OrderFailed",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_address",type:"address",indexed:!0,internalType:"address"},{name:"_marketId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_closeSharesAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_openMPHTokenAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_tradeDirection",type:"bool",indexed:!1,internalType:"bool"},{name:"_orderLeverage",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_onlyIfPriceBelow",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_onlyIfPriceAbove",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_goodFrom",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_goodUntil",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OrderProcessed",inputs:[{name:"_orderId",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"_price",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_unadjustedMarketPrice",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_spread",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_positionLiquidationTimestamp",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_timeStamp",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newLongShares",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newShortShares",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newMeanEntry",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newMeanSprad",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newMeanLeverage",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_liquidationPrice",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],p8=[{inputs:[{internalType:"bool",name:"_mainChain",type:"bool"},{internalType:"address",name:"_sideChainOperator",type:"address"},{internalType:"address",name:"_morpherTreasury",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"administratorAddress",type:"address"}],name:"AdministratorChange",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_bridgeAddress",type:"address"}],name:"BridgeChange",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalToken",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[],name:"FastWithdrawsDisabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"governanceAddress",type:"address"}],name:"GovernanceChange",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_periodLength",type:"uint256"}],name:"InactivityPeriodUpdated",type:"event"},{anonymous:!1,inputs:[],name:"Last24HoursAmountWithdrawnReset",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"rewardsTime",type:"uint256"}],name:"LastRewardTime",type:"event"},{anonymous:!1,inputs:[],name:"LastWithdrawAt",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"mainChainWithdrawLimit24",type:"uint256"}],name:"MainChainWithdrawLimitUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"activateMarket",type:"bytes32"}],name:"MarketActivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"deActivateMarket",type:"bytes32"}],name:"MarketDeActivated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxLeverage",type:"uint256"}],name:"MaximumLeverageChange",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalToken",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_transferNonce",type:"uint256"}],name:"NewBridgeNonce",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sideChainOperator",type:"address"}],name:"NewSideChainOperator",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newTotalOnOtherChain",type:"uint256"}],name:"NewTotalInPositions",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newTotalOnOtherChain",type:"uint256"}],name:"NewTotalOnOtherChain",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newTotalSupply",type:"uint256"}],name:"NewTotalSupply",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_numberOfRequests",type:"uint256"}],name:"NumberOfRequestsLimitUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OperatingRewardMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oracleContract",type:"address"}],name:"OracleChange",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"rewardsAddress",type:"address"},{indexed:!0,internalType:"uint256",name:"rewardsBasisPoints",type:"uint256"}],name:"RewardsChange",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_last24HoursAmountWithdrawn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_lastWithdrawLimitReductionTime",type:"uint256"}],name:"RollingWithdrawnAmountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"tokens",type:"uint256"}],name:"SetAllowance",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"balanceHash",type:"bytes32"}],name:"SetBalance",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"positionHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"marketId",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"timeStamp",type:"uint256"},{indexed:!1,internalType:"uint256",name:"longShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"shortShares",type:"uint256"},{indexed:!1,internalType:"uint256",name:"meanEntryPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"meanEntrySpread",type:"uint256"},{indexed:!1,internalType:"uint256",name:"meanEntryLeverage",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidationPrice",type:"uint256"}],name:"SetPosition",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"sideChainMerkleRoot",type:"bytes32"}],name:"SideChainMerkleRootUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"blackList",type:"address"},{indexed:!0,internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"StateAccessDenied",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"whiteList",type:"address"},{indexed:!0,internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"StateAccessGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"administrator",type:"address"},{indexed:!1,internalType:"bool",name:"_paused",type:"bool"}],name:"StatePaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"tokenAddress",type:"address"}],name:"TokenChange",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_address",type:"address"},{indexed:!1,internalType:"uint256",name:"_token",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_totalTokenSent",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"_tokenSentToLinkedChainHash",type:"bytes32"}],name:"TokenSentToLinkedChain",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenTransferredToOtherChain",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"transferHash",type:"bytes32"}],name:"TokenTransferredToOtherChain",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_address",type:"address"},{indexed:!1,internalType:"uint256",name:"_token",type:"uint256"}],name:"TransferredTokenClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"blackList",type:"address"}],name:"TransfersDisabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"whiteList",type:"address"}],name:"TransfersEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"}],name:"WithdrawLimitUpdated",type:"event"},{constant:!0,inputs:[],name:"_owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"administrator",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"fastTransfersEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"inactivityPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"last24HoursAmountWithdrawn",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"lastRewardTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"lastWithdrawLimitReductionTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"mainChain",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"mainChainWithdrawLimit24",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maximumLeverage",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"morpherBridge",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"morpherGovernance",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"morpherRewards",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"morpherToken",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"numberOfRequestsLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"oracleContract",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"rewardBasisPoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"sideChainMerkleRoot",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"sideChainMerkleRootWrittenAtTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"sideChainOperator",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalInPositions",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalOnOtherChain",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_tokens",type:"uint256"}],name:"transferAnyERC20Token",outputs:[{internalType:"bool",name:"_success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"transferNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"withdrawLimit24Hours",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getMaxMappingIndex",outputs:[{internalType:"uint256",name:"_maxMappingIndex",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"address",name:"_address",type:"address"}],name:"getExposureMappingIndex",outputs:[{internalType:"uint256",name:"_mappingIndex",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"uint256",name:"_mappingIndex",type:"uint256"}],name:"getExposureMappingAddress",outputs:[{internalType:"address",name:"_address",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"uint256",name:"_maxMappingIndex",type:"uint256"}],name:"setMaxMappingIndex",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"setExposureMapping",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"setExposureMappingIndex",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"setExposureMappingAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_token",type:"uint256"}],name:"setTokenClaimedOnThisChain",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getTokenClaimedOnThisChain",outputs:[{internalType:"uint256",name:"_token",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_token",type:"uint256"}],name:"setTokenSentToLinkedChain",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getTokenSentToLinkedChain",outputs:[{internalType:"uint256",name:"_token",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getTokenSentToLinkedChainTime",outputs:[{internalType:"uint256",name:"_timeStamp",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"add24HoursWithdrawn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"update24HoursWithdrawLimit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_limit",type:"uint256"}],name:"set24HourWithdrawLimit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"resetLast24HoursAmountWithdrawn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_periodLength",type:"uint256"}],name:"setInactivityPeriod",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"getBridgeNonce",outputs:[{internalType:"uint256",name:"_nonce",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"disableFastWithdraws",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_positionHash",type:"bytes32"}],name:"setPositionClaimedOnMainChain",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_positionHash",type:"bytes32"}],name:"getPositionClaimedOnMainChain",outputs:[{internalType:"bool",name:"_alreadyClaimed",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setLastRequestBlock",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getLastRequestBlock",outputs:[{internalType:"uint256",name:"_lastRequestBlock",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_numberOfRequests",type:"uint256"}],name:"setNumberOfRequests",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"increaseNumberOfRequests",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getNumberOfRequests",outputs:[{internalType:"uint256",name:"_numberOfRequests",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_numberOfRequestsLimit",type:"uint256"}],name:"setNumberOfRequestsLimit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getNumberOfRequestsLimit",outputs:[{internalType:"uint256",name:"_numberOfRequestsLimit",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_mainChainWithdrawLimit24",type:"uint256"}],name:"setMainChainWithdrawLimit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getMainChainWithdrawLimit",outputs:[{internalType:"uint256",name:"_mainChainWithdrawLimit24",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"grantAccess",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"denyAccess",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getStateAccess",outputs:[{internalType:"bool",name:"_hasAccess",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"enableTransfers",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"disableTransfers",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getCanTransfer",outputs:[{internalType:"bool",name:"_hasAccess",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_token",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_token",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_token",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_totalInPositions",type:"uint256"}],name:"setTotalInPositions",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newTotalOnOtherChain",type:"uint256"}],name:"setTotalOnOtherChain",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_tokenOwner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_tokens",type:"uint256"}],name:"setAllowance",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_tokenOwner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"getAllowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newGovernanceContractAddress",type:"address"}],name:"setGovernanceContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getGovernance",outputs:[{internalType:"address",name:"_governanceContract",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newBridge",type:"address"}],name:"setMorpherBridge",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getMorpherBridge",outputs:[{internalType:"address",name:"_currentBridge",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newOracleContract",type:"address"}],name:"setOracleContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOracleContract",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newTokenContract",type:"address"}],name:"setTokenContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getTokenContract",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newAdministrator",type:"address"}],name:"setAdministrator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getAdministrator",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newRewardsAddress",type:"address"}],name:"setRewardAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newRewardBasisPoints",type:"uint256"}],name:"setRewardBasisPoints",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_activateMarket",type:"bytes32"}],name:"activateMarket",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_deActivateMarket",type:"bytes32"}],name:"deActivateMarket",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getMarketActive",outputs:[{internalType:"bool",name:"_active",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newMaximumLeverage",type:"uint256"}],name:"setMaximumLeverage",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getMaximumLeverage",outputs:[{internalType:"uint256",name:"_maxLeverage",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pauseState",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unPauseState",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_sideChainMerkleRoot",type:"bytes32"}],name:"setSideChainMerkleRoot",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getSideChainMerkleRoot",outputs:[{internalType:"bytes32",name:"_sideChainMerkleRoot",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setSideChainOperator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getSideChainOperator",outputs:[{internalType:"address",name:"_address",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getSideChainMerkleRootWrittenAtTime",outputs:[{internalType:"uint256",name:"_sideChainMerkleRoot",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"uint256",name:"_timeStamp",type:"uint256"},{internalType:"uint256",name:"_longShares",type:"uint256"},{internalType:"uint256",name:"_shortShares",type:"uint256"},{internalType:"uint256",name:"_meanEntryPrice",type:"uint256"},{internalType:"uint256",name:"_meanEntrySpread",type:"uint256"},{internalType:"uint256",name:"_meanEntryLeverage",type:"uint256"},{internalType:"uint256",name:"_liquidationPrice",type:"uint256"}],name:"setPosition",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getPosition",outputs:[{internalType:"uint256",name:"_longShares",type:"uint256"},{internalType:"uint256",name:"_shortShares",type:"uint256"},{internalType:"uint256",name:"_meanEntryPrice",type:"uint256"},{internalType:"uint256",name:"_meanEntrySpread",type:"uint256"},{internalType:"uint256",name:"_meanEntryLeverage",type:"uint256"},{internalType:"uint256",name:"_liquidationPrice",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"},{internalType:"uint256",name:"_timeStamp",type:"uint256"},{internalType:"uint256",name:"_longShares",type:"uint256"},{internalType:"uint256",name:"_shortShares",type:"uint256"},{internalType:"uint256",name:"_meanEntryPrice",type:"uint256"},{internalType:"uint256",name:"_meanEntrySpread",type:"uint256"},{internalType:"uint256",name:"_meanEntryLeverage",type:"uint256"},{internalType:"uint256",name:"_liquidationPrice",type:"uint256"}],name:"getPositionHash",outputs:[{internalType:"bytes32",name:"_hash",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"uint256",name:"_balance",type:"uint256"}],name:"getBalanceHash",outputs:[{internalType:"bytes32",name:"_hash",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getLastUpdated",outputs:[{internalType:"uint256",name:"_lastUpdated",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getLongShares",outputs:[{internalType:"uint256",name:"_longShares",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getShortShares",outputs:[{internalType:"uint256",name:"_shortShares",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getMeanEntryPrice",outputs:[{internalType:"uint256",name:"_meanEntryPrice",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getMeanEntrySpread",outputs:[{internalType:"uint256",name:"_meanEntrySpread",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getMeanEntryLeverage",outputs:[{internalType:"uint256",name:"_meanEntryLeverage",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"},{internalType:"bytes32",name:"_marketId",type:"bytes32"}],name:"getLiquidationPrice",outputs:[{internalType:"uint256",name:"_liquidationPrice",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"payOperatingReward",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],go=[{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"burn",inputs:[{name:"from",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{type:"function",name:"deposit",inputs:[{name:"user",type:"address",internalType:"address"},{name:"depositData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getDailyMintedTransferLimit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDailyMintedTransfers",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getLockedRewards",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getRestrictTransfers",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getTimeLock",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"},{name:"lockedUntil",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTotalLockedRewards",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTotalTimeLocked",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTotalTokensInPositions",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTradeableBalanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTransferredInTokens",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_morpherAccessControlAddress",type:"address",internalType:"address"},{name:"_morpherStateAddress",type:"address",internalType:"address"},{name:"_permitName",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"lockRewards",inputs:[{name:"account",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"lockTokensForTime",inputs:[{name:"account",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"},{name:"lockDuration",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"mint",inputs:[{name:"to",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"morpherAccessControl",inputs:[],outputs:[{name:"",type:"address",internalType:"contract MorpherAccessControl"}],stateMutability:"view"},{type:"function",name:"morpherState",inputs:[],outputs:[{name:"",type:"address",internalType:"contract MorpherState"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"nonces",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"permit",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"deadline",type:"uint256",internalType:"uint256"},{name:"v",type:"uint8",internalType:"uint8"},{name:"r",type:"bytes32",internalType:"bytes32"},{name:"s",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"setDailyMintedTransferLimit",inputs:[{name:"limit",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setMorpherStateAddress",inputs:[{name:"_morpherState",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setRestrictTransfers",inputs:[{name:"restrictTransfers",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setTotalInPositions",inputs:[{name:"totalTokensInPositions",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"unlockExpiredTokens",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unlockRewards",inputs:[{name:"account",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"withdraw",inputs:[{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"DailyMintedTransferLimitUpdated",inputs:[{name:"oldLimit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"newLimit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"MigrationTokensLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"lockedUntil",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"MintedTokensTransferred",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"RewardsLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"RewardsUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SetRestrictTransfers",inputs:[{name:"_oldValue",type:"bool",indexed:!1,internalType:"bool"},{name:"_newValue",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetTotalTokensInPositions",inputs:[{name:"_oldValue",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newValue",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SetTotalTokensOnOtherChain",inputs:[{name:"_oldValue",type:"uint256",indexed:!1,internalType:"uint256"},{name:"_newValue",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TokensLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"lockedUntil",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TokensTransferredIn",inputs:[{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TokensUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ERC20InsufficientAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"allowance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InsufficientBalance",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC20InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC20InvalidSpender",inputs:[{name:"spender",type:"address",internalType:"address"}]},{type:"error",name:"ERC2612ExpiredSignature",inputs:[{name:"deadline",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC2612InvalidSigner",inputs:[{name:"signer",type:"address",internalType:"address"},{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]},{type:"error",name:"FailedCall",inputs:[]},{type:"error",name:"InvalidAccountNonce",inputs:[{name:"account",type:"address",internalType:"address"},{name:"currentNonce",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]}];function h8(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function y8(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}function b8(n,e){return e=e||{},new Promise(function(t,r){var i=new XMLHttpRequest,s=[],a=[],o={},c=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return s},entries:function(){return a},get:function(l){return o[l.toLowerCase()]},has:function(l){return l.toLowerCase()in o}}}};for(var u in i.open(e.method||"get",n,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(l,f,d){s.push(f=f.toLowerCase()),a.push([f,d]),o[f]=o[f]?o[f]+","+d:d}),t(c())},i.onerror=r,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(u,e.headers[u]);i.send(e.body||null)})}const yy=y8(Object.freeze(Object.defineProperty({__proto__:null,default:b8},Symbol.toStringTag,{value:"Module"})));var by=self.fetch||(self.fetch=yy.default||yy);const Il=h8(by),my=ye({__proto__:null,default:Il},[by]),xy="6.15.0";function m8(n,e,t){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function Ze(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Y(n,e,t){for(let r in e){let i=e[r];const s=t?t[r]:null;s&&m8(i,s,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function Ss(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>Ss(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let i=0;i<n.length;i++)r+=t[n[i]>>4],r+=t[n[i]&15];return r}if(typeof n=="object"&&typeof n.toJSON=="function")return Ss(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(r=>`${Ss(r,e)}: ${Ss(n[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ze(n,e){return n&&n.code===e}function Ol(n){return ze(n,"CALL_EXCEPTION")}function ve(n,e,t){let r=n;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Ss(t)}`);for(const a in t){if(a==="shortMessage")continue;const o=t[a];s.push(a+"="+Ss(o))}}s.push(`code=${e}`),s.push(`version=${xy}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return Y(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Y(i,{shortMessage:r}),i}function F(n,e,t,r){if(!n)throw ve(e,t,r)}function E(n,e,t,r){F(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function gy(n,e,t){t==null&&(t=""),t&&(t=": "+t),F(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),F(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}const x8=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function wy(n){F(x8.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function Ai(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),F(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Ay(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}E(!1,"invalid BytesLike value",e||"value",n)}function K(n,e){return Ay(n,e,!1)}function je(n,e){return Ay(n,e,!0)}function xe(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function Yc(n){return xe(n,!0)||n instanceof Uint8Array}const vy="0123456789abcdef";function V(n){const e=K(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=vy[(i&240)>>4]+vy[i&15]}return t}function fe(n){return"0x"+n.map(e=>V(e).substring(2)).join("")}function tr(n){return xe(n,!0)?(n.length-2)/2:K(n).length}function we(n,e,t){const r=K(n);return t!=null&&t>r.length&&F(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),V(r.slice(e??0,t??r.length))}function Ey(n,e,t){const r=K(n);F(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),V(i)}function Dt(n,e){return Ey(n,e,!0)}function Ty(n,e){return Ey(n,e,!1)}const Zc=BigInt(0),sn=BigInt(1),Is=9007199254740991;function g8(n,e){const t=Xc(n,"value"),r=BigInt(ee(e,"width"));if(F(t>>r===Zc,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-sn){const i=(sn<<r)-sn;return-((~t&i)+sn)}return t}function Cl(n,e){let t=Q(n,"value");const r=BigInt(ee(e,"width")),i=sn<<r-sn;if(t<Zc){t=-t,F(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(sn<<r)-sn;return(~t&s)+sn}else F(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function wo(n,e){const t=Xc(n,"value"),r=BigInt(ee(e,"bits"));return t&(sn<<r)-sn}function Q(n,e){switch(typeof n){case"bigint":return n;case"number":return E(Number.isInteger(n),"underflow",e||"value",n),E(n>=-Is&&n<=Is,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){E(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}E(!1,"invalid BigNumberish value",e||"value",n)}function Xc(n,e){const t=Q(n,e);return F(t>=Zc,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const Py="0123456789abcdef";function eu(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=Py[t>>4],e+=Py[t&15];return BigInt(e)}return Q(n)}function ee(n,e){switch(typeof n){case"bigint":return E(n>=-Is&&n<=Is,"overflow",e||"value",n),Number(n);case"number":return E(Number.isInteger(n),"underflow",e||"value",n),E(n>=-Is&&n<=Is,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return ee(BigInt(n),e)}catch(t){E(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}E(!1,"invalid numeric value",e||"value",n)}function w8(n){return ee(eu(n))}function nr(n,e){let r=Xc(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=ee(e,"width");for(F(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Ee(n){const e=Xc(n,"value");if(e===Zc)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(t.substring(s,s+2),16)}return r}function an(n){let e=V(Yc(n)?n:Ee(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const tu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let nu=null;function A8(n){if(nu==null){nu={};for(let t=0;t<tu.length;t++)nu[tu[t]]=BigInt(t)}const e=nu[n];return E(e!=null,"invalid base58 value","letter",n),e}const v8=BigInt(0),Nl=BigInt(58);function Sy(n){const e=K(n);let t=eu(e),r="";for(;t;)r=tu[Number(t%Nl)]+r,t/=Nl;for(let i=0;i<e.length&&!e[i];i++)r=tu[0]+r;return r}function E8(n){let e=v8;for(let t=0;t<n.length;t++)e*=Nl,e+=A8(n[t]);return e}function T8(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return K(e)}function P8(n){const e=K(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}class Iy{constructor(e,t,r){I(this,"filter");I(this,"emitter");B(this,sa);A(this,sa,t),Y(this,{emitter:e,filter:r})}async removeListener(){b(this,sa)!=null&&await this.emitter.off(this.filter,b(this,sa))}}sa=new WeakMap;function S8(n,e,t,r,i){E(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function Oy(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let s=0;for(let a=e+1;a<t.length&&t[a]>>6===2;a++)s++;return s}return n==="OVERRUN"?t.length-e-1:0}function I8(n,e,t,r,i){return n==="OVERLONG"?(E(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Oy(n,e,t))}const O8=Object.freeze({error:S8,ignore:Oy,replace:I8});function C8(n,e){e==null&&(e=O8.error);const t=K(n,"bytes"),r=[];let i=0;for(;i<t.length;){const s=t[i++];if(!(s>>7)){r.push(s);continue}let a=null,o=null;if((s&224)===192)a=1,o=127;else if((s&240)===224)a=2,o=2047;else if((s&248)===240)a=3,o=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+a>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let c=s&(1<<8-a-1)-1;for(let u=0;u<a;u++){let l=t[i];if((l&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),c=null;break}c=c<<6|l&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-a,t,r,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-a,t,r,c);continue}if(c<=o){i+=e("OVERLONG",i-1-a,t,r,c);continue}r.push(c)}}return r}function Xe(n,e){E(typeof n=="string","invalid string value","str",n),e!=null&&(wy(e),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);E(r<n.length&&(s&64512)===56320,"invalid surrogate pair","str",n);const a=65536+((i&1023)<<10)+(s&1023);t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(a&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function N8(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ru(n,e){return N8(C8(n,e))}function Cy(n){async function e(t,r){F(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();F(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),F(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const a=new AbortController,o=setTimeout(()=>{s=ve("request timeout","TIMEOUT"),a.abort()},t.timeout);r&&r.addListener(()=>{s=ve("request cancelled","CANCELLED"),a.abort()});const c=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:a.signal});let u;try{u=await fetch(t.url,c)}catch(p){throw clearTimeout(o),s||p}clearTimeout(o);const l={};u.headers.forEach((p,y)=>{l[y.toLowerCase()]=p});const f=await u.arrayBuffer(),d=f==null?null:new Uint8Array(f);return{statusCode:u.status,statusMessage:u.statusText,headers:l,body:d}}return e}const R8=12,B8=250;let Ny=Cy();const _8=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),k8=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Rl=!1;async function Ry(n,e){try{const t=n.match(_8);if(!t)throw new Error("invalid data");return new _r(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?T8(t[3]):M8(t[3]))}catch{return new _r(599,"BAD REQUEST (invalid data: URI)",{},null,new rr(n))}}function By(n){async function e(t,r){try{const i=t.match(k8);if(!i)throw new Error("invalid link");return new rr(`${n}${i[2]}`)}catch{return new _r(599,"BAD REQUEST (invalid IPFS URI)",{},null,new rr(t))}}return e}const iu={data:Ry,ipfs:By("https://gateway.ipfs.io/ipfs/")},_y=new WeakMap;class L8{constructor(e){B(this,Gi);B(this,zr);A(this,Gi,[]),A(this,zr,!1),_y.set(e,()=>{if(!b(this,zr)){A(this,zr,!0);for(const t of b(this,Gi))setTimeout(()=>{t()},0);A(this,Gi,[])}})}addListener(e){F(!b(this,zr),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),b(this,Gi).push(e)}get cancelled(){return b(this,zr)}checkSignal(){F(!this.cancelled,"cancelled","CANCELLED",{})}}Gi=new WeakMap,zr=new WeakMap;function su(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}const Zu=class Zu{constructor(e){B(this,zi);B(this,aa);B(this,oa);B(this,fn);B(this,mr);B(this,ca);B(this,ua);B(this,$e);B(this,St);B(this,xr);B(this,Hi);B(this,$i);B(this,Vi);B(this,_n);B(this,dn);B(this,jr);A(this,ua,String(e)),A(this,aa,!1),A(this,oa,!0),A(this,fn,{}),A(this,mr,""),A(this,ca,3e5),A(this,dn,{slotInterval:B8,maxAttempts:R8}),A(this,jr,null)}get url(){return b(this,ua)}set url(e){A(this,ua,String(e))}get body(){return b(this,$e)==null?null:new Uint8Array(b(this,$e))}set body(e){if(e==null)A(this,$e,void 0),A(this,St,void 0);else if(typeof e=="string")A(this,$e,Xe(e)),A(this,St,"text/plain");else if(e instanceof Uint8Array)A(this,$e,e),A(this,St,"application/octet-stream");else if(typeof e=="object")A(this,$e,Xe(JSON.stringify(e))),A(this,St,"application/json");else throw new Error("invalid body")}hasBody(){return b(this,$e)!=null}get method(){return b(this,mr)?b(this,mr):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),A(this,mr,String(e).toUpperCase())}get headers(){const e=Object.assign({},b(this,fn));return b(this,xr)&&(e.authorization=`Basic ${P8(Xe(b(this,xr)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&b(this,St)&&(e["content-type"]=b(this,St)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){b(this,fn)[String(e).toLowerCase()]=String(t)}clearHeaders(){A(this,fn,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return b(this,xr)||null}setCredentials(e,t){E(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),A(this,xr,`${e}:${t}`)}get allowGzip(){return b(this,oa)}set allowGzip(e){A(this,oa,!!e)}get allowInsecureAuthentication(){return!!b(this,aa)}set allowInsecureAuthentication(e){A(this,aa,!!e)}get timeout(){return b(this,ca)}set timeout(e){E(e>=0,"timeout must be non-zero","timeout",e),A(this,ca,e)}get preflightFunc(){return b(this,Hi)||null}set preflightFunc(e){A(this,Hi,e)}get processFunc(){return b(this,$i)||null}set processFunc(e){A(this,$i,e)}get retryFunc(){return b(this,Vi)||null}set retryFunc(e){A(this,Vi,e)}get getUrlFunc(){return b(this,jr)||Ny}set getUrlFunc(e){A(this,jr,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${b(this,$e)?V(b(this,$e)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(b(this,dn).slotInterval=e.slotInterval),e.maxAttempts!=null&&(b(this,dn).maxAttempts=e.maxAttempts)}send(){return F(b(this,_n)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),A(this,_n,new L8(this)),z(this,zi,mc).call(this,0,ky()+this.timeout,0,this,new _r(0,"",{},null,this))}cancel(){F(b(this,_n)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=_y.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();F(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Zu(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,A(i,fn,Object.assign({},b(this,fn))),b(this,$e)&&A(i,$e,new Uint8Array(b(this,$e))),A(i,St,b(this,St)),i}clone(){const e=new Zu(this.url);return A(e,mr,b(this,mr)),b(this,$e)&&A(e,$e,b(this,$e)),A(e,St,b(this,St)),A(e,fn,Object.assign({},b(this,fn))),A(e,xr,b(this,xr)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),A(e,Hi,b(this,Hi)),A(e,$i,b(this,$i)),A(e,Vi,b(this,Vi)),A(e,dn,Object.assign({},b(this,dn))),A(e,jr,b(this,jr)),e}static lockConfig(){Rl=!0}static getGateway(e){return iu[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(Rl)throw new Error("gateways locked");iu[e]=t}static registerGetUrl(e){if(Rl)throw new Error("gateways locked");Ny=e}static createGetUrlFunc(e){return Cy(e)}static createDataGateway(){return Ry}static createIpfsGatewayFunc(e){return By(e)}};aa=new WeakMap,oa=new WeakMap,fn=new WeakMap,mr=new WeakMap,ca=new WeakMap,ua=new WeakMap,$e=new WeakMap,St=new WeakMap,xr=new WeakMap,Hi=new WeakMap,$i=new WeakMap,Vi=new WeakMap,_n=new WeakMap,dn=new WeakMap,jr=new WeakMap,zi=new WeakSet,mc=async function(e,t,r,i,s){var l,f,d;if(e>=b(this,dn).maxAttempts)return s.makeServerError("exceeded maximum retry limit");F(ky()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await D8(r);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in iu){const p=await iu[o](a.url,su(b(i,_n)));if(p instanceof _r){let y=p;if(this.processFunc){su(b(i,_n));try{y=await this.processFunc(a,y)}catch(h){(h.throttle==null||typeof h.stall!="number")&&y.makeServerError("error in post-processing function",h).assertOk()}}return y}a=p}this.preflightFunc&&(a=await this.preflightFunc(a));const c=await this.getUrlFunc(a,su(b(i,_n)));let u=new _r(c.statusCode,c.statusMessage,c.headers,c.body,i);if(u.statusCode===301||u.statusCode===302){try{const p=u.headers.location||"";return z(l=a.redirect(p),zi,mc).call(l,e+1,t,0,i,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,u,e))){const p=u.headers["retry-after"];let y=b(this,dn).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof p=="string"&&p.match(/^[1-9][0-9]*$/)&&(y=parseInt(p)),z(f=a.clone(),zi,mc).call(f,e+1,t,y,i,u)}if(this.processFunc){su(b(i,_n));try{u=await this.processFunc(a,u)}catch(p){(p.throttle==null||typeof p.stall!="number")&&u.makeServerError("error in post-processing function",p).assertOk();let y=b(this,dn).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return p.stall>=0&&(y=p.stall),z(d=a.clone(),zi,mc).call(d,e+1,t,y,i,u)}}return u};let rr=Zu;const ad=class ad{constructor(e,t,r,i,s){B(this,Xo);B(this,ec);B(this,tc);B(this,It);B(this,la);B(this,ji);A(this,Xo,e),A(this,ec,t),A(this,tc,Object.keys(r).reduce((a,o)=>(a[o.toLowerCase()]=String(r[o]),a),{})),A(this,It,i==null?null:new Uint8Array(i)),A(this,la,s||null),A(this,ji,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${b(this,It)?V(b(this,It)):"null"}>`}get statusCode(){return b(this,Xo)}get statusMessage(){return b(this,ec)}get headers(){return Object.assign({},b(this,tc))}get body(){return b(this,It)==null?null:new Uint8Array(b(this,It))}get bodyText(){try{return b(this,It)==null?"":ru(b(this,It))}catch{F(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{F(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new ad(599,r,this.headers,this.body,b(this,la)||void 0);return A(i,ji,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:E(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw Y(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return b(this,It)!=null}get request(){return b(this,la)}ok(){return b(this,ji).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=b(this,ji);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{b(this,It)&&(i=ru(b(this,It)))}catch{}F(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Xo=new WeakMap,ec=new WeakMap,tc=new WeakMap,It=new WeakMap,la=new WeakMap,ji=new WeakMap;let _r=ad;function ky(){return new Date().getTime()}function M8(n){return Xe(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function D8(n){return new Promise(e=>setTimeout(e,n))}function U8(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Ly(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function My(n,e,t,r){const i=[];for(;t<e+1+r;){const s=Dy(n,t);i.push(s.result),t+=s.consumed,F(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function Dy(n,e){F(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{F(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=Ly(n,e+1,r);return t(e+1+r+i),My(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),My(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=Ly(n,e+1,r);t(e+1+r+i);const s=V(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=V(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:U8(n[e])}}function Ao(n){const e=K(n,"data"),t=Dy(e,0);return E(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function Uy(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function Fy(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(Fy(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=Uy(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(K(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Uy(e.length);return t.unshift(183+t.length),t.concat(e)}const Gy="0123456789abcdef";function ir(n){let e="0x";for(const t of Fy(n))e+=Gy[t>>4],e+=Gy[t&15];return e}function F8(n){const e=K(n,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=V(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const at=32,Bl=new Uint8Array(at),G8=["then"],au={},Hy=new WeakMap;function vi(n){return Hy.get(n)}function $y(n,e){Hy.set(n,e)}function vo(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function _l(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof Os?_l(vi(r),r,t):r):n.reduce((r,i,s)=>{let a=e.getValue(i);return i in r||(t&&a instanceof Os&&(a=_l(vi(a),a,t)),r[i]=a),r},{})}const da=class da extends Array{constructor(...t){const r=t[0];let i=t[1],s=(t[2]||[]).slice(),a=!0;r!==au&&(i=t,s=[],a=!1);super(i.length);B(this,fa);i.forEach((u,l)=>{this[l]=u});const o=s.reduce((u,l)=>(typeof l=="string"&&u.set(l,(u.get(l)||0)+1),u),new Map);if($y(this,Object.freeze(i.map((u,l)=>{const f=s[l];return f!=null&&o.get(f)===1?f:null}))),A(this,fa,[]),b(this,fa)==null&&b(this,fa),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(u,l,f)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const p=ee(l,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const y=u[p];return y instanceof Error&&vo(`index ${p}`,y),y}if(G8.indexOf(l)>=0)return Reflect.get(u,l,f);const d=u[l];if(d instanceof Function)return function(...p){return d.apply(this===f?u:this,p)};if(!(l in u))return u.getValue.apply(this===f?u:this,[l])}return Reflect.get(u,l,f)}});return $y(c,vi(this)),c}toArray(t){const r=[];return this.forEach((i,s)=>{i instanceof Error&&vo(`index ${s}`,i),t&&i instanceof da&&(i=i.toArray(t)),r.push(i)}),r}toObject(t){const r=vi(this);return r.reduce((i,s,a)=>(F(s!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),_l(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=vi(this),s=[],a=[];for(let o=t;o<r;o++)s.push(this[o]),a.push(i[o]);return new da(au,s,a)}filter(t,r){const i=vi(this),s=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&vo(`index ${o}`,c),t.call(r,c,o,this)&&(s.push(c),a.push(i[o]))}return new da(au,s,a)}map(t,r){const i=[];for(let s=0;s<this.length;s++){const a=this[s];a instanceof Error&&vo(`index ${s}`,a),i.push(t.call(r,a,s,this))}return i}getValue(t){const r=vi(this).indexOf(t);if(r===-1)return;const i=this[r];return i instanceof Error&&vo(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,r){return new da(au,t,r)}};fa=new WeakMap;let Os=da;function Vy(n){let e=Ee(n);return F(e.length<=at,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:at,offset:e.length}),e.length!==at&&(e=je(fe([Bl.slice(e.length%at),e]))),e}class sr{constructor(e,t,r,i){I(this,"name");I(this,"type");I(this,"localName");I(this,"dynamic");Y(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){E(!1,e,this.localName,t)}}class kl{constructor(){B(this,pa);B(this,gr);B(this,Wi);A(this,gr,[]),A(this,Wi,0)}get data(){return fe(b(this,gr))}get length(){return b(this,Wi)}appendWriter(e){return z(this,pa,a0).call(this,je(e.data))}writeBytes(e){let t=je(e);const r=t.length%at;return r&&(t=je(fe([t,Bl.slice(r)]))),z(this,pa,a0).call(this,t)}writeValue(e){return z(this,pa,a0).call(this,Vy(e))}writeUpdatableValue(){const e=b(this,gr).length;return b(this,gr).push(Bl),A(this,Wi,b(this,Wi)+at),t=>{b(this,gr)[e]=Vy(t)}}}gr=new WeakMap,Wi=new WeakMap,pa=new WeakSet,a0=function(e){return b(this,gr).push(e),A(this,Wi,b(this,Wi)+e.length),e.length};const od=class od{constructor(e,t,r){B(this,qi);I(this,"allowLoose");B(this,wt);B(this,Ot);B(this,Ki);B(this,Qi);B(this,Wr);Y(this,{allowLoose:!!t}),A(this,wt,je(e)),A(this,Ki,0),A(this,Qi,null),A(this,Wr,r??1024),A(this,Ot,0)}get data(){return V(b(this,wt))}get dataLength(){return b(this,wt).length}get consumed(){return b(this,Ot)}get bytes(){return new Uint8Array(b(this,wt))}subReader(e){const t=new od(b(this,wt).slice(b(this,Ot)+e),this.allowLoose,b(this,Wr));return A(t,Qi,this),t}readBytes(e,t){let r=z(this,qi,A1).call(this,0,e,!!t);return z(this,qi,bd).call(this,e),A(this,Ot,b(this,Ot)+r.length),r.slice(0,e)}readValue(){return eu(this.readBytes(at))}readIndex(){return w8(this.readBytes(at))}};wt=new WeakMap,Ot=new WeakMap,Ki=new WeakMap,Qi=new WeakMap,Wr=new WeakMap,qi=new WeakSet,bd=function(e){var t;if(b(this,Qi))return z(t=b(this,Qi),qi,bd).call(t,e);A(this,Ki,b(this,Ki)+e),F(b(this,Wr)<1||b(this,Ki)<=b(this,Wr)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${b(this,Wr)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:je(b(this,wt)),offset:b(this,Ot),length:e,info:{bytesRead:b(this,Ki),dataLength:this.dataLength}})},A1=function(e,t,r){let i=Math.ceil(t/at)*at;return b(this,Ot)+i>b(this,wt).length&&(this.allowLoose&&r&&b(this,Ot)+t<=b(this,wt).length?i=t:F(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:je(b(this,wt)),length:b(this,wt).length,offset:b(this,Ot)+i})),b(this,wt).slice(b(this,Ot),b(this,Ot)+i)};let Ll=od;function Et(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Ml(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function zy(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Et(n.outputLen),Et(n.blockLen)}function Cs(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function jy(n,e){Ml(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Dl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wy=n=>n instanceof Uint8Array,ou=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),cu=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Tn=(n,e)=>n<<32-e|n>>>e;if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");const H8=async()=>{};async function Ky(n,e,t){let r=Date.now();for(let i=0;i<n;i++){t(i);const s=Date.now()-r;s>=0&&s<e||(await H8(),r+=s)}}function $8(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Ns(n){if(typeof n=="string"&&(n=$8(n)),!Wy(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function V8(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!Wy(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class Ul{clone(){return this._cloneInto()}}const z8={}.toString;function Qy(n,e){if(e!==void 0&&z8.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function uu(n){const e=r=>n().update(Ns(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function j8(n=32){if(Dl&&typeof Dl.getRandomValues=="function")return Dl.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class qy extends Ul{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,zy(e);const r=Ns(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return Cs(this),this.iHash.update(e),this}digestInto(e){Cs(this),Ml(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const lu=(n,e,t)=>new qy(n,e).update(t).digest();lu.create=(n,e)=>new qy(n,e);function W8(n,e,t,r){zy(n);const i=Qy({dkLen:32,asyncTick:10},r),{c:s,dkLen:a,asyncTick:o}=i;if(Et(s),Et(a),Et(o),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Ns(e),u=Ns(t),l=new Uint8Array(a),f=lu.create(n,c),d=f._cloneInto().update(u);return{c:s,dkLen:a,asyncTick:o,DK:l,PRF:f,PRFSalt:d}}function K8(n,e,t,r,i){return n.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}function Fl(n,e,t,r){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:c}=W8(n,e,t,r);let u;const l=new Uint8Array(4),f=cu(l),d=new Uint8Array(o.outputLen);for(let p=1,y=0;y<s;p++,y+=o.outputLen){const h=a.subarray(y,y+o.outputLen);f.setInt32(0,p,!1),(u=c._cloneInto(u)).update(l).digestInto(d),h.set(d.subarray(0,h.length));for(let m=1;m<i;m++){o._cloneInto(u).update(d).digestInto(d);for(let x=0;x<h.length;x++)h[x]^=d[x]}}return K8(o,c,a,u,d)}function Q8(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(t>>i&s),o=Number(t&s),c=r?4:0,u=r?0:4;n.setUint32(e+c,a,r),n.setUint32(e+u,o,r)}class Gl extends Ul{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=cu(this.buffer)}update(e){Cs(this);const{view:t,buffer:r,blockLen:i}=this;e=Ns(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=cu(e);for(;i<=s-a;a+=i)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cs(this),jy(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let f=a;f<i;f++)t[f]=0;Q8(r,i-8,BigInt(this.length*8),s),this.process(r,0);const o=cu(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)o.setUint32(4*f,l[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%t&&e.buffer.set(r),e}}const q8=(n,e,t)=>n&e^~n&t,J8=(n,e,t)=>n&e^n&t^e&t,Y8=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lr=new Uint32Array(64);class Z8 extends Gl{constructor(){super(64,32,8,!1),this.A=kr[0]|0,this.B=kr[1]|0,this.C=kr[2]|0,this.D=kr[3]|0,this.E=kr[4]|0,this.F=kr[5]|0,this.G=kr[6]|0,this.H=kr[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:a,G:o,H:c}=this;return[e,t,r,i,s,a,o,c]}set(e,t,r,i,s,a,o,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)Lr[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=Lr[f-15],p=Lr[f-2],y=Tn(d,7)^Tn(d,18)^d>>>3,h=Tn(p,17)^Tn(p,19)^p>>>10;Lr[f]=h+Lr[f-7]+y+Lr[f-16]|0}let{A:r,B:i,C:s,D:a,E:o,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const d=Tn(o,6)^Tn(o,11)^Tn(o,25),p=l+d+q8(o,c,u)+Y8[f]+Lr[f]|0,h=(Tn(r,2)^Tn(r,13)^Tn(r,22))+J8(r,i,s)|0;l=u,u=c,c=o,o=a+p|0,a=s,s=i,i=r,r=p+h|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,s,a,o,c,u,l)}roundClean(){Lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Rs=uu(()=>new Z8),fu=BigInt(2**32-1),Hl=BigInt(32);function Jy(n,e=!1){return e?{h:Number(n&fu),l:Number(n>>Hl&fu)}:{h:Number(n>>Hl&fu)|0,l:Number(n&fu)|0}}function Yy(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:a}=Jy(n[i],e);[t[i],r[i]]=[s,a]}return[t,r]}const X8=(n,e)=>BigInt(n>>>0)<<Hl|BigInt(e>>>0),e3=(n,e,t)=>n>>>t,t3=(n,e,t)=>n<<32-t|e>>>t,n3=(n,e,t)=>n>>>t|e<<32-t,r3=(n,e,t)=>n<<32-t|e>>>t,i3=(n,e,t)=>n<<64-t|e>>>t-32,s3=(n,e,t)=>n>>>t-32|e<<64-t,a3=(n,e)=>e,o3=(n,e)=>n,Zy=(n,e,t)=>n<<t|e>>>32-t,Xy=(n,e,t)=>e<<t|n>>>32-t,eb=(n,e,t)=>e<<t-32|n>>>64-t,tb=(n,e,t)=>n<<t-32|e>>>64-t;function c3(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const te={fromBig:Jy,split:Yy,toBig:X8,shrSH:e3,shrSL:t3,rotrSH:n3,rotrSL:r3,rotrBH:i3,rotrBL:s3,rotr32H:a3,rotr32L:o3,rotlSH:Zy,rotlSL:Xy,rotlBH:eb,rotlBL:tb,add:c3,add3L:(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),add3H:(n,e,t,r)=>e+t+r+(n/2**32|0)|0,add4L:(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),add4H:(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,add5H:(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,add5L:(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)},[u3,l3]=te.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Mr=new Uint32Array(80),Dr=new Uint32Array(80);class f3 extends Gl{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:l,Fh:f,Fl:d,Gh:p,Gl:y,Hh:h,Hl:m}=this;return[e,t,r,i,s,a,o,c,u,l,f,d,p,y,h,m]}set(e,t,r,i,s,a,o,c,u,l,f,d,p,y,h,m){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=y|0,this.Hh=h|0,this.Hl=m|0}process(e,t){for(let g=0;g<16;g++,t+=4)Mr[g]=e.getUint32(t),Dr[g]=e.getUint32(t+=4);for(let g=16;g<80;g++){const v=Mr[g-15]|0,S=Dr[g-15]|0,O=te.rotrSH(v,S,1)^te.rotrSH(v,S,8)^te.shrSH(v,S,7),R=te.rotrSL(v,S,1)^te.rotrSL(v,S,8)^te.shrSL(v,S,7),C=Mr[g-2]|0,_=Dr[g-2]|0,U=te.rotrSH(C,_,19)^te.rotrBH(C,_,61)^te.shrSH(C,_,6),D=te.rotrSL(C,_,19)^te.rotrBL(C,_,61)^te.shrSL(C,_,6),$=te.add4L(R,D,Dr[g-7],Dr[g-16]),H=te.add4H($,O,U,Mr[g-7],Mr[g-16]);Mr[g]=H|0,Dr[g]=$|0}let{Ah:r,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:p,Fl:y,Gh:h,Gl:m,Hh:x,Hl:w}=this;for(let g=0;g<80;g++){const v=te.rotrSH(f,d,14)^te.rotrSH(f,d,18)^te.rotrBH(f,d,41),S=te.rotrSL(f,d,14)^te.rotrSL(f,d,18)^te.rotrBL(f,d,41),O=f&p^~f&h,R=d&y^~d&m,C=te.add5L(w,S,R,l3[g],Dr[g]),_=te.add5H(C,x,v,O,u3[g],Mr[g]),U=C|0,D=te.rotrSH(r,i,28)^te.rotrBH(r,i,34)^te.rotrBH(r,i,39),$=te.rotrSL(r,i,28)^te.rotrBL(r,i,34)^te.rotrBL(r,i,39),H=r&s^r&o^s&o,G=i&a^i&c^a&c;x=h|0,w=m|0,h=p|0,m=y|0,p=f|0,y=d|0,{h:f,l:d}=te.add(u|0,l|0,_|0,U|0),u=o|0,l=c|0,o=s|0,c=a|0,s=r|0,a=i|0;const P=te.add3L(U,$,G);r=te.add3H(P,_,D,H),i=P|0}({h:r,l:i}=te.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:a}=te.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=te.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l}=te.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:d}=te.add(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:y}=te.add(this.Fh|0,this.Fl|0,p|0,y|0),{h,l:m}=te.add(this.Gh|0,this.Gl|0,h|0,m|0),{h:x,l:w}=te.add(this.Hh|0,this.Hl|0,x|0,w|0),this.set(r,i,s,a,o,c,u,l,f,d,p,y,h,m,x,w)}roundClean(){Mr.fill(0),Dr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const $l=uu(()=>new f3);function d3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const nb=d3(),rb=nb.crypto||nb.msCrypto;function p3(n){switch(n){case"sha256":return Rs.create();case"sha512":return $l.create()}E(!1,"invalid hashing algorithm name","algorithm",n)}function h3(n,e){const t={sha256:Rs,sha512:$l}[n];return E(t!=null,"invalid hmac algorithm","algorithm",n),lu.create(t,e)}function y3(n,e,t,r,i){const s={sha256:Rs,sha512:$l}[i];return E(s!=null,"invalid pbkdf2 algorithm","algorithm",i),Fl(s,n,e,{c:t,dkLen:r})}function b3(n){F(rb!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),E(Number.isInteger(n)&&n>0&&n<=1024,"invalid length","length",n);const e=new Uint8Array(n);return rb.getRandomValues(e),e}let ib=!1;const sb=function(n,e,t){return h3(n,e).update(t).digest()};let ab=sb;function Bs(n,e,t){const r=K(e,"key"),i=K(t,"data");return V(ab(n,r,i))}Bs._=sb,Bs.lock=function(){ib=!0},Bs.register=function(n){if(ib)throw new Error("computeHmac is locked");ab=n},Object.freeze(Bs);const[ob,cb,ub]=[[],[],[]],m3=BigInt(0),Eo=BigInt(1),x3=BigInt(2),g3=BigInt(7),w3=BigInt(256),A3=BigInt(113);for(let n=0,e=Eo,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],ob.push(2*(5*r+t)),cb.push((n+1)*(n+2)/2%64);let i=m3;for(let s=0;s<7;s++)e=(e<<Eo^(e>>g3)*A3)%w3,e&x3&&(i^=Eo<<(Eo<<BigInt(s))-Eo);ub.push(i)}const[v3,E3]=Yy(ub,!0),lb=(n,e,t)=>t>32?eb(n,e,t):Zy(n,e,t),fb=(n,e,t)=>t>32?tb(n,e,t):Xy(n,e,t);function T3(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)t[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=t[c],l=t[c+1],f=lb(u,l,1)^t[o],d=fb(u,l,1)^t[o+1];for(let p=0;p<50;p+=10)n[a+p]^=f,n[a+p+1]^=d}let i=n[2],s=n[3];for(let a=0;a<24;a++){const o=cb[a],c=lb(i,s,o),u=fb(i,s,o),l=ob[a];i=n[l],s=n[l+1],n[l]=c,n[l+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)t[o]=n[a+o];for(let o=0;o<10;o++)n[a+o]^=~t[(o+2)%10]&t[(o+4)%10]}n[0]^=v3[r],n[1]^=E3[r]}t.fill(0)}class Vl extends Ul{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Et(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ou(this.state)}keccak(){T3(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Cs(this);const{blockLen:t,state:r}=this;e=Ns(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(t-this.pos,i-s);for(let o=0;o<a;o++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Cs(this,!1),Ml(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Et(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(jy(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new Vl(t,r,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const P3=((n,e,t)=>uu(()=>new Vl(e,n,t)))(1,136,256/8);let db=!1;const pb=function(n){return P3(n)};let hb=pb;function de(n){const e=K(n,"data");return V(hb(e))}de._=pb,de.lock=function(){db=!0},de.register=function(n){if(db)throw new TypeError("keccak256 is locked");hb=n},Object.freeze(de);const S3=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),yb=Uint8Array.from({length:16},(n,e)=>e),I3=yb.map(n=>(9*n+5)%16);let zl=[yb],jl=[I3];for(let n=0;n<4;n++)for(let e of[zl,jl])e.push(e[n].map(t=>S3[t]));const bb=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),O3=zl.map((n,e)=>n.map(t=>bb[e][t])),C3=jl.map((n,e)=>n.map(t=>bb[e][t])),N3=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),R3=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),du=(n,e)=>n<<e|n>>>32-e;function mb(n,e,t,r){return n===0?e^t^r:n===1?e&t|~e&r:n===2?(e|~t)^r:n===3?e&r|t&~r:e^(t|~r)}const pu=new Uint32Array(16);class B3 extends Gl{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:i,h4:s}=this;return[e,t,r,i,s]}set(e,t,r,i,s){this.h0=e|0,this.h1=t|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let p=0;p<16;p++,t+=4)pu[p]=e.getUint32(t,!0);let r=this.h0|0,i=r,s=this.h1|0,a=s,o=this.h2|0,c=o,u=this.h3|0,l=u,f=this.h4|0,d=f;for(let p=0;p<5;p++){const y=4-p,h=N3[p],m=R3[p],x=zl[p],w=jl[p],g=O3[p],v=C3[p];for(let S=0;S<16;S++){const O=du(r+mb(p,s,o,u)+pu[x[S]]+h,g[S])+f|0;r=f,f=u,u=du(o,10)|0,o=s,s=O}for(let S=0;S<16;S++){const O=du(i+mb(y,a,c,l)+pu[w[S]]+m,v[S])+d|0;i=d,d=l,l=du(c,10)|0,c=a,a=O}}this.set(this.h1+o+l|0,this.h2+u+d|0,this.h3+f+i|0,this.h4+r+a|0,this.h0+s+c|0)}roundClean(){pu.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const _3=uu(()=>new B3);let xb=!1;const gb=function(n){return _3(n)};let wb=gb;function _s(n){const e=K(n,"data");return V(wb(e))}_s._=gb,_s.lock=function(){xb=!0},_s.register=function(n){if(xb)throw new TypeError("ripemd160 is locked");wb=n},Object.freeze(_s);let Ab=!1;const vb=function(n,e,t,r,i){return y3(n,e,t,r,i)};let Eb=vb;function Ur(n,e,t,r,i){const s=K(n,"password"),a=K(e,"salt");return V(Eb(s,a,t,r,i))}Ur._=vb,Ur.lock=function(){Ab=!0},Ur.register=function(n){if(Ab)throw new Error("pbkdf2 is locked");Eb=n},Object.freeze(Ur);let Tb=!1;const Pb=function(n){return new Uint8Array(b3(n))};let Sb=Pb;function ar(n){return Sb(n)}ar._=Pb,ar.lock=function(){Tb=!0},ar.register=function(n){if(Tb)throw new Error("randomBytes is locked");Sb=n},Object.freeze(ar);const pe=(n,e)=>n<<e|n>>>32-e;function Ib(n,e,t,r,i,s){let a=n[e++]^t[r++],o=n[e++]^t[r++],c=n[e++]^t[r++],u=n[e++]^t[r++],l=n[e++]^t[r++],f=n[e++]^t[r++],d=n[e++]^t[r++],p=n[e++]^t[r++],y=n[e++]^t[r++],h=n[e++]^t[r++],m=n[e++]^t[r++],x=n[e++]^t[r++],w=n[e++]^t[r++],g=n[e++]^t[r++],v=n[e++]^t[r++],S=n[e++]^t[r++],O=a,R=o,C=c,_=u,U=l,D=f,$=d,H=p,G=y,P=h,T=m,N=x,k=w,L=g,M=v,W=S;for(let Z=0;Z<8;Z+=2)U^=pe(O+k|0,7),G^=pe(U+O|0,9),k^=pe(G+U|0,13),O^=pe(k+G|0,18),P^=pe(D+R|0,7),L^=pe(P+D|0,9),R^=pe(L+P|0,13),D^=pe(R+L|0,18),M^=pe(T+$|0,7),C^=pe(M+T|0,9),$^=pe(C+M|0,13),T^=pe($+C|0,18),_^=pe(W+N|0,7),H^=pe(_+W|0,9),N^=pe(H+_|0,13),W^=pe(N+H|0,18),R^=pe(O+_|0,7),C^=pe(R+O|0,9),_^=pe(C+R|0,13),O^=pe(_+C|0,18),$^=pe(D+U|0,7),H^=pe($+D|0,9),U^=pe(H+$|0,13),D^=pe(U+H|0,18),N^=pe(T+P|0,7),G^=pe(N+T|0,9),P^=pe(G+N|0,13),T^=pe(P+G|0,18),k^=pe(W+M|0,7),L^=pe(k+W|0,9),M^=pe(L+k|0,13),W^=pe(M+L|0,18);i[s++]=a+O|0,i[s++]=o+R|0,i[s++]=c+C|0,i[s++]=u+_|0,i[s++]=l+U|0,i[s++]=f+D|0,i[s++]=d+$|0,i[s++]=p+H|0,i[s++]=y+G|0,i[s++]=h+P|0,i[s++]=m+T|0,i[s++]=x+N|0,i[s++]=w+k|0,i[s++]=g+L|0,i[s++]=v+M|0,i[s++]=S+W|0}function ks(n,e,t,r,i){let s=r+0,a=r+16*i;for(let o=0;o<16;o++)t[a+o]=n[e+(2*i-1)*16+o];for(let o=0;o<i;o++,s+=16,e+=16)Ib(t,a,n,e,t,s),o>0&&(a+=16),Ib(t,s,n,e+=16,t,a)}function Ob(n,e,t){const r=Qy({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:s,p:a,dkLen:o,asyncTick:c,maxmem:u,onProgress:l}=r;if(Et(i),Et(s),Et(a),Et(o),Et(c),Et(u),l!==void 0&&typeof l!="function")throw new Error("progressCb should be function");const f=128*s,d=f/4;if(i<=1||i&i-1||i>=2**(f/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(a<0||a>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(o<0||o>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const p=f*(i+a);if(p>u)throw new Error(`Scrypt: parameters too large, ${p} (128 * r * (N + p)) > ${u} (maxmem)`);const y=Fl(Rs,n,e,{c:1,dkLen:f*a}),h=ou(y),m=ou(new Uint8Array(f*i)),x=ou(new Uint8Array(f));let w=()=>{};if(l){const g=2*i*a,v=Math.max(Math.floor(g/1e4),1);let S=0;w=()=>{S++,l&&(!(S%v)||S===g)&&l(S/g)}}return{N:i,r:s,p:a,dkLen:o,blockSize32:d,V:m,B32:h,B:y,tmp:x,blockMixCb:w,asyncTick:c}}function Cb(n,e,t,r,i){const s=Fl(Rs,n,t,{c:1,dkLen:e});return t.fill(0),r.fill(0),i.fill(0),s}function k3(n,e,t){const{N:r,r:i,p:s,dkLen:a,blockSize32:o,V:c,B32:u,B:l,tmp:f,blockMixCb:d}=Ob(n,e,t);for(let p=0;p<s;p++){const y=o*p;for(let h=0;h<o;h++)c[h]=u[y+h];for(let h=0,m=0;h<r-1;h++)ks(c,m,c,m+=o,i),d();ks(c,(r-1)*o,u,y,i),d();for(let h=0;h<r;h++){const m=u[y+o-16]%r;for(let x=0;x<o;x++)f[x]=u[y+x]^c[m*o+x];ks(f,0,u,y,i),d()}}return Cb(n,a,l,c,f)}async function L3(n,e,t){const{N:r,r:i,p:s,dkLen:a,blockSize32:o,V:c,B32:u,B:l,tmp:f,blockMixCb:d,asyncTick:p}=Ob(n,e,t);for(let y=0;y<s;y++){const h=o*y;for(let x=0;x<o;x++)c[x]=u[h+x];let m=0;await Ky(r-1,p,()=>{ks(c,m,c,m+=o,i),d()}),ks(c,(r-1)*o,u,h,i),d(),await Ky(r,p,()=>{const x=u[h+o-16]%r;for(let w=0;w<o;w++)f[w]=u[h+w]^c[x*o+w];ks(f,0,u,h,i),d()})}return Cb(n,a,l,c,f)}let Nb=!1,Rb=!1;const Bb=async function(n,e,t,r,i,s,a){return await L3(n,e,{N:t,r,p:i,dkLen:s,onProgress:a})},_b=function(n,e,t,r,i,s){return k3(n,e,{N:t,r,p:i,dkLen:s})};let kb=Bb,Lb=_b;async function Ls(n,e,t,r,i,s,a){const o=K(n,"passwd"),c=K(e,"salt");return V(await kb(o,c,t,r,i,s,a))}Ls._=Bb,Ls.lock=function(){Rb=!0},Ls.register=function(n){if(Rb)throw new Error("scrypt is locked");kb=n},Object.freeze(Ls);function Ms(n,e,t,r,i,s){const a=K(n,"passwd"),o=K(e,"salt");return V(Lb(a,o,t,r,i,s))}Ms._=_b,Ms.lock=function(){Nb=!0},Ms.register=function(n){if(Nb)throw new Error("scryptSync is locked");Lb=n},Object.freeze(Ms);const Mb=function(n){return p3("sha256").update(n).digest()};let Db=Mb,Ub=!1;function Ut(n){const e=K(n,"data");return V(Db(e))}Ut._=Mb,Ut.lock=function(){Ub=!0},Ut.register=function(n){if(Ub)throw new Error("sha256 is locked");Db=n},Object.freeze(Ut),Object.freeze(Ut);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fb=BigInt(0),hu=BigInt(1),M3=BigInt(2),yu=n=>n instanceof Uint8Array,D3=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ds(n){if(!yu(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=D3[n[t]];return e}function Gb(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function Wl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Us(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[r]=a}return t}function Ei(n){return Wl(Ds(n))}function Kl(n){if(!yu(n))throw new Error("Uint8Array expected");return Wl(Ds(Uint8Array.from(n).reverse()))}function Fs(n,e){return Us(n.toString(16).padStart(e*2,"0"))}function Ql(n,e){return Fs(n,e).reverse()}function U3(n){return Us(Gb(n))}function on(n,e,t){let r;if(typeof e=="string")try{r=Us(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(yu(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function To(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!yu(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function F3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function G3(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function H3(n){let e;for(e=0;n>Fb;n>>=hu,e+=1);return e}function $3(n,e){return n>>BigInt(e)&hu}const V3=(n,e,t)=>n|(t?hu:Fb)<<BigInt(e),ql=n=>(M3<<BigInt(n-1))-hu,Jl=n=>new Uint8Array(n),Hb=n=>Uint8Array.from(n);function $b(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Jl(n),i=Jl(n),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=(...f)=>t(i,r,...f),c=(f=Jl())=>{i=o(Hb([0]),f),r=o(),f.length!==0&&(i=o(Hb([1]),f),r=o())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<e;){r=o();const p=r.slice();d.push(p),f+=r.length}return To(...d)};return(f,d)=>{a(),c(f);let p;for(;!(p=d(u()));)c();return a(),p}}const z3={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Po(n,e,t={}){const r=(i,s,a)=>{const o=z3[s];if(typeof o!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=n[i];if(!(a&&c===void 0)&&!o(c,n))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const j3=Object.freeze(Object.defineProperty({__proto__:null,bitGet:$3,bitLen:H3,bitMask:ql,bitSet:V3,bytesToHex:Ds,bytesToNumberBE:Ei,bytesToNumberLE:Kl,concatBytes:To,createHmacDrbg:$b,ensureBytes:on,equalBytes:F3,hexToBytes:Us,hexToNumber:Wl,numberToBytesBE:Fs,numberToBytesLE:Ql,numberToHexUnpadded:Gb,numberToVarBytesBE:U3,utf8ToBytes:G3,validateObject:Po},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ue=BigInt(0),Oe=BigInt(1),Ti=BigInt(2),W3=BigInt(3),Yl=BigInt(4),Vb=BigInt(5),zb=BigInt(8);BigInt(9),BigInt(16);function bt(n,e){const t=n%e;return t>=Ue?t:e+t}function K3(n,e,t){if(t<=Ue||e<Ue)throw new Error("Expected power/modulo > 0");if(t===Oe)return Ue;let r=Oe;for(;e>Ue;)e&Oe&&(r=r*n%t),n=n*n%t,e>>=Oe;return r}function Ft(n,e,t){let r=n;for(;e-- >Ue;)r*=r,r%=t;return r}function Zl(n,e){if(n===Ue||e<=Ue)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=bt(n,e),r=e,i=Ue,s=Oe;for(;t!==Ue;){const o=r/t,c=r%t,u=i-s*o;r=t,t=c,i=s,s=u}if(r!==Oe)throw new Error("invert: does not exist");return bt(i,e)}function Q3(n){const e=(n-Oe)/Ti;let t,r,i;for(t=n-Oe,r=0;t%Ti===Ue;t/=Ti,r++);for(i=Ti;i<n&&K3(i,e,n)!==n-Oe;i++);if(r===1){const a=(n+Oe)/Yl;return function(c,u){const l=c.pow(u,a);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const s=(t+Oe)/Ti;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,l=o.pow(o.mul(o.ONE,i),t),f=o.pow(c,s),d=o.pow(c,t);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let p=1;for(let h=o.sqr(d);p<u&&!o.eql(h,o.ONE);p++)h=o.sqr(h);const y=o.pow(l,Oe<<BigInt(u-p-1));l=o.sqr(y),f=o.mul(f,y),d=o.mul(d,l),u=p}return f}}function q3(n){if(n%Yl===W3){const e=(n+Oe)/Yl;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%zb===Vb){const e=(n-Vb)/zb;return function(r,i){const s=r.mul(i,Ti),a=r.pow(s,e),o=r.mul(i,a),c=r.mul(r.mul(o,Ti),a),u=r.mul(o,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return Q3(n)}const J3=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y3(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=J3.reduce((r,i)=>(r[i]="function",r),e);return Po(n,t)}function Z3(n,e,t){if(t<Ue)throw new Error("Expected power > 0");if(t===Ue)return n.ONE;if(t===Oe)return e;let r=n.ONE,i=e;for(;t>Ue;)t&Oe&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Oe;return r}function X3(n,e){const t=new Array(e.length),r=e.reduce((s,a,o)=>n.is0(a)?s:(t[o]=s,n.mul(s,a)),n.ONE),i=n.inv(r);return e.reduceRight((s,a,o)=>n.is0(a)?s:(t[o]=n.mul(s,t[o]),n.mul(s,a)),i),t}function jb(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function eA(n,e,t=!1,r={}){if(n<=Ue)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=jb(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=q3(n),o=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:ql(i),ZERO:Ue,ONE:Oe,create:c=>bt(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ue<=c&&c<n},is0:c=>c===Ue,isOdd:c=>(c&Oe)===Oe,neg:c=>bt(-c,n),eql:(c,u)=>c===u,sqr:c=>bt(c*c,n),add:(c,u)=>bt(c+u,n),sub:(c,u)=>bt(c-u,n),mul:(c,u)=>bt(c*u,n),pow:(c,u)=>Z3(o,c,u),div:(c,u)=>bt(c*Zl(u,n),n),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Zl(c,n),sqrt:r.sqrt||(c=>a(o,c)),invertBatch:c=>X3(o,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>t?Ql(c,s):Fs(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?Kl(c):Ei(c)}});return Object.freeze(o)}function Wb(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Kb(n){const e=Wb(n);return e+Math.ceil(e/2)}function tA(n,e,t=!1){const r=n.length,i=Wb(e),s=Kb(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const a=t?Ei(n):Kl(n),o=bt(a,e-Oe)+Oe;return t?Ql(o,i):Fs(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nA=BigInt(0),Xl=BigInt(1);function rA(n,e){const t=(i,s)=>{const a=s.negate();return i?a:s},r=i=>{const s=Math.ceil(e/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:t,unsafeLadder(i,s){let a=n.ZERO,o=i;for(;s>nA;)s&Xl&&(a=a.add(o)),o=o.double(),s>>=Xl;return a},precomputeWindow(i,s){const{windows:a,windowSize:o}=r(s),c=[];let u=i,l=u;for(let f=0;f<a;f++){l=u,c.push(l);for(let d=1;d<o;d++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(i,s,a){const{windows:o,windowSize:c}=r(i);let u=n.ZERO,l=n.BASE;const f=BigInt(2**i-1),d=2**i,p=BigInt(i);for(let y=0;y<o;y++){const h=y*c;let m=Number(a&f);a>>=p,m>c&&(m-=d,a+=Xl);const x=h,w=h+Math.abs(m)-1,g=y%2!==0,v=m<0;m===0?l=l.add(t(g,s[x])):u=u.add(t(v,s[w]))}return{p:u,f:l}},wNAFCached(i,s,a,o){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,o(u))),this.wNAF(c,u,a)}}}function Qb(n){return Y3(n.Fp),Po(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jb(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iA(n){const e=Qb(n);Po(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:sA,hexToBytes:aA}=j3,Pi={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Pi;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:sA(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Pi,t=typeof n=="string"?aA(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Pi._parseInt(t.subarray(2)),{d:a,l:o}=Pi._parseInt(s);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(n){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const l=u.toString(16);return l.length&1?`0${l}`:l},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,a=i.length/2,o=t(s),c=t(a);return`30${t(a+s+4)}02${c}${i}02${o}${r}`}},or=BigInt(0),Gt=BigInt(1);BigInt(2);const qb=BigInt(3);BigInt(4);function oA(n){const e=iA(n),{Fp:t}=e,r=e.toBytes||((y,h,m)=>{const x=h.toAffine();return To(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=e.fromBytes||(y=>{const h=y.subarray(1),m=t.fromBytes(h.subarray(0,t.BYTES)),x=t.fromBytes(h.subarray(t.BYTES,2*t.BYTES));return{x:m,y:x}});function s(y){const{a:h,b:m}=e,x=t.sqr(y),w=t.mul(x,y);return t.add(t.add(w,t.mul(y,h)),m)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function a(y){return typeof y=="bigint"&&or<y&&y<e.n}function o(y){if(!a(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){const{allowedPrivateKeyLengths:h,nByteLength:m,wrapPrivateKey:x,n:w}=e;if(h&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=Ds(y)),typeof y!="string"||!h.includes(y.length))throw new Error("Invalid key");y=y.padStart(m*2,"0")}let g;try{g=typeof y=="bigint"?y:Ei(on("private key",y,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof y}`)}return x&&(g=bt(g,w)),o(g),g}const u=new Map;function l(y){if(!(y instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(h,m,x){if(this.px=h,this.py=m,this.pz=x,h==null||!t.isValid(h))throw new Error("x required");if(m==null||!t.isValid(m))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(h){const{x:m,y:x}=h||{};if(!h||!t.isValid(m)||!t.isValid(x))throw new Error("invalid affine point");if(h instanceof f)throw new Error("projective point not allowed");const w=g=>t.eql(g,t.ZERO);return w(m)&&w(x)?f.ZERO:new f(m,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const m=t.invertBatch(h.map(x=>x.pz));return h.map((x,w)=>x.toAffine(m[w])).map(f.fromAffine)}static fromHex(h){const m=f.fromAffine(i(on("pointHex",h)));return m.assertValidity(),m}static fromPrivateKey(h){return f.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y:m}=this.toAffine();if(!t.isValid(h)||!t.isValid(m))throw new Error("bad point: x or y not FE");const x=t.sqr(m),w=s(h);if(!t.eql(x,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(t.isOdd)return!t.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){l(h);const{px:m,py:x,pz:w}=this,{px:g,py:v,pz:S}=h,O=t.eql(t.mul(m,S),t.mul(g,w)),R=t.eql(t.mul(x,S),t.mul(v,w));return O&&R}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){const{a:h,b:m}=e,x=t.mul(m,qb),{px:w,py:g,pz:v}=this;let S=t.ZERO,O=t.ZERO,R=t.ZERO,C=t.mul(w,w),_=t.mul(g,g),U=t.mul(v,v),D=t.mul(w,g);return D=t.add(D,D),R=t.mul(w,v),R=t.add(R,R),S=t.mul(h,R),O=t.mul(x,U),O=t.add(S,O),S=t.sub(_,O),O=t.add(_,O),O=t.mul(S,O),S=t.mul(D,S),R=t.mul(x,R),U=t.mul(h,U),D=t.sub(C,U),D=t.mul(h,D),D=t.add(D,R),R=t.add(C,C),C=t.add(R,C),C=t.add(C,U),C=t.mul(C,D),O=t.add(O,C),U=t.mul(g,v),U=t.add(U,U),C=t.mul(U,D),S=t.sub(S,C),R=t.mul(U,_),R=t.add(R,R),R=t.add(R,R),new f(S,O,R)}add(h){l(h);const{px:m,py:x,pz:w}=this,{px:g,py:v,pz:S}=h;let O=t.ZERO,R=t.ZERO,C=t.ZERO;const _=e.a,U=t.mul(e.b,qb);let D=t.mul(m,g),$=t.mul(x,v),H=t.mul(w,S),G=t.add(m,x),P=t.add(g,v);G=t.mul(G,P),P=t.add(D,$),G=t.sub(G,P),P=t.add(m,w);let T=t.add(g,S);return P=t.mul(P,T),T=t.add(D,H),P=t.sub(P,T),T=t.add(x,w),O=t.add(v,S),T=t.mul(T,O),O=t.add($,H),T=t.sub(T,O),C=t.mul(_,P),O=t.mul(U,H),C=t.add(O,C),O=t.sub($,C),C=t.add($,C),R=t.mul(O,C),$=t.add(D,D),$=t.add($,D),H=t.mul(_,H),P=t.mul(U,P),$=t.add($,H),H=t.sub(D,H),H=t.mul(_,H),P=t.add(P,H),D=t.mul($,P),R=t.add(R,D),D=t.mul(T,P),O=t.mul(G,O),O=t.sub(O,D),D=t.mul(G,$),C=t.mul(T,C),C=t.add(C,D),new f(O,R,C)}subtract(h){return this.add(h.negate())}is0(){return this.equals(f.ZERO)}wNAF(h){return p.wNAFCached(this,u,h,m=>{const x=t.invertBatch(m.map(w=>w.pz));return m.map((w,g)=>w.toAffine(x[g])).map(f.fromAffine)})}multiplyUnsafe(h){const m=f.ZERO;if(h===or)return m;if(o(h),h===Gt)return this;const{endo:x}=e;if(!x)return p.unsafeLadder(this,h);let{k1neg:w,k1:g,k2neg:v,k2:S}=x.splitScalar(h),O=m,R=m,C=this;for(;g>or||S>or;)g&Gt&&(O=O.add(C)),S&Gt&&(R=R.add(C)),C=C.double(),g>>=Gt,S>>=Gt;return w&&(O=O.negate()),v&&(R=R.negate()),R=new f(t.mul(R.px,x.beta),R.py,R.pz),O.add(R)}multiply(h){o(h);let m=h,x,w;const{endo:g}=e;if(g){const{k1neg:v,k1:S,k2neg:O,k2:R}=g.splitScalar(m);let{p:C,f:_}=this.wNAF(S),{p:U,f:D}=this.wNAF(R);C=p.constTimeNegate(v,C),U=p.constTimeNegate(O,U),U=new f(t.mul(U.px,g.beta),U.py,U.pz),x=C.add(U),w=_.add(D)}else{const{p:v,f:S}=this.wNAF(m);x=v,w=S}return f.normalizeZ([x,w])[0]}multiplyAndAddUnsafe(h,m,x){const w=f.BASE,g=(S,O)=>O===or||O===Gt||!S.equals(w)?S.multiplyUnsafe(O):S.multiply(O),v=g(this,m).add(g(h,x));return v.is0()?void 0:v}toAffine(h){const{px:m,py:x,pz:w}=this,g=this.is0();h==null&&(h=g?t.ONE:t.inv(w));const v=t.mul(m,h),S=t.mul(x,h),O=t.mul(w,h);if(g)return{x:t.ZERO,y:t.ZERO};if(!t.eql(O,t.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}isTorsionFree(){const{h,isTorsionFree:m}=e;if(h===Gt)return!0;if(m)return m(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:m}=e;return h===Gt?this:m?m(f,this):this.multiplyUnsafe(e.h)}toRawBytes(h=!0){return this.assertValidity(),r(f,this,h)}toHex(h=!0){return Ds(this.toRawBytes(h))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);const d=e.nBitLength,p=rA(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function cA(n){const e=Qb(n);return Po(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function uA(n){const e=cA(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function a(P){return or<P&&P<t.ORDER}function o(P){return bt(P,r)}function c(P){return Zl(P,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:f,isWithinCurveOrder:d}=oA({...e,toBytes(P,T,N){const k=T.toAffine(),L=t.toBytes(k.x),M=To;return N?M(Uint8Array.from([T.hasEvenY()?2:3]),L):M(Uint8Array.from([4]),L,t.toBytes(k.y))},fromBytes(P){const T=P.length,N=P[0],k=P.subarray(1);if(T===i&&(N===2||N===3)){const L=Ei(k);if(!a(L))throw new Error("Point is not on curve");const M=f(L);let W=t.sqrt(M);const Z=(W&Gt)===Gt;return(N&1)===1!==Z&&(W=t.neg(W)),{x:L,y:W}}else if(T===s&&N===4){const L=t.fromBytes(k.subarray(0,t.BYTES)),M=t.fromBytes(k.subarray(t.BYTES,2*t.BYTES));return{x:L,y:M}}else throw new Error(`Point of length ${T} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),p=P=>Ds(Fs(P,e.nByteLength));function y(P){const T=r>>Gt;return P>T}function h(P){return y(P)?o(-P):P}const m=(P,T,N)=>Ei(P.slice(T,N));class x{constructor(T,N,k){this.r=T,this.s=N,this.recovery=k,this.assertValidity()}static fromCompact(T){const N=e.nByteLength;return T=on("compactSignature",T,N*2),new x(m(T,0,N),m(T,N,2*N))}static fromDER(T){const{r:N,s:k}=Pi.toSig(on("DER",T));return new x(N,k)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(T){return new x(this.r,this.s,T)}recoverPublicKey(T){const{r:N,s:k,recovery:L}=this,M=R(on("msgHash",T));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const W=L===2||L===3?N+e.n:N;if(W>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=L&1?"03":"02",le=u.fromHex(Z+p(W)),ie=c(W),J=o(-M*ie),X=o(k*ie),Pe=u.BASE.multiplyAndAddUnsafe(le,J,X);if(!Pe)throw new Error("point at infinify");return Pe.assertValidity(),Pe}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Us(this.toDERHex())}toDERHex(){return Pi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Us(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey(P){try{return l(P),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const P=Kb(e.n);return tA(e.randomBytes(P),e.n)},precompute(P=8,T=u.BASE){return T._setWindowSize(P),T.multiply(BigInt(3)),T}};function g(P,T=!0){return u.fromPrivateKey(P).toRawBytes(T)}function v(P){const T=P instanceof Uint8Array,N=typeof P=="string",k=(T||N)&&P.length;return T?k===i||k===s:N?k===2*i||k===2*s:P instanceof u}function S(P,T,N=!0){if(v(P))throw new Error("first arg must be private key");if(!v(T))throw new Error("second arg must be public key");return u.fromHex(T).multiply(l(P)).toRawBytes(N)}const O=e.bits2int||function(P){const T=Ei(P),N=P.length*8-e.nBitLength;return N>0?T>>BigInt(N):T},R=e.bits2int_modN||function(P){return o(O(P))},C=ql(e.nBitLength);function _(P){if(typeof P!="bigint")throw new Error("bigint expected");if(!(or<=P&&P<C))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Fs(P,e.nByteLength)}function U(P,T,N=D){if(["recovered","canonical"].some(Me=>Me in N))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:L}=e;let{lowS:M,prehash:W,extraEntropy:Z}=N;M==null&&(M=!0),P=on("msgHash",P),W&&(P=on("prehashed msgHash",k(P)));const le=R(P),ie=l(T),J=[_(ie),_(le)];if(Z!=null){const Me=Z===!0?L(t.BYTES):Z;J.push(on("extraEntropy",Me))}const X=To(...J),Pe=le;function en(Me){const Ve=O(Me);if(!d(Ve))return;const xn=c(Ve),Ye=u.BASE.multiply(Ve).toAffine(),ge=o(Ye.x);if(ge===or)return;const ke=o(xn*o(Pe+ge*ie));if(ke===or)return;let vt=(Ye.x===ge?0:2)|Number(Ye.y&Gt),lt=ke;return M&&y(ke)&&(lt=h(ke),vt^=1),new x(ge,lt,vt)}return{seed:X,k2sig:en}}const D={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function H(P,T,N=D){const{seed:k,k2sig:L}=U(P,T,N),M=e;return $b(M.hash.outputLen,M.nByteLength,M.hmac)(k,L)}u.BASE._setWindowSize(8);function G(P,T,N,k=$){var Ye;const L=P;if(T=on("msgHash",T),N=on("publicKey",N),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:W}=k;let Z,le;try{if(typeof L=="string"||L instanceof Uint8Array)try{Z=x.fromDER(L)}catch(ge){if(!(ge instanceof Pi.Err))throw ge;Z=x.fromCompact(L)}else if(typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint"){const{r:ge,s:ke}=L;Z=new x(ge,ke)}else throw new Error("PARSE");le=u.fromHex(N)}catch(ge){if(ge.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&Z.hasHighS())return!1;W&&(T=e.hash(T));const{r:ie,s:J}=Z,X=R(T),Pe=c(J),en=o(X*Pe),Me=o(ie*Pe),Ve=(Ye=u.BASE.multiplyAndAddUnsafe(le,en,Me))==null?void 0:Ye.toAffine();return Ve?o(Ve.x)===ie:!1}return{CURVE:e,getPublicKey:g,getSharedSecret:S,sign:H,verify:G,ProjectivePoint:u,Signature:x,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lA(n){return{hash:n,hmac:(e,...t)=>lu(n,e,V8(...t)),randomBytes:j8}}function fA(n,e){const t=r=>uA({...n,...lA(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),dA=BigInt(1),ef=BigInt(2),Zb=(n,e)=>(n+e/ef)/e;function pA(n){const e=Jb,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),u=n*n*n%e,l=u*u*n%e,f=Ft(l,t,e)*l%e,d=Ft(f,t,e)*l%e,p=Ft(d,ef,e)*u%e,y=Ft(p,i,e)*p%e,h=Ft(y,s,e)*y%e,m=Ft(h,o,e)*h%e,x=Ft(m,c,e)*m%e,w=Ft(x,o,e)*h%e,g=Ft(w,t,e)*l%e,v=Ft(g,a,e)*y%e,S=Ft(v,r,e)*u%e,O=Ft(S,ef,e);if(!tf.eql(tf.sqr(O),n))throw new Error("Cannot find square root");return O}const tf=eA(Jb,void 0,void 0,{sqrt:pA}),Fr=fA({a:BigInt(0),b:BigInt(7),Fp:tf,n:Yb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=Yb,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-dA*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),o=Zb(s*n,e),c=Zb(-r*n,e);let u=bt(n-o*t-c*i,e),l=bt(-o*r-c*s,e);const f=u>a,d=l>a;if(f&&(u=e-u),d&&(l=e-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:u,k2neg:d,k2:l}}}},Rs);BigInt(0),Fr.ProjectivePoint;const So="0x0000000000000000000000000000000000000000",Xb="0x0000000000000000000000000000000000000000000000000000000000000000",hA=`Ethereum Signed Message:
`,em=BigInt(0),tm=BigInt(1),nm=BigInt(2),rm=BigInt(27),im=BigInt(28),bu=BigInt(35),Gs={};function sm(n){return Dt(Ee(n),32)}const pn=class pn{constructor(e,t,r,i){B(this,ha);B(this,kn);B(this,ya);B(this,Ji);Ai(e,Gs,"Signature"),A(this,ha,t),A(this,kn,r),A(this,ya,i),A(this,Ji,null)}get r(){return b(this,ha)}set r(e){E(tr(e)===32,"invalid r","value",e),A(this,ha,V(e))}get s(){return E(parseInt(b(this,kn).substring(0,3))<8,"non-canonical s; use ._s","s",b(this,kn)),b(this,kn)}set s(e){E(tr(e)===32,"invalid s","value",e),A(this,kn,V(e))}get _s(){return b(this,kn)}isValid(){return parseInt(b(this,kn).substring(0,3))<8}get v(){return b(this,ya)}set v(e){const t=ee(e,"value");E(t===27||t===28,"invalid v","v",e),A(this,ya,t)}get networkV(){return b(this,Ji)}get legacyChainId(){const e=this.networkV;return e==null?null:pn.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=K(this.s);return this.yParity&&(e[0]|=128),V(e)}get compactSerialized(){return fe([this.r,this.yParityAndS])}get serialized(){return fe([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new pn(Gs,this.r,this._s,this.v);return this.networkV&&A(e,Ji,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Q(e,"v");return t==rm||t==im?em:(E(t>=bu,"invalid EIP-155 v","v",e),(t-bu)/nm)}static getChainIdV(e,t){return Q(e)*nm+BigInt(35+t-27)}static getNormalizedV(e){const t=Q(e);return t===em||t===rm?27:t===tm||t===im?28:(E(t>=bu,"invalid v","v",e),t&tm?27:28)}static from(e){function t(u,l){E(u,l,"signature",e)}if(e==null)return new pn(Gs,Xb,Xb,27);if(typeof e=="string"){const u=K(e,"signature");if(u.length===64){const l=V(u.slice(0,32)),f=u.slice(32,64),d=f[0]&128?28:27;return f[0]&=127,new pn(Gs,l,V(f),d)}if(u.length===65){const l=V(u.slice(0,32)),f=V(u.slice(32,64)),d=pn.getNormalizedV(u[64]);return new pn(Gs,l,f,d)}t(!1,"invalid raw signature length")}if(e instanceof pn)return e.clone();const r=e.r;t(r!=null,"missing r");const i=sm(r),s=function(u,l){if(u!=null)return sm(u);if(l!=null){t(xe(l,32),"invalid yParityAndS");const f=K(l);return f[0]&=127,V(f)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:a,v:o}=function(u,l,f){if(u!=null){const d=Q(u);return{networkV:d>=bu?d:void 0,v:pn.getNormalizedV(d)}}if(l!=null)return t(xe(l,32),"invalid yParityAndS"),{v:K(l)[0]&128?28:27};if(f!=null){switch(ee(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new pn(Gs,i,s,o);return a&&A(c,Ji,a),t(e.yParity==null||ee(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};ha=new WeakMap,kn=new WeakMap,ya=new WeakMap,Ji=new WeakMap;let mt=pn;const Yi=class Yi{constructor(e){B(this,wr);E(tr(e)===32,"invalid private key","privateKey","[REDACTED]"),A(this,wr,V(e))}get privateKey(){return b(this,wr)}get publicKey(){return Yi.computePublicKey(b(this,wr))}get compressedPublicKey(){return Yi.computePublicKey(b(this,wr),!0)}sign(e){E(tr(e)===32,"invalid digest length","digest",e);const t=Fr.sign(je(e),je(b(this,wr)),{lowS:!0});return mt.from({r:nr(t.r,32),s:nr(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Yi.computePublicKey(e);return V(Fr.getSharedSecret(je(b(this,wr)),K(t),!1))}static computePublicKey(e,t){let r=K(e,"key");if(r.length===32){const s=Fr.getPublicKey(r,!!t);return V(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Fr.ProjectivePoint.fromHex(r);return V(i.toRawBytes(t))}static recoverPublicKey(e,t){E(tr(e)===32,"invalid digest length","digest",e);const r=mt.from(t);let i=Fr.Signature.fromCompact(je(fe([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(je(e));return E(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){const i=Fr.ProjectivePoint.fromHex(Yi.computePublicKey(e).substring(2)),s=Fr.ProjectivePoint.fromHex(Yi.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}};wr=new WeakMap;let Pn=Yi;const yA=BigInt(0),bA=BigInt(36);function am(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=K(de(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const nf={};for(let n=0;n<10;n++)nf[String(n)]=String(n);for(let n=0;n<26;n++)nf[String.fromCharCode(65+n)]=String(10+n);const om=15;function mA(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>nf[r]).join("");for(;e.length>=om;){let r=e.substring(0,om);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const xA=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function gA(n){n=n.toLowerCase();let e=yA;for(let t=0;t<n.length;t++)e=e*bA+xA[n[t]];return e}function ae(n){if(E(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=am(n);return E(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){E(n.substring(2,4)===mA(n),"bad icap checksum","address",n);let e=gA(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return am("0x"+e)}E(!1,"invalid address","address",n)}function wA(n){const e=ae(n.from);let r=Q(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,ae(we(de(ir([e,r])),12))}function cm(n){return n&&typeof n.getAddress=="function"}async function rf(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(F(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),E(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),ae(t)}function Fe(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?ae(n):(F(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),rf(n,e.resolveName(n)));if(cm(n))return rf(n,n.getAddress());if(n&&typeof n.then=="function")return rf(n,n);E(!1,"unsupported addressable value","target",n)}const cr={};function q(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new et(cr,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function he(n,e){return new et(cr,`bytes${e||""}`,n,{size:e})}const um=Symbol.for("_ethers_typed"),Ar=class Ar{constructor(e,t,r,i){I(this,"type");I(this,"value");B(this,Zi);I(this,"_typedSymbol");i==null&&(i=null),Ai(cr,e,"Typed"),Y(this,{_typedSymbol:um,type:t,value:r}),A(this,Zi,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return b(this,Zi)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return b(this,Zi)===!0?-1:b(this,Zi)===!1?this.value.length:null}static from(e,t){return new Ar(cr,e,t)}static uint8(e){return q(e,8)}static uint16(e){return q(e,16)}static uint24(e){return q(e,24)}static uint32(e){return q(e,32)}static uint40(e){return q(e,40)}static uint48(e){return q(e,48)}static uint56(e){return q(e,56)}static uint64(e){return q(e,64)}static uint72(e){return q(e,72)}static uint80(e){return q(e,80)}static uint88(e){return q(e,88)}static uint96(e){return q(e,96)}static uint104(e){return q(e,104)}static uint112(e){return q(e,112)}static uint120(e){return q(e,120)}static uint128(e){return q(e,128)}static uint136(e){return q(e,136)}static uint144(e){return q(e,144)}static uint152(e){return q(e,152)}static uint160(e){return q(e,160)}static uint168(e){return q(e,168)}static uint176(e){return q(e,176)}static uint184(e){return q(e,184)}static uint192(e){return q(e,192)}static uint200(e){return q(e,200)}static uint208(e){return q(e,208)}static uint216(e){return q(e,216)}static uint224(e){return q(e,224)}static uint232(e){return q(e,232)}static uint240(e){return q(e,240)}static uint248(e){return q(e,248)}static uint256(e){return q(e,256)}static uint(e){return q(e,256)}static int8(e){return q(e,-8)}static int16(e){return q(e,-16)}static int24(e){return q(e,-24)}static int32(e){return q(e,-32)}static int40(e){return q(e,-40)}static int48(e){return q(e,-48)}static int56(e){return q(e,-56)}static int64(e){return q(e,-64)}static int72(e){return q(e,-72)}static int80(e){return q(e,-80)}static int88(e){return q(e,-88)}static int96(e){return q(e,-96)}static int104(e){return q(e,-104)}static int112(e){return q(e,-112)}static int120(e){return q(e,-120)}static int128(e){return q(e,-128)}static int136(e){return q(e,-136)}static int144(e){return q(e,-144)}static int152(e){return q(e,-152)}static int160(e){return q(e,-160)}static int168(e){return q(e,-168)}static int176(e){return q(e,-176)}static int184(e){return q(e,-184)}static int192(e){return q(e,-192)}static int200(e){return q(e,-200)}static int208(e){return q(e,-208)}static int216(e){return q(e,-216)}static int224(e){return q(e,-224)}static int232(e){return q(e,-232)}static int240(e){return q(e,-240)}static int248(e){return q(e,-248)}static int256(e){return q(e,-256)}static int(e){return q(e,-256)}static bytes1(e){return he(e,1)}static bytes2(e){return he(e,2)}static bytes3(e){return he(e,3)}static bytes4(e){return he(e,4)}static bytes5(e){return he(e,5)}static bytes6(e){return he(e,6)}static bytes7(e){return he(e,7)}static bytes8(e){return he(e,8)}static bytes9(e){return he(e,9)}static bytes10(e){return he(e,10)}static bytes11(e){return he(e,11)}static bytes12(e){return he(e,12)}static bytes13(e){return he(e,13)}static bytes14(e){return he(e,14)}static bytes15(e){return he(e,15)}static bytes16(e){return he(e,16)}static bytes17(e){return he(e,17)}static bytes18(e){return he(e,18)}static bytes19(e){return he(e,19)}static bytes20(e){return he(e,20)}static bytes21(e){return he(e,21)}static bytes22(e){return he(e,22)}static bytes23(e){return he(e,23)}static bytes24(e){return he(e,24)}static bytes25(e){return he(e,25)}static bytes26(e){return he(e,26)}static bytes27(e){return he(e,27)}static bytes28(e){return he(e,28)}static bytes29(e){return he(e,29)}static bytes30(e){return he(e,30)}static bytes31(e){return he(e,31)}static bytes32(e){return he(e,32)}static address(e){return new Ar(cr,"address",e)}static bool(e){return new Ar(cr,"bool",!!e)}static bytes(e){return new Ar(cr,"bytes",e)}static string(e){return new Ar(cr,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Ar(cr,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===um}static dereference(e,t){if(Ar.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Zi=new WeakMap;let et=Ar;class AA extends sr{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=et.dereference(t,"string");try{r=ae(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return ae(nr(e.readValue(),20))}}class vA extends sr{constructor(t){super(t.name,t.type,"_",t.dynamic);I(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function lm(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let c={};r=e.map(u=>{const l=u.localName;return F(l,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),F(!c[l],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),c[l]=!0,t[l]})}else E(!1,"invalid tuple value","tuple",t);E(e.length===r.length,"types/value length mismatch","tuple",t);let i=new kl,s=new kl,a=[];e.forEach((c,u)=>{let l=r[u];if(c.dynamic){let f=s.length;c.encode(s,l);let d=i.writeUpdatableValue();a.push(p=>{d(p+f)})}else c.encode(i,l)}),a.forEach(c=>{c(i.length)});let o=n.appendWriter(i);return o+=n.appendWriter(s),o}function fm(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(s=>{let a=null;if(s.dynamic){let o=n.readIndex(),c=i.subReader(o);try{a=s.decode(c)}catch(u){if(ze(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(n)}catch(o){if(ze(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}if(a==null)throw new Error("investigate");t.push(a),r.push(s.localName||null)}),Os.fromItems(t,r)}class EA extends sr{constructor(t,r,i){const s=t.type+"["+(r>=0?r:"")+"]",a=r===-1||t.dynamic;super("array",s,i,a);I(this,"coder");I(this,"length");Y(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){const i=et.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),gy(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<i.length;o++)a.push(this.coder);return lm(t,a,i)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),F(r*at<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*at,length:t.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new vA(this.coder));return fm(t,i)}}class TA extends sr{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=et.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class dm extends sr{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=je(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class PA extends dm{constructor(e){super("bytes",e)}decode(e){return V(super.decode(e))}}class SA extends sr{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1);I(this,"size");Y(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=je(et.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return V(t.readBytes(this.size))}}const IA=new Uint8Array([]);class OA extends sr{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(IA)}decode(e){return e.readBytes(0),null}}const CA=BigInt(0),NA=BigInt(1),RA=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class BA extends sr{constructor(t,r,i){const s=(r?"int":"uint")+t*8;super(s,s,i,!1);I(this,"size");I(this,"signed");Y(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let i=Q(et.dereference(r,this.type)),s=wo(RA,at*8);if(this.signed){let a=wo(s,this.size*8-1);(i>a||i<-(a+NA))&&this._throwError("value out-of-bounds",r),i=Cl(i,8*at)}else(i<CA||i>wo(s,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(i)}decode(t){let r=wo(t.readValue(),this.size*8);return this.signed&&(r=g8(r,this.size*8)),r}}class _A extends dm{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Xe(et.dereference(t,"string")))}decode(e){return ru(super.decode(e))}}class mu extends sr{constructor(t,r){let i=!1;const s=[];t.forEach(o=>{o.dynamic&&(i=!0),s.push(o.type)});const a="tuple("+s.join(",")+")";super("tuple",a,r,i);I(this,"coders");Y(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const a=s.localName;return a&&(i[a]||(i[a]=0),i[a]++),i},{});return this.coders.forEach((i,s)=>{let a=i.localName;!a||r[a]!==1||(a==="length"&&(a="_length"),t[a]==null&&(t[a]=t[s]))}),Object.freeze(t)}encode(t,r){const i=et.dereference(r,"tuple");return lm(t,this.coders,i)}decode(t){return fm(t,this.coders)}}function sf(n,e){return{address:ae(n),storageKeys:e.map((t,r)=>(E(xe(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function Si(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(E(t.length===2,"invalid slot set",`value[${r}]`,t),sf(t[0],t[1])):(E(t!=null&&typeof t=="object","invalid address-slot set","value",n),sf(t.address,t.storageKeys)));E(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return sf(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function pm(n){return{address:ae(n.address),nonce:Q(n.nonce!=null?n.nonce:0),chainId:Q(n.chainId!=null?n.chainId:0),signature:mt.from(n.signature)}}function Io(n){let e;return typeof n=="string"?e=Pn.computePublicKey(n,!1):e=n.publicKey,ae(de("0x"+e.substring(4)).substring(26))}function kA(n,e){return Io(Pn.recoverPublicKey(n,e))}const Ge=BigInt(0),LA=BigInt(2),MA=BigInt(27),DA=BigInt(28),UA=BigInt(35),FA=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),af=4096*32;function GA(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return K(n.blobToKzgCommitment(V(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return K(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return K(n.blobToKZGCommitment(V(r)));E(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return K(n.computeBlobProof(V(r),V(i)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return K(n.computeBlobKZGProof(V(r),V(i)));E(!1,"unsupported KZG library","kzg",n)}}}function hm(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Ut(e).substring(4),"0x"+t}function Hs(n){return n==="0x"?null:ae(n)}function xu(n,e){try{return Si(n)}catch(t){E(!1,t.message,e,n)}}function HA(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const i=n[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:Hs(i[1]),nonce:me(i[2],"nonce"),chainId:me(i[0],"chainId"),signature:mt.from({yParity:Ii(i[3],"yParity"),r:Dt(i[4],32),s:Dt(i[5],32)})})}return t}catch(t){E(!1,t.message,e,n)}}function Ii(n,e){return n==="0x"?0:ee(n,e)}function me(n,e){if(n==="0x")return Ge;const t=Q(n,e);return E(t<=FA,"value exceeds uint size",e,t),t}function ce(n,e){const t=Q(n,"value"),r=Ee(t);return E(r.length<=32,"value too large",`tx.${e}`,t),r}function gu(n){return Si(n).map(e=>[e.address,e.storageKeys])}function $A(n){return n.map(e=>[ce(e.chainId,"chainId"),e.address,ce(e.nonce,"nonce"),ce(e.signature.yParity,"yParity"),Ee(e.signature.r),Ee(e.signature.s)])}function VA(n,e){E(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)E(xe(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function zA(n){const e=Ao(n);E(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:Ii(e[0],"nonce"),gasPrice:me(e[1],"gasPrice"),gasLimit:me(e[2],"gasLimit"),to:Hs(e[3]),value:me(e[4],"value"),data:V(e[5]),chainId:Ge};if(e.length===6)return t;const r=me(e[6],"v"),i=me(e[7],"r"),s=me(e[8],"s");if(i===Ge&&s===Ge)t.chainId=r;else{let a=(r-UA)/LA;a<Ge&&(a=Ge),t.chainId=a,E(a!==Ge||r===MA||r===DA,"non-canonical legacy v","v",e[6]),t.signature=mt.from({r:Dt(e[7],32),s:Dt(e[8],32),v:r})}return t}function jA(n,e){const t=[ce(n.nonce,"nonce"),ce(n.gasPrice||0,"gasPrice"),ce(n.gasLimit,"gasLimit"),n.to||"0x",ce(n.value,"value"),n.data];let r=Ge;if(n.chainId!=Ge)r=Q(n.chainId,"tx.chainId"),E(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const s=n.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Ge&&(t.push(Ee(r)),t.push("0x"),t.push("0x")),ir(t);let i=BigInt(27+e.yParity);return r!==Ge?i=mt.getChainIdV(r,e.v):BigInt(e.v)!==i&&E(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Ee(i)),t.push(Ee(e.r)),t.push(Ee(e.s)),ir(t)}function wu(n,e){let t;try{if(t=Ii(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{E(!1,"invalid yParity","yParity",e[0])}const r=Dt(e[1],32),i=Dt(e[2],32),s=mt.from({r,s:i,yParity:t});n.signature=s}function WA(n){const e=Ao(K(n).slice(1));E(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",V(n));const t={type:2,chainId:me(e[0],"chainId"),nonce:Ii(e[1],"nonce"),maxPriorityFeePerGas:me(e[2],"maxPriorityFeePerGas"),maxFeePerGas:me(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:me(e[4],"gasLimit"),to:Hs(e[5]),value:me(e[6],"value"),data:V(e[7]),accessList:xu(e[8],"accessList")};return e.length===9||wu(t,e.slice(9)),t}function KA(n,e){const t=[ce(n.chainId,"chainId"),ce(n.nonce,"nonce"),ce(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ce(n.maxFeePerGas||0,"maxFeePerGas"),ce(n.gasLimit,"gasLimit"),n.to||"0x",ce(n.value,"value"),n.data,gu(n.accessList||[])];return e&&(t.push(ce(e.yParity,"yParity")),t.push(Ee(e.r)),t.push(Ee(e.s))),fe(["0x02",ir(t)])}function QA(n){const e=Ao(K(n).slice(1));E(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",V(n));const t={type:1,chainId:me(e[0],"chainId"),nonce:Ii(e[1],"nonce"),gasPrice:me(e[2],"gasPrice"),gasLimit:me(e[3],"gasLimit"),to:Hs(e[4]),value:me(e[5],"value"),data:V(e[6]),accessList:xu(e[7],"accessList")};return e.length===8||wu(t,e.slice(8)),t}function qA(n,e){const t=[ce(n.chainId,"chainId"),ce(n.nonce,"nonce"),ce(n.gasPrice||0,"gasPrice"),ce(n.gasLimit,"gasLimit"),n.to||"0x",ce(n.value,"value"),n.data,gu(n.accessList||[])];return e&&(t.push(ce(e.yParity,"recoveryParam")),t.push(Ee(e.r)),t.push(Ee(e.s))),fe(["0x01",ir(t)])}function JA(n){let e=Ao(K(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],a=e[2],o=e[3];E(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),E(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),E(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),E(s.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),E(s.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:s[c],commitment:a[c],proof:o[c]});e=e[0]}E(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",V(n));const i={type:3,chainId:me(e[0],"chainId"),nonce:Ii(e[1],"nonce"),maxPriorityFeePerGas:me(e[2],"maxPriorityFeePerGas"),maxFeePerGas:me(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:me(e[4],"gasLimit"),to:Hs(e[5]),value:me(e[6],"value"),data:V(e[7]),accessList:xu(e[8],"accessList"),maxFeePerBlobGas:me(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),E(i.to!=null,`invalid address for transaction type: ${t}`,"data",n),E(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let s=0;s<i.blobVersionedHashes.length;s++)E(xe(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",n);return e.length===11||wu(i,e.slice(11)),i}function YA(n,e,t){const r=[ce(n.chainId,"chainId"),ce(n.nonce,"nonce"),ce(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ce(n.maxFeePerGas||0,"maxFeePerGas"),ce(n.gasLimit,"gasLimit"),n.to||So,ce(n.value,"value"),n.data,gu(n.accessList||[]),ce(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),VA(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(ce(e.yParity,"yParity")),r.push(Ee(e.r)),r.push(Ee(e.s)),t)?fe(["0x03",ir([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):fe(["0x03",ir(r)])}function ZA(n){const e=Ao(K(n).slice(1));E(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",V(n));const t={type:4,chainId:me(e[0],"chainId"),nonce:Ii(e[1],"nonce"),maxPriorityFeePerGas:me(e[2],"maxPriorityFeePerGas"),maxFeePerGas:me(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:me(e[4],"gasLimit"),to:Hs(e[5]),value:me(e[6],"value"),data:V(e[7]),accessList:xu(e[8],"accessList"),authorizationList:HA(e[9],"authorizationList")};return e.length===10||wu(t,e.slice(10)),t}function XA(n,e){const t=[ce(n.chainId,"chainId"),ce(n.nonce,"nonce"),ce(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ce(n.maxFeePerGas||0,"maxFeePerGas"),ce(n.gasLimit,"gasLimit"),n.to||"0x",ce(n.value,"value"),n.data,gu(n.accessList||[]),$A(n.authorizationList||[])];return e&&(t.push(ce(e.yParity,"yParity")),t.push(Ee(e.r)),t.push(Ee(e.s))),fe(["0x04",ir(t)])}const Mn=class Mn{constructor(){B(this,Oa);B(this,hn);B(this,ba);B(this,ma);B(this,xa);B(this,ga);B(this,wa);B(this,Aa);B(this,va);B(this,Ea);B(this,Ta);B(this,Pa);B(this,Sa);B(this,Xi);B(this,Kr);B(this,Ln);B(this,Qr);B(this,Ia);A(this,hn,null),A(this,ba,null),A(this,xa,0),A(this,ga,Ge),A(this,wa,null),A(this,Aa,null),A(this,va,null),A(this,ma,"0x"),A(this,Ea,Ge),A(this,Ta,Ge),A(this,Pa,null),A(this,Sa,null),A(this,Xi,null),A(this,Kr,null),A(this,Ln,null),A(this,Qr,null),A(this,Ia,null)}get type(){return b(this,hn)}set type(e){switch(e){case null:A(this,hn,null);break;case 0:case"legacy":A(this,hn,0);break;case 1:case"berlin":case"eip-2930":A(this,hn,1);break;case 2:case"london":case"eip-1559":A(this,hn,2);break;case 3:case"cancun":case"eip-4844":A(this,hn,3);break;case 4:case"pectra":case"eip-7702":A(this,hn,4);break;default:E(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=b(this,ba);return e==null&&this.type===3?So:e}set to(e){A(this,ba,e==null?null:ae(e))}get nonce(){return b(this,xa)}set nonce(e){A(this,xa,ee(e,"value"))}get gasLimit(){return b(this,ga)}set gasLimit(e){A(this,ga,Q(e))}get gasPrice(){const e=b(this,wa);return e==null&&(this.type===0||this.type===1)?Ge:e}set gasPrice(e){A(this,wa,e==null?null:Q(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=b(this,Aa);return e??(this.type===2||this.type===3?Ge:null)}set maxPriorityFeePerGas(e){A(this,Aa,e==null?null:Q(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=b(this,va);return e??(this.type===2||this.type===3?Ge:null)}set maxFeePerGas(e){A(this,va,e==null?null:Q(e,"maxFeePerGas"))}get data(){return b(this,ma)}set data(e){A(this,ma,V(e))}get value(){return b(this,Ea)}set value(e){A(this,Ea,Q(e,"value"))}get chainId(){return b(this,Ta)}set chainId(e){A(this,Ta,Q(e))}get signature(){return b(this,Pa)||null}set signature(e){A(this,Pa,e==null?null:mt.from(e))}get accessList(){const e=b(this,Sa)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){A(this,Sa,e==null?null:Si(e))}get authorizationList(){const e=b(this,Ia)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){A(this,Ia,e==null?null:e.map(t=>pm(t)))}get maxFeePerBlobGas(){const e=b(this,Xi);return e==null&&this.type===3?Ge:e}set maxFeePerBlobGas(e){A(this,Xi,e==null?null:Q(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=b(this,Kr);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){E(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)E(xe(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}A(this,Kr,e)}get blobs(){return b(this,Qr)==null?null:b(this,Qr).map(e=>Object.assign({},e))}set blobs(e){if(e==null){A(this,Qr,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(Yc(s)){F(b(this,Ln),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=K(s);if(E(a.length<=af,"blob is too large",`blobs[${i}]`,s),a.length!==af){const u=new Uint8Array(af);u.set(a),a=u}const o=b(this,Ln).blobToKzgCommitment(a),c=V(b(this,Ln).computeBlobKzgProof(a,o));t.push({data:V(a),commitment:V(o),proof:c}),r.push(hm(1,o))}else{const a=V(s.commitment);t.push({data:V(s.data),commitment:a,proof:V(s.proof)}),r.push(hm(1,a))}}A(this,Qr,t),A(this,Kr,r)}get kzg(){return b(this,Ln)}set kzg(e){e==null?A(this,Ln,null):A(this,Ln,GA(e))}get hash(){return this.signature==null?null:de(z(this,Oa,o0).call(this,!0,!1))}get unsignedHash(){return de(this.unsignedSerialized)}get from(){return this.signature==null?null:kA(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Pn.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return z(this,Oa,o0).call(this,!0,!0)}get unsignedSerialized(){return z(this,Oa,o0).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=b(this,Xi)!=null||b(this,Kr);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&F(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),F(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),F(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Mn.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Mn;if(typeof e=="string"){const r=K(e);if(r[0]>=127)return Mn.from(zA(r));switch(r[0]){case 1:return Mn.from(QA(r));case 2:return Mn.from(WA(r));case 3:return Mn.from(JA(r));case 4:return Mn.from(ZA(r))}F(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Mn;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=mt.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(E(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),E(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(E(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),E(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};hn=new WeakMap,ba=new WeakMap,ma=new WeakMap,xa=new WeakMap,ga=new WeakMap,wa=new WeakMap,Aa=new WeakMap,va=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,Sa=new WeakMap,Xi=new WeakMap,Kr=new WeakMap,Ln=new WeakMap,Qr=new WeakMap,Ia=new WeakMap,Oa=new WeakSet,o0=function(e,t){F(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return jA(this,r);case 1:return qA(this,r);case 2:return KA(this,r);case 3:return YA(this,r,t?this.blobs:null);case 4:return XA(this,r)}F(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Oo=Mn;function e4(n){return E(typeof n.address=="string","invalid address for hashAuthorization","auth.address",n),de(fe(["0x05",ir([n.chainId!=null?Ee(n.chainId):"0x",ae(n.address),n.nonce!=null?Ee(n.nonce):"0x"])]))}function Sn(n){return de(Xe(n))}var t4="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const ym=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),bm=4;function n4(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let S=1;S<r;S++)s.push(i+=t());let a=t(),o=e;e+=a;let c=0,u=0;function l(){return c==0&&(u=u<<8|n[e++],c=8),u>>--c&1}const f=31,d=2**f,p=d>>>1,y=p>>1,h=d-1;let m=0;for(let S=0;S<f;S++)m=m<<1|l();let x=[],w=0,g=d;for(;;){let S=Math.floor(((m-w+1)*i-1)/g),O=0,R=r;for(;R-O>1;){let U=O+R>>>1;S<s[U]?R=U:O=U}if(O==0)break;x.push(O);let C=w+Math.floor(g*s[O]/i),_=w+Math.floor(g*s[O+1]/i)-1;for(;!((C^_)&p);)m=m<<1&h|l(),C=C<<1&h,_=_<<1&h|1;for(;C&~_&y;)m=m&p|m<<1&h>>>1|l(),C=C<<1^p,_=(_^p)<<1|p|1;w=C,g=1+_-C}let v=r-4;return x.map(S=>{switch(S-v){case 3:return v+65792+(n[o++]<<16|n[o++]<<8|n[o++]);case 2:return v+256+(n[o++]<<8|n[o++]);case 1:return v+n[o++];default:return S-1}})}function r4(n){let e=0;return()=>n[e++]}function mm(n){return r4(n4(i4(n)))}function i4(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,a=0,o=0;i<t;i++)o=o<<6|e[n.charCodeAt(i)],a+=6,a>=8&&(r[s++]=o>>(a-=8));return r}function s4(n){return n&1?~n>>1:n>>1}function a4(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=s4(e());return t}function Co(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function xm(n){return No(()=>{let e=Co(n);if(e.length)return e})}function gm(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(o4(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(c4(t,n))}return e.flat()}function No(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function wm(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)a4(n,t).forEach((s,a)=>r[a].push(s));return r}function o4(n,e){let t=1+e(),r=e(),i=No(e);return wm(i.length,1+n,e).flatMap((a,o)=>{let[c,...u]=a;return Array(i[o]).fill().map((l,f)=>{let d=f*r;return[c+f*t,u.map(p=>p+d)]})})}function c4(n,e){let t=1+e();return wm(t,1+n,e).map(i=>[i[0],i.slice(1)])}function u4(n){let e=[],t=Co(n);return i(r([]),[]),e;function r(s){let a=n(),o=No(()=>{let c=Co(n).map(u=>t[u]);if(c.length)return r(c)});return{S:a,B:o,Q:s}}function i({S:s,B:a},o,c){if(!(s&4&&c===o[o.length-1])){s&2&&(c=o[o.length-1]),s&1&&e.push(o);for(let u of a)for(let l of u.Q)i(u,[...o,l],c)}}}function l4(n){return n.toString(16).toUpperCase().padStart(2,"0")}function Am(n){return`{${l4(n)}}`}function f4(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function $s(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function d4(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var p4="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Ro=44032,Au=4352,vu=4449,Eu=4519,vm=19,Em=21,Vs=28,Tu=Em*Vs,h4=vm*Tu,y4=Ro+h4,b4=Au+vm,m4=vu+Em,x4=Eu+Vs;function Bo(n){return n>>24&255}function Tm(n){return n&16777215}let of,Pm,cf,Pu;function g4(){let n=mm(p4);of=new Map(xm(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),Pm=new Set(Co(n)),cf=new Map,Pu=new Map;for(let[e,t]of gm(n)){if(!Pm.has(e)&&t.length==2){let[r,i]=t,s=Pu.get(r);s||(s=new Map,Pu.set(r,s)),s.set(i,e)}cf.set(e,t.reverse())}}function Sm(n){return n>=Ro&&n<y4}function w4(n,e){if(n>=Au&&n<b4&&e>=vu&&e<m4)return Ro+(n-Au)*Tu+(e-vu)*Vs;if(Sm(n)&&e>Eu&&e<x4&&(n-Ro)%Vs==0)return n+(e-Eu);{let t=Pu.get(n);return t&&(t=t.get(e),t)?t:-1}}function Im(n){of||g4();let e=[],t=[],r=!1;function i(s){let a=of.get(s);a&&(r=!0,s|=a),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(Sm(s)){let a=s-Ro,o=a/Tu|0,c=a%Tu/Vs|0,u=a%Vs;i(Au+o),i(vu+c),u>0&&i(Eu+u)}else{let a=cf.get(s);a?t.push(...a):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=Bo(e[0]);for(let a=1;a<e.length;a++){let o=Bo(e[a]);if(o==0||s<=o){s=o;continue}let c=a-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(s=Bo(e[--c]),s<=o))break}s=Bo(e[a])}}return e}function A4(n){let e=[],t=[],r=-1,i=0;for(let s of n){let a=Bo(s),o=Tm(s);if(r==-1)a==0?r=o:e.push(o);else if(i>0&&i>=a)a==0?(e.push(r,...t),t.length=0,r=o):t.push(o),i=a;else{let c=w4(r,o);c>=0?r=c:i==0&&a==0?(e.push(r),r=o):(t.push(o),i=a)}}return r>=0&&e.push(r,...t),e}function Om(n){return Im(n).map(Tm)}function v4(n){return A4(Im(n))}const Cm=45,Nm=".",Rm=65039,Bm=1,Su=n=>Array.from(n);function _o(n,e){return n.P.has(e)||n.Q.has(e)}class E4 extends Array{get is_emoji(){return!0}}let uf,_m,Oi,lf,km,zs,ff,js,Ci,Lm,df;function pf(){if(uf)return;let n=mm(t4);const e=()=>Co(n),t=()=>new Set(e()),r=(l,f)=>f.forEach(d=>l.add(d));uf=new Map(gm(n)),_m=t(),Oi=e(),lf=new Set(e().map(l=>Oi[l])),Oi=new Set(Oi),km=t(),t();let i=xm(n),s=n();const a=()=>{let l=new Set;return e().forEach(f=>r(l,i[f])),r(l,e()),l};zs=No(l=>{let f=No(n).map(d=>d+96);if(f.length){let d=l>=s;f[0]-=32,f=$s(f),d&&(f=`Restricted[${f}]`);let p=a(),y=a(),h=!n();return{N:f,P:p,Q:y,M:h,R:d}}}),ff=t(),js=new Map;let o=e().concat(Su(ff)).sort((l,f)=>l-f);o.forEach((l,f)=>{let d=n(),p=o[f]=d?o[f-d]:{V:[],M:new Map};p.V.push(l),ff.has(l)||js.set(l,p)});for(let{V:l,M:f}of new Set(js.values())){let d=[];for(let y of l){let h=zs.filter(x=>_o(x,y)),m=d.find(({G:x})=>h.some(w=>x.has(w)));m||(m={G:new Set,V:[]},d.push(m)),m.V.push(y),r(m.G,h)}let p=d.flatMap(y=>Su(y.G));for(let{G:y,V:h}of d){let m=new Set(p.filter(x=>!y.has(x)));for(let x of h)f.set(x,m)}}Ci=new Set;let c=new Set;const u=l=>Ci.has(l)?c.add(l):Ci.add(l);for(let l of zs){for(let f of l.P)u(f);for(let f of l.Q)u(f)}for(let l of Ci)!js.has(l)&&!c.has(l)&&js.set(l,Bm);r(Ci,Om(Ci)),Lm=u4(n).map(l=>E4.from(l)).sort(d4),df=new Map;for(let l of Lm){let f=[df];for(let d of l){let p=f.map(y=>{let h=y.get(d);return h||(h=new Map,y.set(d,h)),h});d===Rm?f.push(...p):f=p}for(let d of f)d.V=l}}function hf(n){return(Mm(n)?"":`${yf(Iu([n]))} `)+Am(n)}function yf(n){return`"${n}"`}function T4(n){if(n.length>=4&&n[2]==Cm&&n[3]==Cm)throw new Error(`invalid label extension: "${$s(n.slice(0,4))}"`)}function P4(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function S4(n){let e=n[0],t=ym.get(e);if(t)throw ko(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let a=ym.get(e);if(a){if(i==s)throw ko(`${t} + ${a}`);i=s+1,t=a}}if(i==r)throw ko(`trailing ${t}`)}function Iu(n,e=1/0,t=Am){let r=[];I4(n[0])&&r.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let a=0;a<s;a++){let o=n[a];Mm(o)&&(r.push($s(n.slice(i,a))),r.push(t(o)),i=a+1)}return r.push($s(n.slice(i,s))),r.join("")}function I4(n){return pf(),Oi.has(n)}function Mm(n){return pf(),km.has(n)}function O4(n){return B4(C4(n,v4,L4))}function C4(n,e,t){if(!n)return[];pf();let r=0;return n.split(Nm).map(i=>{let s=f4(i),a={input:s,offset:r};r+=s.length+1;try{let o=a.tokens=k4(s,e,t),c=o.length,u;if(!c)throw new Error("empty label");let l=a.output=o.flat();if(P4(l),!(a.emoji=c>1||o[0].is_emoji)&&l.every(d=>d<128))T4(l),u="ASCII";else{let d=o.flatMap(p=>p.is_emoji?[]:p);if(!d.length)u="Emoji";else{if(Oi.has(l[0]))throw ko("leading combining mark");for(let h=1;h<c;h++){let m=o[h];if(!m.is_emoji&&Oi.has(m[0]))throw ko(`emoji + combining mark: "${$s(o[h-1])} + ${Iu([m[0]])}"`)}S4(l);let p=Su(new Set(d)),[y]=R4(p);_4(y,d),N4(y,p),u=y.N}}a.type=u}catch(o){a.error=o}return a})}function N4(n,e){let t,r=[];for(let i of e){let s=js.get(i);if(s===Bm)return;if(s){let a=s.M.get(i);if(t=t?t.filter(o=>a.has(o)):Su(a),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>_o(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function R4(n){let e=zs;for(let t of n){let r=e.filter(i=>_o(i,t));if(!r.length)throw zs.some(i=>_o(i,t))?Um(e[0],t):Dm(t);if(e=r,r.length==1)break}return e}function B4(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${yf(Iu(e,63))}: ${i}`)}return $s(r)}).join(Nm)}function Dm(n){return new Error(`disallowed character: ${hf(n)}`)}function Um(n,e){let t=hf(e),r=zs.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function ko(n){return new Error(`illegal placement: ${n}`)}function _4(n,e){for(let t of e)if(!_o(n,t))throw Um(n,t);if(n.M){let t=Om(e);for(let r=1,i=t.length;r<i;r++)if(lf.has(t[r])){let s=r+1;for(let a;s<i&&lf.has(a=t[s]);s++)for(let o=r;o<s;o++)if(t[o]==a)throw new Error(`duplicate non-spacing marks: ${hf(a)}`);if(s-r>bm)throw new Error(`excessive non-spacing marks: ${yf(Iu(t.slice(r-1,s)))} (${s-r}/${bm})`);r=s}}}function k4(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=M4(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let a=n.pop();if(Ci.has(a))i.push(a);else{let o=uf.get(a);if(o)i.push(...o);else if(!_m.has(a))throw Dm(a)}}}return i.length&&r.push(e(i)),r}function L4(n){return n.filter(e=>e!=Rm)}function M4(n,e){let t=df,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,n.length=i)}return r}const Fm=new Uint8Array(32);Fm.fill(0);function Gm(n){return E(n.length!==0,"invalid ENS name; empty component","comp",n),n}function Hm(n){const e=Xe(D4(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(Gm(e.slice(r,i))),r=i+1);return E(r<e.length,"invalid ENS name; empty component","name",n),t.push(Gm(e.slice(r))),t}function D4(n){try{if(n.length===0)throw new Error("empty label");return O4(n)}catch(e){E(!1,`invalid ENS name (${e.message})`,"name",n)}}function bf(n){E(typeof n=="string","invalid ENS name; not a string","name",n),E(n.length,"invalid ENS name (empty label)","name",n);let e=Fm;const t=Hm(n);for(;t.length;)e=de(fe([e,de(t.pop())]));return V(e)}function U4(n,e){const t=e;return E(t<=255,"DNS encoded label cannot exceed 255","length",t),V(fe(Hm(n).map(r=>{E(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function $m(n){return typeof n=="string"&&(n=Xe(n)),de(fe([Xe(hA),Xe(String(n.length)),n]))}const F4=new RegExp("^bytes([0-9]+)$"),G4=new RegExp("^(u?int)([0-9]*)$"),H4=new RegExp("^(.*)\\[([0-9]*)\\]$");function Vm(n,e,t){switch(n){case"address":return K(t?Dt(e,32):ae(e));case"string":return Xe(e);case"bytes":return K(e);case"bool":return e=e?"0x01":"0x00",K(t?Dt(e,32):e)}let r=n.match(G4);if(r){let i=r[1]==="int",s=parseInt(r[2]||"256");return E((!r[2]||r[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",n),t&&(s=256),i&&(e=Cl(e,s)),K(Dt(Ee(e),s/8))}if(r=n.match(F4),r){const i=parseInt(r[1]);return E(String(i)===r[1]&&i!==0&&i<=32,"invalid bytes type","type",n),E(tr(e)===i,`invalid value for ${n}`,"value",e),t?K(Ty(e,32)):e}if(r=n.match(H4),r&&Array.isArray(e)){const i=r[1],s=parseInt(r[2]||String(e.length));E(s===e.length,`invalid array length for ${n}`,"value",e);const a=[];return e.forEach(function(o){a.push(Vm(i,o,!0))}),K(fe(a))}E(!1,"invalid type","type",n)}function ur(n,e){E(n.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const t=[];return n.forEach(function(r,i){t.push(Vm(r,e[i]))}),V(fe(t))}function zm(n,e){return de(ur(n,e))}const jm=new Uint8Array(32);jm.fill(0);const $4=BigInt(-1),Wm=BigInt(0),Km=BigInt(1),V4=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function z4(n){const e=K(n),t=e.length%32;return t?fe([e,jm.slice(t)]):V(e)}const j4=nr(Km,32),W4=nr(Wm,32),Qm={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},mf=["name","version","chainId","verifyingContract","salt"];function qm(n){return function(e){return E(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const K4={name:qm("name"),version:qm("version"),chainId:function(n){const e=Q(n,"domain.chainId");return E(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):an(e)},verifyingContract:function(n){try{return ae(n).toLowerCase()}catch{}E(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=K(n,"domain.salt");return E(e.length===32,'invalid domain value "salt"',"domain.salt",n),V(e)}};function xf(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);E(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=wo(V4,t?r-1:r),s=t?(i+Km)*$4:Wm;return function(a){const o=Q(a,"value");return E(o>=s&&o<=i,`value out-of-bounds for ${n}`,"value",o),nr(t?Cl(o,256):o,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return E(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=K(r);return E(i.length===t,`invalid length for ${n}`,"value",r),z4(r)}}}switch(n){case"address":return function(e){return Dt(ae(e),32)};case"bool":return function(e){return e?j4:W4};case"bytes":return function(e){return de(e)};case"string":return function(e){return Sn(e)}}return null}function Jm(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function Ou(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}const Qt=class Qt{constructor(e){B(this,Xu);I(this,"primaryType");B(this,nc);B(this,vr);B(this,Ca);A(this,vr,new Map),A(this,Ca,new Map);const t=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:u,type:l})=>{let{base:f,index:d}=Ou(l);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:u,type:f+(d||"")}}),t.set(c,new Set),r.set(c,[]),i.set(c,new Set)}),A(this,nc,JSON.stringify(s));for(const c in s){const u=new Set;for(const l of s[c]){E(!u.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(c)}`,"types",e),u.add(l.name);const f=Ou(l.type).base;E(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!xf(f)&&(E(r.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),r.get(f).push(c),t.get(c).add(f))}}const a=Array.from(r.keys()).filter(c=>r.get(c).length===0);E(a.length!==0,"missing primary type","types",e),E(a.length===1,`ambiguous primary types or unused types: ${a.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Y(this,{primaryType:a[0]});function o(c,u){E(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const l of t.get(c))if(r.has(l)){o(l,u);for(const f of u)i.get(f).add(l)}u.delete(c)}o(this.primaryType,new Set);for(const[c,u]of i){const l=Array.from(u);l.sort(),b(this,vr).set(c,Jm(c,s[c])+l.map(f=>Jm(f,s[f])).join(""))}}get types(){return JSON.parse(b(this,nc))}getEncoder(e){let t=b(this,Ca).get(e);return t||(t=z(this,Xu,v1).call(this,e),b(this,Ca).set(e,t)),t}encodeType(e){const t=b(this,vr).get(e);return E(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return de(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(xf(e))return r(e,t);const i=Ou(e).array;if(i)return E(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(a=>this._visit(i.prefix,a,r));const s=this.types[e];if(s)return s.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,t[o],r),a),{});E(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Qt(e)}static getPrimaryType(e){return Qt.from(e).primaryType}static hashStruct(e,t,r){return Qt.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=Qm[r];E(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>mf.indexOf(r.name)-mf.indexOf(i.name)),Qt.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return fe(["0x1901",Qt.hashDomain(e),Qt.from(t).hash(r)])}static hash(e,t,r){return de(Qt.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const o in e)e[o]==null&&delete e[o];const s={};e.verifyingContract&&!xe(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=Qt.from(t);a.visit(r,(o,c)=>(o==="address"&&!xe(c,20)&&(s[c]="0x"),c));for(const o in s)s[o]=await i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=a.visit(r,(o,c)=>o==="address"&&s[c]?s[c]:c),{domain:e,value:r}}static getPayload(e,t,r){Qt.hashDomain(e);const i={},s=[];mf.forEach(c=>{const u=e[c];u!=null&&(i[c]=K4[c](u),s.push({name:c,type:Qm[c]}))});const a=Qt.from(t);t=a.types;const o=Object.assign({},t);return E(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=s,a.encode(r),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(r,(c,u)=>{if(c.match(/^bytes(\d*)/))return V(K(u));if(c.match(/^u?int/))return Q(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return E(typeof u=="string","invalid string","value",u),u}E(!1,"unsupported type","type",c)})}}};nc=new WeakMap,vr=new WeakMap,Ca=new WeakMap,Xu=new WeakSet,v1=function(e){{const i=xf(e);if(i)return i}const t=Ou(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return a=>{E(t.count===-1||t.count===a.length,`array length mismatch; expected length ${t.count}`,"value",a);let o=a.map(s);return b(this,vr).has(i)&&(o=o.map(de)),de(fe(o))}}const r=this.types[e];if(r){const i=Sn(b(this,vr).get(e));return s=>{const a=r.map(({name:o,type:c})=>{const u=this.getEncoder(c)(s[o]);return b(this,vr).has(c)?de(u):u});return a.unshift(i),fe(a)}}E(!1,`unknown type: ${e}`,"type",e)};let Gr=Qt;function ot(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const Q4=ot("external public payable override".split(" ")),Ym="constant external internal payable private public pure view override",q4=ot(Ym.split(" ")),Zm="constructor error event fallback function receive struct",Xm=ot(Zm.split(" ")),ex="calldata memory storage payable indexed",J4=ot(ex.split(" ")),Y4=[Zm,ex,"tuple returns",Ym].join(" "),Z4=ot(Y4.split(" ")),X4={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},e9=new RegExp("^(\\s*)"),t9=new RegExp("^([0-9]+)"),n9=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),tx=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),nx=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),e0=class e0{constructor(e){B(this,rc);B(this,Je);B(this,yn);A(this,Je,0),A(this,yn,e.slice())}get offset(){return b(this,Je)}get length(){return b(this,yn).length-b(this,Je)}clone(){return new e0(b(this,yn))}reset(){A(this,Je,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=z(this,rc,md).call(this,b(this,Je)+1,e.match+1);return A(this,Je,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;b(this,Je)<e.match-1;){const r=this.peek().linkNext;t.push(z(this,rc,md).call(this,b(this,Je)+1,r)),A(this,Je,r)}return A(this,Je,e.match+1),t}peek(){if(b(this,Je)>=b(this,yn).length)throw new Error("out-of-bounds");return b(this,yn)[b(this,Je)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return bc(this,Je)._++,e}toString(){const e=[];for(let t=b(this,Je);t<b(this,yn).length;t++){const r=b(this,yn)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Je=new WeakMap,yn=new WeakMap,rc=new WeakSet,md=function(e=0,t=0){return new e0(b(this,yn).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let cn=e0;function Hr(n){const e=[],t=a=>{const o=s<n.length?JSON.stringify(n[s]):"$EOI";throw new Error(`invalid token ${o} at ${s}: ${a}`)};let r=[],i=[],s=0;for(;s<n.length;){let a=n.substring(s),o=a.match(e9);o&&(s+=o[1].length,a=n.substring(s));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let u=X4[a[0]]||"";if(u){if(c.type=u,c.text=a[0],s++,u==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(u=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let l=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;l=f+l,e[e.length-1].value=ee(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=l}continue}if(o=a.match(n9),o){if(c.text=o[1],s+=c.text.length,Z4.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(nx)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(t9),o){c.text=o[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`)}return new cn(e.map(a=>Object.freeze(a)))}function rx(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Cu(n,e){if(e.peekKeyword(Xm)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function lr(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function ix(n){let e=lr(n,q4);return rx(e,ot("constant payable nonpayable".split(" "))),rx(e,ot("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function fr(n,e){return n.popParams().map(t=>We.from(t,e))}function sx(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return Q(n.pop().text);throw new Error("invalid gas")}return null}function Ni(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const r9=new RegExp(/^(.*)\[([0-9]*)\]$/);function ax(n){const e=n.match(nx);if(E(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);E(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);E(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const Te={},xt=Symbol.for("_ethers_internal"),ox="_ParamTypeInternal",cx="_ErrorInternal",ux="_EventInternal",lx="_ConstructorInternal",fx="_FallbackInternal",dx="_FunctionInternal",px="_StructInternal",qt=class qt{constructor(e,t,r,i,s,a,o,c){B(this,Na);I(this,"name");I(this,"type");I(this,"baseType");I(this,"indexed");I(this,"components");I(this,"arrayLength");I(this,"arrayChildren");if(Ai(e,Te,"ParamType"),Object.defineProperty(this,xt,{value:ox}),a&&(a=Object.freeze(a.slice())),i==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(i==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");Y(this,{name:t,type:r,baseType:i,indexed:s,components:a,arrayLength:o,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],i=[e];return z(this,Na,c0).call(this,r,e,t,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(qt.isParamType(e))return e;if(typeof e=="string")try{return qt.from(Hr(e),t)}catch{E(!1,"invalid param type","obj",e)}else if(e instanceof cn){let o="",c="",u=null;lr(e,ot(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(h=>qt.from(h)),o=`tuple(${u.map(h=>h.format()).join(",")})`):(o=ax(e.popType("TYPE")),c=o);let l=null,f=null;for(;e.length&&e.peekType("BRACKET");){const h=e.pop();l=new qt(Te,"",o,c,null,u,f,l),f=h.value,o+=h.text,c="array",u=null}let d=null;if(lr(e,J4).has("indexed")){if(!t)throw new Error("");d=!0}const y=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new qt(Te,y,o,c,d,u,f,l)}const r=e.name;E(!r||typeof r=="string"&&r.match(tx),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(E(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,a=s.match(r9);if(a){const o=parseInt(a[2]||"-1"),c=qt.from({type:a[1],components:e.components});return new qt(Te,r||"",s,"array",i,null,o,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const o=e.components!=null?e.components.map(u=>qt.from(u)):null;return new qt(Te,r||"",s,"tuple",i,o,null,null)}return s=ax(e.type),new qt(Te,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[xt]===ox}};Na=new WeakSet,c0=function(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=t.slice();o.forEach((c,u)=>{var l;z(l=a,Na,c0).call(l,e,c,r,f=>{o[u]=f})}),i(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(t))o=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,u)=>{var l;z(l=a[u],Na,c0).call(l,e,c,r,f=>{o[u]=f})}),i(o);return}const s=r(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)};let We=qt;class Ri{constructor(e,t,r){I(this,"type");I(this,"inputs");Ai(e,Te,"Fragment"),r=Object.freeze(r.slice()),Y(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{Ri.from(JSON.parse(e))}catch{}return Ri.from(Hr(e))}if(e instanceof cn)switch(e.peekKeyword(Xm)){case"constructor":return dr.from(e);case"error":return gt.from(e);case"event":return In.from(e);case"fallback":case"receive":return pr.from(e);case"function":return On.from(e);case"struct":return Bi.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return dr.from(e);case"error":return gt.from(e);case"event":return In.from(e);case"fallback":case"receive":return pr.from(e);case"function":return On.from(e);case"struct":return Bi.from(e)}F(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}E(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return dr.isFragment(e)}static isError(e){return gt.isFragment(e)}static isEvent(e){return In.isFragment(e)}static isFunction(e){return On.isFragment(e)}static isStruct(e){return Bi.isFragment(e)}}class Nu extends Ri{constructor(t,r,i,s){super(t,r,s);I(this,"name");E(typeof i=="string"&&i.match(tx),"invalid identifier","name",i),s=Object.freeze(s.slice()),Y(this,{name:i})}}function Lo(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class gt extends Nu{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,xt,{value:cx})}get selector(){return Sn(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Lo(e,this.inputs)),t.join(" ")}static from(e){if(gt.isFragment(e))return e;if(typeof e=="string")return gt.from(Hr(e));if(e instanceof cn){const t=Cu("error",e),r=fr(e);return Ni(e),new gt(Te,t,r)}return new gt(Te,e.name,e.inputs?e.inputs.map(We.from):[])}static isFragment(e){return e&&e[xt]===cx}}class In extends Nu{constructor(t,r,i,s){super(t,"event",r,i);I(this,"anonymous");Object.defineProperty(this,xt,{value:ux}),Y(this,{anonymous:s})}get topicHash(){return Sn(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+Lo(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(s=>We.from(s)),new In(Te,t,r,!1).topicHash}static from(t){if(In.isFragment(t))return t;if(typeof t=="string")try{return In.from(Hr(t))}catch{E(!1,"invalid event fragment","obj",t)}else if(t instanceof cn){const r=Cu("event",t),i=fr(t,!0),s=!!lr(t,ot(["anonymous"])).has("anonymous");return Ni(t),new In(Te,r,i,s)}return new In(Te,t.name,t.inputs?t.inputs.map(r=>We.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[xt]===ux}}class dr extends Ri{constructor(t,r,i,s,a){super(t,r,i);I(this,"payable");I(this,"gas");Object.defineProperty(this,xt,{value:lx}),Y(this,{payable:s,gas:a})}format(t){if(F(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[`constructor${Lo(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(dr.isFragment(t))return t;if(typeof t=="string")try{return dr.from(Hr(t))}catch{E(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof cn){lr(t,ot(["constructor"]));const r=fr(t),i=!!lr(t,Q4).has("payable"),s=sx(t);return Ni(t),new dr(Te,"constructor",r,i,s)}return new dr(Te,"constructor",t.inputs?t.inputs.map(We.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[xt]===lx}}class pr extends Ri{constructor(t,r,i){super(t,"fallback",r);I(this,"payable");Object.defineProperty(this,xt,{value:fx}),Y(this,{payable:i})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(t){if(pr.isFragment(t))return t;if(typeof t=="string")try{return pr.from(Hr(t))}catch{E(!1,"invalid fallback fragment","obj",t)}else if(t instanceof cn){const r=t.toString(),i=t.peekKeyword(ot(["fallback","receive"]));if(E(i,"type must be fallback or receive","obj",r),t.popKeyword(ot(["fallback","receive"]))==="receive"){const c=fr(t);return E(c.length===0,"receive cannot have arguments","obj.inputs",c),lr(t,ot(["payable"])),Ni(t),new pr(Te,[],!0)}let a=fr(t);a.length?E(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(c=>c.format("minimal")).join(", ")):a=[We.from("bytes")];const o=ix(t);if(E(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),lr(t,ot(["returns"])).has("returns")){const c=fr(t);E(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return Ni(t),new pr(Te,a,o==="payable")}if(t.type==="receive")return new pr(Te,[],!0);if(t.type==="fallback"){const r=[We.from("bytes")],i=t.stateMutability==="payable";return new pr(Te,r,i)}E(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[xt]===fx}}class On extends Nu{constructor(t,r,i,s,a,o){super(t,"function",r,s);I(this,"constant");I(this,"outputs");I(this,"stateMutability");I(this,"payable");I(this,"gas");Object.defineProperty(this,xt,{value:dx}),a=Object.freeze(a.slice()),Y(this,{constant:i==="view"||i==="pure",gas:o,outputs:a,payable:i==="payable",stateMutability:i})}get selector(){return Sn(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+Lo(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Lo(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(s=>We.from(s)),new On(Te,t,"view",r,[],null).selector}static from(t){if(On.isFragment(t))return t;if(typeof t=="string")try{return On.from(Hr(t))}catch{E(!1,"invalid function fragment","obj",t)}else if(t instanceof cn){const i=Cu("function",t),s=fr(t),a=ix(t);let o=[];lr(t,ot(["returns"])).has("returns")&&(o=fr(t));const c=sx(t);return Ni(t),new On(Te,i,a,s,o,c)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new On(Te,t.name,r,t.inputs?t.inputs.map(We.from):[],t.outputs?t.outputs.map(We.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[xt]===dx}}class Bi extends Nu{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,xt,{value:px})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Bi.from(Hr(e))}catch{E(!1,"invalid struct fragment","obj",e)}else if(e instanceof cn){const t=Cu("struct",e),r=fr(e);return Ni(e),new Bi(Te,t,r)}return new Bi(Te,e.name,e.inputs?e.inputs.map(We.from):[])}static isFragment(e){return e&&e[xt]===px}}const un=new Map;un.set(0,"GENERIC_PANIC"),un.set(1,"ASSERT_FALSE"),un.set(17,"OVERFLOW"),un.set(18,"DIVIDE_BY_ZERO"),un.set(33,"ENUM_RANGE_ERROR"),un.set(34,"BAD_STORAGE_DATA"),un.set(49,"STACK_UNDERFLOW"),un.set(50,"ARRAY_RANGE_ERROR"),un.set(65,"OUT_OF_MEMORY"),un.set(81,"UNINITIALIZED_FUNCTION_CALL");const i9=new RegExp(/^bytes([0-9]*)$/),s9=new RegExp(/^(u?int)([0-9]*)$/);let gf=null,hx=1024;function a9(n,e,t,r){let i="missing revert data",s=null;const a=null;let o=null;if(t){i="execution reverted";const u=K(t);if(t=V(t),u.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(u.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(V(u.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(V(u.slice(0,4))==="0x4e487b71")try{const l=Number(r.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[l]},s=`Panic due to ${un.get(l)||"UNKNOWN"}(${l})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?ae(e.to):null,data:e.data||"0x"};return e.from&&(c.from=ae(e.from)),ve(i,"CALL_EXCEPTION",{action:n,data:t,reason:s,transaction:c,invocation:a,revert:o})}const t0=class t0{constructor(){B(this,qr)}getDefaultValue(e){const t=e.map(i=>z(this,qr,Ja).call(this,We.from(i)));return new mu(t,"_").defaultValue()}encode(e,t){gy(t.length,e.length,"types/values length mismatch");const r=e.map(a=>z(this,qr,Ja).call(this,We.from(a))),i=new mu(r,"_"),s=new kl;return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(a=>z(this,qr,Ja).call(this,We.from(a)));return new mu(i,"_").decode(new Ll(t,r,hx))}static _setDefaultMaxInflation(e){E(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),hx=e}static defaultAbiCoder(){return gf==null&&(gf=new t0),gf}static getBuiltinCallException(e,t,r){return a9(e,t,r,t0.defaultAbiCoder())}};qr=new WeakSet,Ja=function(e){if(e.isArray())return new EA(z(this,qr,Ja).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new mu(e.components.map(r=>z(this,qr,Ja).call(this,r)),e.name);switch(e.baseType){case"address":return new AA(e.name);case"bool":return new TA(e.name);case"string":return new _A(e.name);case"bytes":return new PA(e.name);case"":return new OA(e.name)}let t=e.type.match(s9);if(t){let r=parseInt(t[2]||"256");return E(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new BA(r/8,t[1]==="int",e.name)}if(t=e.type.match(i9),t){let r=parseInt(t[1]);return E(r!==0&&r<=32,"invalid bytes length","param",e),new SA(r,e.name)}E(!1,"invalid type","type",e.type)};let ct=t0;class o9{constructor(e,t,r){I(this,"fragment");I(this,"name");I(this,"signature");I(this,"topic");I(this,"args");const i=e.name,s=e.format();Y(this,{fragment:e,name:i,signature:s,topic:t,args:r})}}class c9{constructor(e,t,r,i){I(this,"fragment");I(this,"name");I(this,"args");I(this,"signature");I(this,"selector");I(this,"value");const s=e.name,a=e.format();Y(this,{fragment:e,name:s,args:r,signature:a,selector:t,value:i})}}class u9{constructor(e,t,r){I(this,"fragment");I(this,"name");I(this,"args");I(this,"signature");I(this,"selector");const i=e.name,s=e.format();Y(this,{fragment:e,name:i,args:r,signature:s,selector:t})}}class yx{constructor(e){I(this,"hash");I(this,"_isIndexed");Y(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const bx={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},mx={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&bx[n.toString()]&&(e=bx[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}},es=class es{constructor(e){B(this,Gn);I(this,"fragments");I(this,"deploy");I(this,"fallback");I(this,"receive");B(this,Dn);B(this,Un);B(this,Fn);B(this,tt);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,A(this,Fn,new Map),A(this,Dn,new Map),A(this,Un,new Map);const r=[];for(const a of t)try{r.push(Ri.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}Y(this,{fragments:Object.freeze(r)});let i=null,s=!1;A(this,tt,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Y(this,{deploy:a});return;case"fallback":a.inputs.length===0?s=!0:(E(!i||a.payable!==i.payable,"conflicting fallback fragments",`fragments[${o}]`,a),i=a,s=i.payable);return;case"function":c=b(this,Fn);break;case"event":c=b(this,Un);break;case"error":c=b(this,Dn);break;default:return}const u=a.format();c.has(u)||c.set(u,a)}),this.deploy||Y(this,{deploy:dr.from("constructor()")}),Y(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ct.defaultAbiCoder()}getFunctionName(e){const t=z(this,Gn,u0).call(this,e,null,!1);return E(t,"no matching function","key",e),t.name}hasFunction(e){return!!z(this,Gn,u0).call(this,e,null,!1)}getFunction(e,t){return z(this,Gn,u0).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(b(this,Fn).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(b(this,Fn).get(i),r)}}getEventName(e){const t=z(this,Gn,l0).call(this,e,null,!1);return E(t,"no matching event","key",e),t.name}hasEvent(e){return!!z(this,Gn,l0).call(this,e,null,!1)}getEvent(e,t){return z(this,Gn,l0).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(b(this,Un).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(b(this,Un).get(i),r)}}getError(e,t){if(xe(e)){const i=e.toLowerCase();if(mx[i])return gt.from(mx[i].signature);for(const s of b(this,Dn).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,a]of b(this,Dn))s.split("(")[0]===e&&i.push(a);if(i.length===0)return e==="Error"?gt.from("error Error(string)"):e==="Panic"?gt.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(a=>JSON.stringify(a.format())).join(", ");E(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=gt.from(e).format(),e==="Error(string)")return gt.from("error Error(string)");if(e==="Panic(uint256)")return gt.from("error Panic(uint256)");const r=b(this,Dn).get(e);return r||null}forEachError(e){const t=Array.from(b(this,Dn).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(b(this,Dn).get(i),r)}}_decodeParams(e,t){return b(this,tt).decode(e,t)}_encodeParams(e,t){return b(this,tt).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);E(r,"unknown error","fragment",e),e=r}return E(we(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,we(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);E(r,"unknown error","fragment",e),e=r}return fe([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);E(r,"unknown function","fragment",e),e=r}return E(we(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,we(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);E(r,"unknown function","fragment",e),e=r}return fe([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);E(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=je(t);if(i.length%32===0)try{return b(this,tt).decode(e.outputs,i)}catch{r="could not decode result data"}F(!1,r,"BAD_DATA",{value:V(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=K(e,"data"),i=ct.getBuiltinCallException("call",t,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const o=V(r.slice(0,4)),c=this.getError(o);if(c)try{const u=b(this,tt).decode(c.inputs,r.slice(4));i.revert={name:c.name,signature:c.format(),args:u},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(t);return a&&(i.invocation={method:a.name,signature:a.signature,args:a.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);E(r,"unknown function","fragment",e),e=r}return V(b(this,tt).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);E(s,"unknown event","eventFragment",e),e=s}F(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,a)=>s.type==="string"?Sn(a):s.type==="bytes"?de(V(a)):(s.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":s.type.match(/^u?int/)?a=nr(a):s.type.match(/^bytes/)?a=Ty(a,32):s.type==="address"&&b(this,tt).encode(["address"],[a]),Dt(V(a),32));for(t.forEach((s,a)=>{const o=e.inputs[a];if(!o.indexed){E(s==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?r.push(null):o.baseType==="array"||o.baseType==="tuple"?E(!1,"filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?r.push(s.map(c=>i(o,c))):r.push(i(o,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const a=this.getEvent(e);E(a,"unknown event","eventFragment",e),e=a}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),E(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((a,o)=>{const c=t[o];if(a.indexed)if(a.type==="string")r.push(Sn(c));else if(a.type==="bytes")r.push(de(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");r.push(b(this,tt).encode([a.type],[c]))}else i.push(a),s.push(c)}),{data:b(this,tt).encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const p=this.getEvent(e);E(p,"unknown event","eventFragment",e),e=p}if(r!=null&&!e.anonymous){const p=e.topicHash;E(xe(r[0],32)&&r[0].toLowerCase()===p,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],a=[];e.inputs.forEach((p,y)=>{p.indexed?p.type==="string"||p.type==="bytes"||p.baseType==="tuple"||p.baseType==="array"?(i.push(We.from({type:"bytes32",name:p.name})),a.push(!0)):(i.push(p),a.push(!1)):(s.push(p),a.push(!1))});const o=r!=null?b(this,tt).decode(i,fe(r)):null,c=b(this,tt).decode(s,t,!0),u=[],l=[];let f=0,d=0;return e.inputs.forEach((p,y)=>{let h=null;if(p.indexed)if(o==null)h=new yx(null);else if(a[y])h=new yx(o[d++]);else try{h=o[d++]}catch(m){h=m}else try{h=c[f++]}catch(m){h=m}u.push(h),l.push(p.name||null)}),Os.fromItems(u,l)}parseTransaction(e){const t=K(e.data,"tx.data"),r=Q(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(V(t.slice(0,4)));if(!i)return null;const s=b(this,tt).decode(i.inputs,t.slice(4));return new c9(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new o9(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=V(e),r=this.getError(we(t,0,4));if(!r)return null;const i=b(this,tt).decode(r.inputs,we(t,4));return new u9(r,r.selector,i)}static from(e){return e instanceof es?e:typeof e=="string"?new es(JSON.parse(e)):typeof e.formatJson=="function"?new es(e.formatJson()):typeof e.format=="function"?new es(e.format("json")):new es(e)}};Dn=new WeakMap,Un=new WeakMap,Fn=new WeakMap,tt=new WeakMap,Gn=new WeakSet,u0=function(e,t,r){if(xe(e)){const s=e.toLowerCase();for(const a of b(this,Fn).values())if(s===a.selector)return a;return null}if(e.indexOf("(")===-1){const s=[];for(const[a,o]of b(this,Fn))a.split("(")[0]===e&&s.push(o);if(t){const a=t.length>0?t[t.length-1]:null;let o=t.length,c=!0;et.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let u=s.length-1;u>=0;u--){const l=s[u].inputs.length;l!==o&&(!c||l!==o-1)&&s.splice(u,1)}for(let u=s.length-1;u>=0;u--){const l=s[u].inputs;for(let f=0;f<t.length;f++)if(et.isTyped(t[f])){if(f>=l.length){if(t[f].type==="overrides")continue;s.splice(u,1);break}if(t[f].type!==l[f].baseType){s.splice(u,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const a=t[t.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const a=s.map(o=>JSON.stringify(o.format())).join(", ");E(!1,`ambiguous function description (i.e. matches ${a})`,"key",e)}return s[0]}const i=b(this,Fn).get(On.from(e).format());return i||null},l0=function(e,t,r){if(xe(e)){const s=e.toLowerCase();for(const a of b(this,Un).values())if(s===a.topicHash)return a;return null}if(e.indexOf("(")===-1){const s=[];for(const[a,o]of b(this,Un))a.split("(")[0]===e&&s.push(o);if(t){for(let a=s.length-1;a>=0;a--)s[a].inputs.length<t.length&&s.splice(a,1);for(let a=s.length-1;a>=0;a--){const o=s[a].inputs;for(let c=0;c<t.length;c++)if(et.isTyped(t[c])&&t[c].type!==o[c].baseType){s.splice(a,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const a=s.map(o=>JSON.stringify(o.format())).join(", ");E(!1,`ambiguous event description (i.e. matches ${a})`,"key",e)}return s[0]}const i=b(this,Un).get(In.from(e).format());return i||null};let wf=es;const xx=BigInt(0);function Ws(n){return n??null}function Ce(n){return n==null?null:n.toString()}class gx{constructor(e,t,r){I(this,"gasPrice");I(this,"maxFeePerGas");I(this,"maxPriorityFeePerGas");Y(this,{gasPrice:Ws(e),maxFeePerGas:Ws(t),maxPriorityFeePerGas:Ws(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ce(e),maxFeePerGas:Ce(t),maxPriorityFeePerGas:Ce(r)}}}function Mo(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=V(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=Q(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=ee(n[i],`request.${i}`));return n.accessList&&(e.accessList=Si(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>Yc(i)?V(i):Object.assign({},i))),e}class l9{constructor(e,t){I(this,"provider");I(this,"number");I(this,"hash");I(this,"timestamp");I(this,"parentHash");I(this,"parentBeaconBlockRoot");I(this,"nonce");I(this,"difficulty");I(this,"gasLimit");I(this,"gasUsed");I(this,"stateRoot");I(this,"receiptsRoot");I(this,"blobGasUsed");I(this,"excessBlobGas");I(this,"miner");I(this,"prevRandao");I(this,"extraData");I(this,"baseFeePerGas");B(this,Er);A(this,Er,e.transactions.map(r=>typeof r!="string"?new Uo(r,t):r)),Y(this,{provider:t,hash:Ws(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ws(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ws(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return b(this,Er).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=b(this,Er).slice();return e.length===0?[]:(F(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:s,hash:a,miner:o,prevRandao:c,nonce:u,number:l,parentHash:f,parentBeaconBlockRoot:d,stateRoot:p,receiptsRoot:y,timestamp:h,transactions:m}=this;return{_type:"Block",baseFeePerGas:Ce(e),difficulty:Ce(t),extraData:r,gasLimit:Ce(i),gasUsed:Ce(s),blobGasUsed:Ce(this.blobGasUsed),excessBlobGas:Ce(this.excessBlobGas),hash:a,miner:o,prevRandao:c,nonce:u,number:l,parentHash:f,timestamp:h,parentBeaconBlockRoot:d,stateRoot:p,receiptsRoot:y,transactions:m}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return b(this,Er).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=b(this,Er)[e];else{const r=e.toLowerCase();for(const i of b(this,Er))if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash!==r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;E(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return f9(this)}}Er=new WeakMap;class Do{constructor(e,t){I(this,"provider");I(this,"transactionHash");I(this,"blockHash");I(this,"blockNumber");I(this,"removed");I(this,"address");I(this,"data");I(this,"topics");I(this,"index");I(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());Y(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:a,topics:o,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:a,topics:o,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return F(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return F(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return F(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return d9(this)}}class wx{constructor(e,t){I(this,"provider");I(this,"to");I(this,"from");I(this,"contractAddress");I(this,"hash");I(this,"index");I(this,"blockHash");I(this,"blockNumber");I(this,"logsBloom");I(this,"gasUsed");I(this,"blobGasUsed");I(this,"cumulativeGasUsed");I(this,"gasPrice");I(this,"blobGasPrice");I(this,"type");I(this,"status");I(this,"root");B(this,ic);A(this,ic,Object.freeze(e.logs.map(i=>new Do(i,t))));let r=xx;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Y(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return b(this,ic)}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:s,blockHash:a,blockNumber:o,logsBloom:c,logs:u,status:l,root:f}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:r,cumulativeGasUsed:Ce(this.cumulativeGasUsed),from:t,gasPrice:Ce(this.gasPrice),blobGasUsed:Ce(this.blobGasUsed),blobGasPrice:Ce(this.blobGasPrice),gasUsed:Ce(this.gasUsed),hash:i,index:s,logs:u,logsBloom:c,root:f,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return vx(this)}reorderedEvent(e){return F(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Ax(this,e)}}ic=new WeakMap;const cd=class cd{constructor(e,t){I(this,"provider");I(this,"blockNumber");I(this,"blockHash");I(this,"index");I(this,"hash");I(this,"type");I(this,"to");I(this,"from");I(this,"nonce");I(this,"gasLimit");I(this,"gasPrice");I(this,"maxPriorityFeePerGas");I(this,"maxFeePerGas");I(this,"maxFeePerBlobGas");I(this,"data");I(this,"value");I(this,"chainId");I(this,"signature");I(this,"accessList");I(this,"blobVersionedHashes");I(this,"authorizationList");B(this,Jr);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,A(this,Jr,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:s,to:a,from:o,nonce:c,data:u,signature:l,accessList:f,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:t,blobVersionedHashes:d,chainId:Ce(this.chainId),data:u,from:o,gasLimit:Ce(this.gasLimit),gasPrice:Ce(this.gasPrice),hash:i,maxFeePerGas:Ce(this.maxFeePerGas),maxPriorityFeePerGas:Ce(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ce(this.maxFeePerBlobGas),nonce:c,signature:l,to:a,index:r,type:s,value:Ce(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await Ze({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let s=b(this,Jr),a=-1,o=s===-1;const c=async()=>{if(o)return null;const{blockNumber:d,nonce:p}=await Ze({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(p<this.nonce){s=d;return}if(o)return null;const y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(a===-1&&(a=s-3,a<b(this,Jr)&&(a=b(this,Jr)));a<=d;){if(o)return null;const h=await this.provider.getBlock(a,!0);if(h==null)return;for(const m of h)if(m===this.hash)return;for(let m=0;m<h.length;m++){const x=await h.getTransaction(m);if(x.from===this.from&&x.nonce===this.nonce){if(o)return null;const w=await this.provider.getTransactionReceipt(x.hash);if(w==null||d-w.blockNumber+1<r)return;let g="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?g="repriced":x.data==="0x"&&x.from===x.to&&x.value===xx&&(g="cancelled"),F(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:g==="replaced"||g==="cancelled",reason:g,replacement:x.replaceableTransaction(s),hash:x.hash,receipt:w})}}a++}},u=d=>{if(d==null||d.status!==0)return d;F(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},l=await this.provider.getTransactionReceipt(this.hash);if(r===0)return u(l);if(l){if(r===1||await l.confirmations()>=r)return u(l)}else if(await c(),r===0)return null;return await new Promise((d,p)=>{const y=[],h=()=>{y.forEach(x=>x())};if(y.push(()=>{o=!0}),i>0){const x=setTimeout(()=>{h(),p(ve("wait for transaction timeout","TIMEOUT"))},i);y.push(()=>{clearTimeout(x)})}const m=async x=>{if(await x.confirmations()>=r){h();try{d(u(x))}catch(w){p(w)}}};if(y.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),s>=0){const x=async()=>{try{await c()}catch(w){if(ze(w,"TRANSACTION_REPLACED")){h(),p(w);return}}o||this.provider.once("block",x)};y.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return F(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),vx(this)}reorderedEvent(e){return F(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),F(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ax(this,e)}replaceableTransaction(e){E(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new cd(this,this.provider);return A(t,Jr,e),t}};Jr=new WeakMap;let Uo=cd;function f9(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function Ax(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function vx(n){return{orphan:"drop-transaction",tx:n}}function d9(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class Af extends Do{constructor(t,r,i){super(t,t.provider);I(this,"interface");I(this,"fragment");I(this,"args");const s=r.decodeEventLog(i,t.data,t.topics);Y(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Ex extends Do{constructor(t,r){super(t,t.provider);I(this,"error");Y(this,{error:r})}}class p9 extends wx{constructor(t,r,i){super(i,r);B(this,Ra);A(this,Ra,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?b(this,Ra).getEvent(t.topics[0]):null;if(r)try{return new Af(t,b(this,Ra),r)}catch(i){return new Ex(t,i)}return t})}}Ra=new WeakMap;class vf extends Uo{constructor(t,r,i){super(i,r);B(this,sc);A(this,sc,t)}async wait(t,r){const i=await super.wait(t,r);return i==null?null:new p9(b(this,sc),this.provider,i)}}sc=new WeakMap;class Tx extends Iy{constructor(t,r,i,s){super(t,r,i);I(this,"log");Y(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class h9 extends Tx{constructor(e,t,r,i,s){super(e,t,r,new Af(s,e.interface,i));const a=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Y(this,{args:a,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Px=BigInt(0);function Sx(n){return n&&typeof n.call=="function"}function Ix(n){return n&&typeof n.estimateGas=="function"}function Ru(n){return n&&typeof n.resolveName=="function"}function Ox(n){return n&&typeof n.sendTransaction=="function"}function Cx(n){if(n!=null){if(Ru(n))return n;if(n.provider)return n.provider}}class y9{constructor(e,t,r){B(this,ac);I(this,"fragment");if(Y(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=_i(e.runner,"resolveName"),s=Ru(i)?i:null;A(this,ac,async function(){const a=await Promise.all(t.inputs.map((o,c)=>r[c]==null?null:o.walkAsync(r[c],(l,f)=>l==="address"?Array.isArray(f)?Promise.all(f.map(d=>Fe(d,s))):Fe(f,s):f)));return e.interface.encodeFilterTopics(t,a)}())}getTopicFilter(){return b(this,ac)}}ac=new WeakMap;function _i(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function ki(n){return n==null?null:n.provider||null}async function Nx(n,e){const t=et.dereference(n,"overrides");E(typeof t=="object","invalid overrides parameter","overrides",n);const r=Mo(t);return E(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),E(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function b9(n,e,t){const r=_i(n,"resolveName"),i=Ru(r)?r:null;return await Promise.all(e.map((s,a)=>s.walkAsync(t[a],(o,c)=>(c=et.dereference(c,o),o==="address"?Fe(c,i):c))))}function m9(n){const e=async function(a){const o=await Nx(a,["data"]);o.to=await n.getAddress(),o.from&&(o.from=await Fe(o.from,Cx(n.runner)));const c=n.interface,u=Q(o.value||Px,"overrides.value")===Px,l=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!l&&!u&&E(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),E(c.fallback||l,"cannot send data to receive-only contract","overrides.data",o.data);const f=c.receive||c.fallback&&c.fallback.payable;return E(f||u,"cannot send value to non-payable fallback","overrides.value",o.value),E(c.fallback||l,"cannot send data to receive-only contract","overrides.data",o.data),o},t=async function(a){const o=_i(n.runner,"call");F(Sx(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(a);try{return await o.call(c)}catch(u){throw Ol(u)&&u.data?n.interface.makeError(u.data,c):u}},r=async function(a){const o=n.runner;F(Ox(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await e(a)),u=ki(n.runner);return new vf(n.interface,u,c)},i=async function(a){const o=_i(n.runner,"estimateGas");return F(Ix(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await e(a))},s=async a=>await r(a);return Y(s,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),s}function x9(n,e){const t=function(...u){const l=n.interface.getFunction(e,u);return F(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),l},r=async function(...u){const l=t(...u);let f={};if(l.inputs.length+1===u.length&&(f=await Nx(u.pop()),f.from&&(f.from=await Fe(f.from,Cx(n.runner)))),l.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await b9(n.runner,l.inputs,u);return Object.assign({},f,await Ze({to:n.getAddress(),data:n.interface.encodeFunctionData(l,d)}))},i=async function(...u){const l=await o(...u);return l.length===1?l[0]:l},s=async function(...u){const l=n.runner;F(Ox(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await l.sendTransaction(await r(...u)),d=ki(n.runner);return new vf(n.interface,d,f)},a=async function(...u){const l=_i(n.runner,"estimateGas");return F(Ix(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await r(...u))},o=async function(...u){const l=_i(n.runner,"call");F(Sx(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...u);let d="0x";try{d=await l.call(f)}catch(y){throw Ol(y)&&y.data?n.interface.makeError(y.data,f):y}const p=t(...u);return n.interface.decodeFunctionResult(p,d)},c=async(...u)=>t(...u).constant?await i(...u):await s(...u);return Y(c,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:a,populateTransaction:r,send:s,staticCall:i,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=n.interface.getFunction(e);return F(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function g9(n,e){const t=function(...i){const s=n.interface.getEvent(e,i);return F(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new y9(n,t(...i),i)};return Y(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return F(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const Bu=Symbol.for("_ethersInternal_contract"),Rx=new WeakMap;function w9(n,e){Rx.set(n[Bu],e)}function Tt(n){return Rx.get(n[Bu])}function A9(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function Ef(n,e){let t,r=null;if(Array.isArray(e)){const s=function(a){if(xe(a,32))return a;const o=n.interface.getEvent(a);return E(o,"unknown fragment","name",a),o.topicHash};t=e.map(a=>a==null?null:Array.isArray(a)?a.map(s):s(a))}else e==="*"?t=[null]:typeof e=="string"?xe(e,32)?t=[e]:(r=n.interface.getEvent(e),E(r,"unknown fragment","event",e),t=[r.topicHash]):A9(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):E(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const a=Array.from(new Set(s.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:t}}async function Fo(n,e){const{subs:t}=Tt(n);return t.get((await Ef(n,e)).tag)||null}async function Bx(n,e,t){const r=ki(n.runner);F(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:a}=await Ef(n,t),{addr:o,subs:c}=Tt(n);let u=c.get(s);if(!u){const f={address:o||n,topics:a},d=m=>{let x=i;if(x==null)try{x=n.interface.getEvent(m.topics[0])}catch{}if(x){const w=x,g=i?n.interface.decodeEventLog(i,m.data,m.topics):[];Pf(n,t,g,v=>new h9(n,v,t,w,m))}else Pf(n,t,[],w=>new Tx(n,w,t,m))};let p=[];u={tag:s,listeners:[],start:()=>{p.length||p.push(r.on(f,d))},stop:async()=>{if(p.length==0)return;let m=p;p=[],await Promise.all(m),r.off(f,d)}},c.set(s,u)}return u}let Tf=Promise.resolve();async function v9(n,e,t,r){await Tf;const i=await Fo(n,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:a,once:o})=>{const c=Array.from(t);r&&c.push(r(o?null:a));try{a.call(n,...c)}catch{}return!o}),i.listeners.length===0&&(i.stop(),Tt(n).subs.delete(i.tag)),s>0}async function Pf(n,e,t,r){try{await Tf}catch{}const i=v9(n,e,t,r);return Tf=i,await i}const _u=["then"];x1=Bu;const oc=class oc{constructor(e,t,r,i){I(this,"target");I(this,"interface");I(this,"runner");I(this,"filters");I(this,x1);I(this,"fallback");E(typeof e=="string"||cm(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=wf.from(t);Y(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,Bu,{value:{}});let a,o=null,c=null;if(i){const f=ki(r);c=new vf(this.interface,f,i)}let u=new Map;if(typeof e=="string")if(xe(e))o=e,a=Promise.resolve(e);else{const f=_i(r,"resolveName");if(!Ru(f))throw ve("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=f.resolveName(e).then(d=>{if(d==null)throw ve("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Tt(this).addr=d,d})}else a=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Tt(this).addr=f,f});w9(this,{addrPromise:a,addr:o,deployTx:c,subs:u});const l=new Proxy({},{get:(f,d,p)=>{if(typeof d=="symbol"||_u.indexOf(d)>=0)return Reflect.get(f,d,p);try{return this.getEvent(d)}catch(y){if(!ze(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(f,d)=>_u.indexOf(d)>=0?Reflect.has(f,d):Reflect.has(f,d)||this.interface.hasEvent(String(d))});return Y(this,{filters:l}),Y(this,{fallback:s.receive||s.fallback?m9(this):null}),new Proxy(this,{get:(f,d,p)=>{if(typeof d=="symbol"||d in f||_u.indexOf(d)>=0)return Reflect.get(f,d,p);try{return f.getFunction(d)}catch(y){if(!ze(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(f,d)=>typeof d=="symbol"||d in f||_u.indexOf(d)>=0?Reflect.has(f,d):f.interface.hasFunction(d)})}connect(e){return new oc(this.target,this.interface,e)}attach(e){return new oc(e,this.interface,this.runner)}async getAddress(){return await Tt(this).addrPromise}async getDeployedCode(){const e=ki(this.runner);F(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=ki(this.runner);return F(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",a)}catch(o){s(o)}};a()})}deploymentTransaction(){return Tt(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),x9(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),g9(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Tt(this),a=i||await s,{fragment:o,topics:c}=await Ef(this,e),u={address:a,topics:c,fromBlock:t,toBlock:r},l=ki(this.runner);return F(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(u)).map(f=>{let d=o;if(d==null)try{d=this.interface.getEvent(f.topics[0])}catch{}if(d)try{return new Af(f,this.interface,d)}catch(p){return new Ex(f,p)}return new Do(f,l)})}async on(e,t){const r=await Bx(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await Bx(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await Pf(this,e,t,null)}async listenerCount(e){if(e){const i=await Fo(this,e);return i?i.listeners.length:0}const{subs:t}=Tt(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await Fo(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=Tt(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,t){const r=await Fo(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),Tt(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await Fo(this,e);if(!t)return this;t.stop(),Tt(this).subs.delete(t.tag)}else{const{subs:t}=Tt(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends oc{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};let Sf=oc;function E9(){return Sf}class Go extends E9(){}function If(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):E(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class T9{constructor(e){I(this,"name");Y(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const _x=new RegExp("^(ipfs)://(.*)$","i"),kx=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),_x,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],Ba=class Ba{constructor(e,t,r){B(this,Zr);I(this,"provider");I(this,"address");I(this,"name");B(this,Yr);B(this,ts);Y(this,{provider:e,address:t,name:r}),A(this,Yr,null),A(this,ts,new Go(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return b(this,Yr)==null&&A(this,Yr,(async()=>{try{return await b(this,ts).supportsInterface("0x9061b923")}catch(e){if(ze(e,"CALL_EXCEPTION"))return!1;throw A(this,Yr,null),e}})()),await b(this,Yr)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await z(this,Zr,Ya).call(this,"addr(bytes32)");return s==null||s===So?null:s}catch(s){if(ze(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const a=await z(this,Zr,Ya).call(this,"addr(bytes32,uint)",[s]);if(xe(a,20))return ae(a)}let t=null;for(const s of this.provider.plugins)if(s instanceof T9&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const r=await z(this,Zr,Ya).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;F(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await z(this,Zr,Ya).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await z(this,Zr,Ya).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${Sy("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;F(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<kx.length;r++){const i=t.match(kx[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const a=If(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:a}),{linkage:e,url:a}}case"erc721":case"erc1155":{const a=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const o=await this.getAddress();if(o==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const u=c[1],l=new Go(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const h=await l.ownerOf(u);if(o!==h)return e.push({type:"!owner",value:h}),{url:null,linkage:e};e.push({type:"owner",value:h})}else if(s==="erc1155"){const h=await l.balanceOf(o,u);if(!h)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:h.toString()})}let f=await l[a](u);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),s==="erc1155"&&(f=f.replace("{id}",nr(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=If(f)),e.push({type:"metadata-url",value:f});let d={};const p=await new rr(f).send();p.assertOk();try{d=p.bodyJson}catch{try{e.push({type:"!metadata",value:p.bodyText})}catch{const x=p.body;return x&&e.push({type:"!metadata",value:V(x)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let y=d.image;if(typeof y!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!y.match(/^(https:\/\/|data:)/i)){if(y.match(_x)==null)return e.push({type:"!imageUrl-ipfs",value:y}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:y}),y=If(y)}return e.push({type:"url",value:y}),{linkage:e,url:y}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return F(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var i;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const s=await z(i=Ba,n0,E1).call(i,e,r);if(s!=null){const a=new Ba(e,s,t);return r!==t&&!await a.supportsWildcard()?null:a}r=r.split(".").slice(1).join(".")}}};Yr=new WeakMap,ts=new WeakMap,Zr=new WeakSet,Ya=async function(e,t){t=(t||[]).slice();const r=b(this,ts).interface;t.unshift(bf(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),F(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[U4(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await b(this,ts)[e](...t);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ze(s,"CALL_EXCEPTION"))throw s}return null},n0=new WeakSet,E1=async function(e,t){const r=await Ba.getEnsAddress(e);try{const s=await new Go(r,["function resolver(bytes32) view returns (address)"],e).resolver(bf(t),{enableCcipRead:!0});return s===So?null:s}catch(i){throw i}return null},B(Ba,n0);let ku=Ba;const Lx=BigInt(0);function ue(n,e){return function(t){return t==null?e:n(t)}}function Ho(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function $o(n,e){return t=>{const r={};for(const i in n){let s=i;if(e&&i in e&&!(s in t)){for(const a of e[i])if(a in t){s=a;break}}try{const a=n[i](t[s]);a!==void 0&&(r[i]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";F(!1,`invalid value for value.${i} (${o})`,"BAD_DATA",{value:t})}}return r}}function P9(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}E(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function Ks(n){return E(xe(n,!0),"invalid data","value",n),n}function Ke(n){return E(xe(n,32),"invalid hash","value",n),n}const S9=$o({address:ae,blockHash:Ke,blockNumber:ee,data:Ks,index:ee,removed:ue(P9,!1),topics:Ho(Ke),transactionHash:Ke,transactionIndex:ee},{index:["logIndex"]});function I9(n){return S9(n)}const O9=$o({hash:ue(Ke),parentHash:Ke,parentBeaconBlockRoot:ue(Ke,null),number:ee,timestamp:ee,nonce:ue(Ks),difficulty:Q,gasLimit:Q,gasUsed:Q,stateRoot:ue(Ke,null),receiptsRoot:ue(Ke,null),blobGasUsed:ue(Q,null),excessBlobGas:ue(Q,null),miner:ue(ae),prevRandao:ue(Ke,null),extraData:Ks,baseFeePerGas:ue(Q)},{prevRandao:["mixHash"]});function C9(n){const e=O9(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:Mx(t)),e}const N9=$o({transactionIndex:ee,blockNumber:ee,transactionHash:Ke,address:ae,topics:Ho(Ke),data:Ks,index:ee,blockHash:Ke},{index:["logIndex"]});function R9(n){return N9(n)}const B9=$o({to:ue(ae,null),from:ue(ae,null),contractAddress:ue(ae,null),index:ee,root:ue(V),gasUsed:Q,blobGasUsed:ue(Q,null),logsBloom:ue(Ks),blockHash:Ke,hash:Ke,logs:Ho(R9),blockNumber:ee,cumulativeGasUsed:Q,effectiveGasPrice:ue(Q),blobGasPrice:ue(Q,null),status:ue(ee),type:ue(ee,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function _9(n){return B9(n)}function Mx(n){n.to&&Q(n.to)===Lx&&(n.to="0x0000000000000000000000000000000000000000");const e=$o({hash:Ke,index:ue(ee,void 0),type:t=>t==="0x"||t==null?0:ee(t),accessList:ue(Si,null),blobVersionedHashes:ue(Ho(Ke,!0),null),authorizationList:ue(Ho(t=>{let r;if(t.signature)r=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},t,{yParity:i})}return{address:ae(t.address),chainId:Q(t.chainId),nonce:Q(t.nonce),signature:mt.from(r)}},!1),null),blockHash:ue(Ke,null),blockNumber:ue(ee,null),transactionIndex:ue(ee,null),from:ae,gasPrice:ue(Q),maxPriorityFeePerGas:ue(Q),maxFeePerGas:ue(Q),maxFeePerBlobGas:ue(Q,null),gasLimit:Q,to:ue(ae,null),value:Q,nonce:ee,data:Ks,creates:ue(ae,null),chainId:ue(Q,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=wA(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=mt.from(n.signature):e.signature=mt.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Q(e.blockHash)===Lx&&(e.blockHash=null),e}const k9="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Vo{constructor(e){I(this,"name");Y(this,{name:e})}clone(){return new Vo(this.name)}}class Lu extends Vo{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);I(this,"effectiveBlock");I(this,"txBase");I(this,"txCreate");I(this,"txDataZero");I(this,"txDataNonzero");I(this,"txAccessListStorageKey");I(this,"txAccessListAddress");const i={effectiveBlock:t};function s(a,o){let c=(r||{})[a];c==null&&(c=o),E(typeof c=="number",`invalud value for ${a}`,"costs",r),i[a]=c}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Y(this,i)}clone(){return new Lu(this.effectiveBlock,this)}}class Mu extends Vo{constructor(t,r){super("org.ethers.plugins.network.Ens");I(this,"address");I(this,"targetNetwork");Y(this,{address:t||k9,targetNetwork:r??1})}clone(){return new Mu(this.address,this.targetNetwork)}}class L9 extends Vo{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");B(this,cc);B(this,uc);A(this,cc,t),A(this,uc,r)}get url(){return b(this,cc)}get processFunc(){return b(this,uc)}clone(){return this}}cc=new WeakMap,uc=new WeakMap;const Of=new Map,La=class La{constructor(e,t){B(this,_a);B(this,ka);B(this,Xr);A(this,_a,e),A(this,ka,Q(t)),A(this,Xr,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return b(this,_a)}set name(e){A(this,_a,e)}get chainId(){return b(this,ka)}set chainId(e){A(this,ka,Q(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Q(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Q(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Q(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(b(this,Xr).values())}attachPlugin(e){if(b(this,Xr).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return b(this,Xr).set(e.name,e.clone()),this}getPlugin(e){return b(this,Xr).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new La(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Lu;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=Si(e.accessList);for(const s in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(M9(),e==null)return La.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Of.get(e);if(t)return t();if(typeof e=="bigint")return new La("unknown",e);E(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){E(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new La(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Mu(e.ensAddress,e.ensNetwork)),t}E(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=Of.get(e);r&&E(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Of.set(e,t)}};_a=new WeakMap,ka=new WeakMap,Xr=new WeakMap;let Cn=La;function Dx(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function Ux(n){return new L9(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,a]=await Promise.all([r.send(),e()]);i=s;const o=i.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:Dx(o.maxFee,9),maxPriorityFeePerGas:Dx(o.maxPriorityFee,9)}}catch(s){F(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let Fx=!1;function M9(){if(Fx)return;Fx=!0;function n(e,t,r){const i=function(){const s=new Cn(e,t);return r.ensNetwork!=null&&s.attachPlugin(new Mu(null,r.ensNetwork)),s.attachPlugin(new Lu),(r.plugins||[]).forEach(a=>{s.attachPlugin(a)}),s};Cn.register(e,i),Cn.register(t,i),r.altNames&&r.altNames.forEach(s=>{Cn.register(s,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[Ux("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Ux("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Cf(n){return JSON.parse(JSON.stringify(n))}class D9{constructor(e){B(this,Ma);B(this,Tr);B(this,Jt);B(this,ei);B(this,Hn);A(this,Tr,e),A(this,Jt,null),A(this,ei,4e3),A(this,Hn,-2)}get pollingInterval(){return b(this,ei)}set pollingInterval(e){A(this,ei,e)}start(){b(this,Jt)||(A(this,Jt,b(this,Tr)._setTimeout(z(this,Ma,f0).bind(this),b(this,ei))),z(this,Ma,f0).call(this))}stop(){b(this,Jt)&&(b(this,Tr)._clearTimeout(b(this,Jt)),A(this,Jt,null))}pause(e){this.stop(),e&&A(this,Hn,-2)}resume(){this.start()}}Tr=new WeakMap,Jt=new WeakMap,ei=new WeakMap,Hn=new WeakMap,Ma=new WeakSet,f0=async function(){try{const e=await b(this,Tr).getBlockNumber();if(b(this,Hn)===-2){A(this,Hn,e);return}if(e!==b(this,Hn)){for(let t=b(this,Hn)+1;t<=e;t++){if(b(this,Jt)==null)return;await b(this,Tr).emit("block",t)}A(this,Hn,e)}}catch{}b(this,Jt)!=null&&A(this,Jt,b(this,Tr)._setTimeout(z(this,Ma,f0).bind(this),b(this,ei)))};class Nf{constructor(e){B(this,ns);B(this,rs);B(this,ti);A(this,ns,e),A(this,ti,!1),A(this,rs,t=>{this._poll(t,b(this,ns))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){b(this,ti)||(A(this,ti,!0),b(this,rs).call(this,-2),b(this,ns).on("block",b(this,rs)))}stop(){b(this,ti)&&(A(this,ti,!1),b(this,ns).off("block",b(this,rs)))}pause(e){this.stop()}resume(){this.start()}}ns=new WeakMap,rs=new WeakMap,ti=new WeakMap;class U9 extends Nf{constructor(t,r){super(t);B(this,Da);B(this,Pr);A(this,Da,r),A(this,Pr,-2)}pause(t){t&&A(this,Pr,-2),super.pause(t)}async _poll(t,r){const i=await r.getBlock(b(this,Da));i!=null&&(b(this,Pr)===-2?A(this,Pr,i.number):i.number>b(this,Pr)&&(r.emit(b(this,Da),i.number),A(this,Pr,i.number)))}}Da=new WeakMap,Pr=new WeakMap;class F9 extends Nf{constructor(t,r){super(t);B(this,r0);A(this,r0,Cf(r))}async _poll(t,r){throw new Error("@TODO")}}r0=new WeakMap;class G9 extends Nf{constructor(t,r){super(t);B(this,Ua);A(this,Ua,r)}async _poll(t,r){const i=await r.getTransactionReceipt(b(this,Ua));i&&r.emit(b(this,Ua),i)}}Ua=new WeakMap;class Rf{constructor(e,t){B(this,i0);B(this,Sr);B(this,Fa);B(this,Ga);B(this,ni);B(this,Yt);A(this,Sr,e),A(this,Fa,Cf(t)),A(this,Ga,z(this,i0,T1).bind(this)),A(this,ni,!1),A(this,Yt,-2)}start(){b(this,ni)||(A(this,ni,!0),b(this,Yt)===-2&&b(this,Sr).getBlockNumber().then(e=>{A(this,Yt,e)}),b(this,Sr).on("block",b(this,Ga)))}stop(){b(this,ni)&&(A(this,ni,!1),b(this,Sr).off("block",b(this,Ga)))}pause(e){this.stop(),e&&A(this,Yt,-2)}resume(){this.start()}}Sr=new WeakMap,Fa=new WeakMap,Ga=new WeakMap,ni=new WeakMap,Yt=new WeakMap,i0=new WeakSet,T1=async function(e){if(b(this,Yt)===-2)return;const t=Cf(b(this,Fa));t.fromBlock=b(this,Yt)+1,t.toBlock=e;const r=await b(this,Sr).getLogs(t);if(r.length===0){b(this,Yt)<e-60&&A(this,Yt,e-60);return}for(const i of r)b(this,Sr).emit(b(this,Fa),i),A(this,Yt,i.blockNumber)};const H9=BigInt(2),$9=10;function Du(n){return n&&typeof n.then=="function"}function Uu(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,a)=>(s[a]=r[a],s),{})}return r})}class Gx{constructor(e){I(this,"name");Y(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function V9(n){return JSON.parse(JSON.stringify(n))}function Bf(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function _f(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(xe(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:Uu("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:Uu("orphan",t),filter:V9(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?Bf(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],a=o=>{xe(o)?i.push(o):s.push((async()=>{i.push(await Fe(o,e))})())};Array.isArray(t.address)?t.address.forEach(a):a(t.address),s.length&&await Promise.all(s),r.address=Bf(i.map(o=>o.toLowerCase()))}return{filter:r,tag:Uu("event",r),type:"event"}}E(!1,"unknown ProviderEvent","event",n)}function kf(){return new Date().getTime()}const z9={cacheTimeout:250,pollingInterval:4e3};class j9{constructor(e,t){B(this,re);B(this,nt);B(this,ri);B(this,rt);B(this,Ha);B(this,Ct);B(this,is);B(this,ii);B(this,Ir);B(this,lc);B(this,Zt);B(this,$a);B(this,Va);if(A(this,Va,Object.assign({},z9,t||{})),e==="any")A(this,is,!0),A(this,Ct,null);else if(e){const r=Cn.from(e);A(this,is,!1),A(this,Ct,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else A(this,is,!1),A(this,Ct,null);A(this,Ir,-1),A(this,ii,new Map),A(this,nt,new Map),A(this,ri,new Map),A(this,rt,null),A(this,Ha,!1),A(this,lc,1),A(this,Zt,new Map),A(this,$a,!1)}get pollingInterval(){return b(this,Va).pollingInterval}get provider(){return this}get plugins(){return Array.from(b(this,ri).values())}attachPlugin(e){if(b(this,ri).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return b(this,ri).set(e.name,e.connect(this)),this}getPlugin(e){return b(this,ri).get(e)||null}get disableCcipRead(){return b(this,$a)}set disableCcipRead(e){A(this,$a,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),a=[];for(let o=0;o<r.length;o++){const c=r[o],u=c.replace("{sender}",i).replace("{data}",s),l=new rr(u);c.indexOf("{data}")===-1&&(l.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:o,urls:r});let f="unknown error",d;try{d=await l.send()}catch(p){a.push(p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:p}});continue}try{const p=d.bodyJson;if(p.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:p}),p.data;p.message&&(f=p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:p})}catch{}F(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),a.push(f)}F(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:a}})}_wrapBlock(e,t){return new l9(C9(e),this)}_wrapLog(e,t){return new Do(I9(e),this)}_wrapTransactionReceipt(e,t){return new wx(_9(e),this)}_wrapTransactionResponse(e,t){return new Uo(Mx(e),this)}_detectNetwork(){F(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){F(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=ee(await z(this,re,Nt).call(this,{method:"getBlockNumber"}),"%response");return b(this,Ir)>=0&&A(this,Ir,e),e}_getAddress(e){return Fe(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(xe(e))return xe(e,32)?e:an(e);if(typeof e=="bigint"&&(e=ee(e,"blockTag")),typeof e=="number")return e>=0?an(e):b(this,Ir)>=0?an(b(this,Ir)+e):this.getBlockNumber().then(t=>an(t+e));E(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?Bf(c.map(u=>u.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(c,u,l)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(r&&(u!=null||l!=null))throw new Error("invalid filter");const d={};return f&&(d.address=f),t.length&&(d.topics=t),u&&(d.fromBlock=u),l&&(d.toBlock=l),r&&(d.blockHash=r),d};let s=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let a;"fromBlock"in e&&(a=this._getBlockTag(e.fromBlock));let o;return"toBlock"in e&&(o=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(s),a,o]).then(c=>i(c[0],c[1],c[2])):i(s,a,o)}_getTransactionRequest(e){const t=Mo(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=Fe(t[i],this);Du(s)?r.push(async function(){t[i]=await s}()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);Du(i)?r.push(async function(){t.blockTag=await i}()):t.blockTag=i}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(b(this,Ct)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw b(this,Ct)===i&&A(this,Ct,null),s}})();return A(this,Ct,i),(await i).clone()}const e=b(this,Ct),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(b(this,is)?(this.emit("network",r,t),b(this,Ct)===e&&A(this,Ct,Promise.resolve(r))):F(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:a}=await Ze({_block:z(this,re,wd).call(this,"latest",!1),gasPrice:(async()=>{try{const l=await z(this,re,Nt).call(this,{method:"getGasPrice"});return Q(l,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const l=await z(this,re,Nt).call(this,{method:"getPriorityFee"});return Q(l,"%response")}catch{}return null})()});let o=null,c=null;const u=this._wrapBlock(i,e);return u&&u.baseFeePerGas&&(c=a??BigInt("1000000000"),o=u.baseFeePerGas*H9+c),new gx(s,o,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new rr(r.url),s=await r.processFunc(t,this,i);return new gx(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Du(t)&&(t=await t),Q(await z(this,re,Nt).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await Ze({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await z(this,re,gd).call(this,z(this,re,xd).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return Q(await z(this,re,xc).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return ee(await z(this,re,xc).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return V(await z(this,re,xc).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const i=Q(t,"position");return V(await z(this,re,xc).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await Ze({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=Oo.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:i}=await Ze({network:this.getNetwork(),params:z(this,re,wd).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await Ze({network:this.getNetwork(),params:z(this,re,Nt).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await Ze({network:this.getNetwork(),params:z(this,re,Nt).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await z(this,re,Nt).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await Ze({network:this.getNetwork(),result:z(this,re,Nt).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:V(t)}async getLogs(e){let t=this._getFilter(e);Du(t)&&(t=await t);const{network:r,params:i}=await Ze({network:this.getNetwork(),params:z(this,re,Nt).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){F(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await ku.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=ae(e);const t=bf(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await ku.getEnsAddress(this),s=await new Go(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===So)return null;const o=await new Go(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(o)!==e?null:o}catch(r){if(ze(r,"BAD_DATA")&&r.value==="0x"||ze(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,a)=>{let o=null;const c=async u=>{try{const l=await this.getTransactionReceipt(e);if(l!=null&&u-l.blockNumber+1>=i){s(l),o&&(clearTimeout(o),o=null);return}}catch(l){console.log("EEE",l)}this.once("block",c)};r!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",c),a(ve("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){F(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=b(this,Zt).get(e);t&&(t.timer&&clearTimeout(t.timer),b(this,Zt).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=bc(this,lc)._++,i=()=>{b(this,Zt).delete(r),e()};if(this.paused)b(this,Zt).set(r,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);b(this,Zt).set(r,{timer:s,func:i,time:kf()})}return r}_forEachSubscriber(e){for(const t of b(this,nt).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Gx(e.type);case"block":{const t=new D9(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new U9(this,e.type);case"event":return new Rf(this,e.filter);case"transaction":return new G9(this,e.hash);case"orphan":return new F9(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of b(this,nt).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),b(this,rt)!=null&&t.pause(b(this,rt));break}}async on(e,t){const r=await z(this,re,d0).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,b(this,rt)!=null&&r.subscriber.pause(b(this,rt))),this}async once(e,t){const r=await z(this,re,d0).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,b(this,rt)!=null&&r.subscriber.pause(b(this,rt))),this}async emit(e,...t){const r=await z(this,re,gc).call(this,e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:a})=>{const o=new Iy(this,a?null:s,e);try{s.call(this,...t,o)}catch{}return!a}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),b(this,nt).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await z(this,re,gc).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of b(this,nt).values())t+=r.length;return t}async listeners(e){if(e){const r=await z(this,re,gc).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of b(this,nt).values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await z(this,re,gc).call(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),b(this,nt).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await z(this,re,d0).call(this,e);r&&i.stop(),b(this,nt).delete(t)}else for(const[t,{started:r,subscriber:i}]of b(this,nt))r&&i.stop(),b(this,nt).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return b(this,Ha)}destroy(){this.removeAllListeners();for(const e of b(this,Zt).keys())this._clearTimeout(e);A(this,Ha,!0)}get paused(){return b(this,rt)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(A(this,Ir,-1),b(this,rt)!=null){if(b(this,rt)==!!e)return;F(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),A(this,rt,!!e);for(const t of b(this,Zt).values())t.timer&&clearTimeout(t.timer),t.time=kf()-t.time}resume(){if(b(this,rt)!=null){this._forEachSubscriber(e=>e.resume()),A(this,rt,null);for(const e of b(this,Zt).values()){let t=e.time;t<0&&(t=0),e.time=kf(),setTimeout(e.func,t)}}}}nt=new WeakMap,ri=new WeakMap,rt=new WeakMap,Ha=new WeakMap,Ct=new WeakMap,is=new WeakMap,ii=new WeakMap,Ir=new WeakMap,lc=new WeakMap,Zt=new WeakMap,$a=new WeakMap,Va=new WeakMap,re=new WeakSet,Nt=async function(e){const t=b(this,Va).cacheTimeout;if(t<0)return await this._perform(e);const r=Uu(e.method,e);let i=b(this,ii).get(r);return i||(i=this._perform(e),b(this,ii).set(r,i),setTimeout(()=>{b(this,ii).get(r)===i&&b(this,ii).delete(r)},t)),await i},xd=async function(e,t,r){F(r<$9,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=Mo(e);try{return V(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&Ol(s)&&s.data&&r>=0&&t==="latest"&&i.to!=null&&we(s.data,0,4)==="0x556f1830"){const a=s.data,o=await Fe(i.to,this);let c;try{c=J9(we(s.data,4))}catch(f){F(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:a}})}F(c.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(i,c.calldata,c.urls);F(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const l={to:o,data:fe([c.selector,q9([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const f=await z(this,re,xd).call(this,l,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:f}),f}}throw s}},gd=async function(e){const{value:t}=await Ze({network:this.getNetwork(),value:e});return t},xc=async function(e,t,r){let i=this._getAddress(t),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await z(this,re,gd).call(this,z(this,re,Nt).call(this,Object.assign(e,{address:i,blockTag:s})))},wd=async function(e,t){if(xe(e,32))return await z(this,re,Nt).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await z(this,re,Nt).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},gc=async function(e,t){let r=await _f(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await _f({orphan:"drop-log",log:t[0]},this)),b(this,nt).get(r.tag)||null},d0=async function(e){const t=await _f(e,this),r=t.tag;let i=b(this,nt).get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},b(this,nt).set(r,i)),i};function W9(n,e){try{const t=Lf(n,e);if(t)return ru(t)}catch{}return null}function Lf(n,e){if(n==="0x")return null;try{const t=ee(we(n,e,e+32)),r=ee(we(n,t,t+32));return we(n,t+32,t+32+r)}catch{}return null}function Hx(n){const e=Ee(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function K9(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const Q9=new Uint8Array([]);function q9(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(Q9),t+=32;for(let r=0;r<n.length;r++){const i=K(n[r]);e[r]=Hx(t),e.push(Hx(i.length)),e.push(K9(i)),t+=32+Math.ceil(i.length/32)*32}return fe(e)}const $x="0x0000000000000000000000000000000000000000000000000000000000000000";function J9(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};F(tr(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=we(n,0,32);F(we(t,0,12)===we($x,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=we(t,12);try{const r=[],i=ee(we(n,32,64)),s=ee(we(n,i,i+32)),a=we(n,i+32);for(let o=0;o<s;o++){const c=W9(a,o*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{F(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Lf(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{F(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}F(we(n,100,128)===we($x,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=we(n,96,100);try{const r=Lf(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{F(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Li(n,e){if(n.provider)return n.provider;F(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Vx(n,e){let t=Mo(e);if(t.to!=null&&(t.to=Fe(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),Fe(r,n)]).then(([i,s])=>(E(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=n.getAddress();return await Ze(t)}class Mf{constructor(e){I(this,"provider");Y(this,{provider:e||null})}async getNonce(e){return Li(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Vx(this,e)}async populateTransaction(e){const t=Li(this,"populateTransaction"),r=await Vx(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const a=Q(r.chainId);E(a===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?E(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&E(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const a=await t.getFeeData();F(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice)}else{const a=await t.getFeeData();if(r.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(F(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice),r.type=0):F(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await Ze(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Li(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Li(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Li(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Li(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Li(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=Oo.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){F(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}const ud=class ud extends Mf{constructor(t,r){super(r);B(this,za);I(this,"address");Y(this,{address:t})}async getAddress(){return this.address}connect(t){return new ud(this.address,t)}async signTransaction(t){z(this,za,p0).call(this,"transactions","signTransaction")}async signMessage(t){z(this,za,p0).call(this,"messages","signMessage")}async signTypedData(t,r,i){z(this,za,p0).call(this,"typed-data","signTypedData")}};za=new WeakSet,p0=function(t,r){F(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:r})};let Df=ud;function Y9(n){return JSON.parse(JSON.stringify(n))}class zx{constructor(e){B(this,ai);B(this,ut);B(this,$n);B(this,ss);B(this,si);B(this,as);B(this,ja);A(this,ut,e),A(this,$n,null),A(this,ss,z(this,ai,Ad).bind(this)),A(this,si,!1),A(this,as,null),A(this,ja,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){b(this,si)||(A(this,si,!0),z(this,ai,Ad).call(this,-2))}stop(){b(this,si)&&(A(this,si,!1),A(this,ja,!0),z(this,ai,vd).call(this),b(this,ut).off("block",b(this,ss)))}pause(e){e&&z(this,ai,vd).call(this),b(this,ut).off("block",b(this,ss))}resume(){this.start()}}ut=new WeakMap,$n=new WeakMap,ss=new WeakMap,si=new WeakMap,as=new WeakMap,ja=new WeakMap,ai=new WeakSet,Ad=async function(e){try{b(this,$n)==null&&A(this,$n,this._subscribe(b(this,ut)));let t=null;try{t=await b(this,$n)}catch(s){if(!ze(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){A(this,$n,null),b(this,ut)._recoverSubscriber(this,this._recover(b(this,ut)));return}const r=await b(this,ut).getNetwork();if(b(this,as)||A(this,as,r),b(this,as).chainId!==r.chainId)throw new Error("chaid changed");if(b(this,ja))return;const i=await b(this,ut).send("eth_getFilterChanges",[t]);await this._emitResults(b(this,ut),i)}catch(t){console.log("@TODO",t)}b(this,ut).once("block",b(this,ss))},vd=function(){const e=b(this,$n);e&&(A(this,$n,null),e.then(t=>{b(this,ut).destroyed||b(this,ut).send("eth_uninstallFilter",[t])}))};class Z9 extends zx{constructor(t,r){super(t);B(this,os);A(this,os,Y9(r))}_recover(t){return new Rf(t,b(this,os))}async _subscribe(t){return await t.send("eth_newFilter",[b(this,os)])}async _emitResults(t,r){for(const i of r)t.emit(b(this,os),t._wrapLog(i,t._network))}}os=new WeakMap;class X9 extends zx{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const ev="bigint,boolean,function,number,string,symbol".split(/,/g);function Fu(n){if(n==null||ev.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(Fu);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function tv(n){return new Promise(e=>{setTimeout(e,n)})}function Qs(n){return n&&n.toLowerCase()}function jx(n){return n&&typeof n.pollingInterval=="number"}const Wx={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Uf extends Mf{constructor(t,r){super(t);I(this,"address");r=ae(r),Y(this,{address:r})}connect(t){F(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=Fu(t),i=[];if(r.from){const a=r.from;i.push((async()=>{const o=await Fe(a,this.provider);E(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=o})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const a=r.to;i.push((async()=>{r.to=await Fe(a,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,a)=>{const o=[1e3,100];let c=0;const u=async()=>{try{const l=await this.provider.getTransaction(i);if(l!=null){s(l.replaceableTransaction(r));return}}catch(l){if(ze(l,"CANCELLED")||ze(l,"BAD_DATA")||ze(l,"NETWORK_ERROR")||ze(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=i,a(l);return}if(ze(l,"INVALID_ARGUMENT")&&(c++,l.info==null&&(l.info={}),l.info.sendTransactionHash=i,c>10)){a(l);return}this.provider.emit("error",ve("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{u()},o.pop()||4e3)};u()})}async signTransaction(t){const r=Fu(t);if(r.from){const s=await Fe(r.from,this.provider);E(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const r=typeof t=="string"?Xe(t):t;return await this.provider.send("personal_sign",[V(r),this.address.toLowerCase()])}async signTypedData(t,r,i){const s=Fu(i),a=await Gr.resolveNames(t,r,s,async o=>{const c=await Fe(o);return E(c!=null,"TypedData does not support null address","value",o),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Gr.getPayload(a.domain,r,a.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?Xe(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),V(r)])}}class nv extends j9{constructor(t,r){super(t,r);B(this,fc);B(this,cs);B(this,Wa);B(this,Or);B(this,Vn);B(this,bn);B(this,Xt);B(this,At);A(this,Wa,1),A(this,cs,Object.assign({},Wx,r||{})),A(this,Or,[]),A(this,Vn,null),A(this,Xt,null),A(this,At,null);{let s=null;const a=new Promise(o=>{s=o});A(this,bn,{promise:a,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(E(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&t!=null&&A(this,Xt,Cn.from(t))):i&&(E(t==null||i.matches(t),"staticNetwork MUST match network object","options",r),A(this,Xt,i))}_getOption(t){return b(this,cs)[t]}get _network(){return F(b(this,Xt),"network is not available yet","NETWORK_ERROR"),b(this,Xt)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Q(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(b(this,Xt))return b(this,Xt)}else return t;return b(this,At)?await b(this,At):this.ready?(A(this,At,(async()=>{try{const r=Cn.from(Q(await this.send("eth_chainId",[])));return A(this,At,null),r}catch(r){throw A(this,At,null),r}})()),await b(this,At)):(A(this,At,(async()=>{const r={id:bc(this,Wa)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],A(this,At,null)}catch(s){throw A(this,At,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Cn.from(Q(i.result));throw this.getRpcError(r,i)})()),await b(this,At))}_start(){b(this,bn)==null||b(this,bn).resolve==null||(b(this,bn).resolve(),A(this,bn,null),(async()=>{for(;b(this,Xt)==null&&!this.destroyed;)try{A(this,Xt,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ve("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await tv(1e3)}z(this,fc,Ed).call(this)})())}async _waitUntilReady(){if(b(this,bn)!=null)return await b(this,bn).promise}_getSubscriber(t){return t.type==="pending"?new X9(this):t.type==="event"?this._getOption("polling")?new Rf(this,t.filter):new Z9(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new Gx("orphan"):super._getSubscriber(t)}get ready(){return b(this,bn)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=an(Q(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(r[i]=V(t[i]))}),t.accessList&&(r.accessList=Si(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(i=>{const s=pm(i);return{address:s.address,nonce:an(s.nonce),chainId:an(s.chainId),yParity:an(s.signature.yParity),r:an(s.signature.r),s:an(s.signature.s)}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Qs(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Qs(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Qs(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Qs(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Qs):t.filter.address=Qs(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:i}=t,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const c=s.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return ve("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(c.match(/nonce/i)&&c.match(/too low/i))return ve("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const c=Ff(s),u=ct.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],c?c.data:null);return u.info={error:s,payload:t},u}const a=JSON.stringify(sv(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return ve("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const c=t.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return ve("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:s}});if(a.match(/nonce/i)&&a.match(/too low/i))return ve("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:s}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return ve("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:s}});if(a.match(/only replay-protected/i))return ve("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:c,info:{error:s}}})}let o=!!a.match(/the method .* does not exist/i);return o||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(o=!0),o?ve("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):ve("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,r){if(this.destroyed)return Promise.reject(ve("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=bc(this,Wa)._++,s=new Promise((a,o)=>{b(this,Or).push({resolve:a,reject:o,payload:{method:t,params:r,id:i,jsonrpc:"2.0"}})});return z(this,fc,Ed).call(this),s}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await r;if(t>=s.length)throw new Error("no such account");return new Uf(this,s[t])}const{accounts:i}=await Ze({network:this.getNetwork(),accounts:r});t=ae(t);for(const s of i)if(ae(s)===t)return new Uf(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Uf(this,r))}destroy(){b(this,Vn)&&(clearTimeout(b(this,Vn)),A(this,Vn,null));for(const{payload:t,reject:r}of b(this,Or))r(ve("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));A(this,Or,[]),super.destroy()}}cs=new WeakMap,Wa=new WeakMap,Or=new WeakMap,Vn=new WeakMap,bn=new WeakMap,Xt=new WeakMap,At=new WeakMap,fc=new WeakSet,Ed=function(){if(b(this,Vn))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");A(this,Vn,setTimeout(()=>{A(this,Vn,null);const r=b(this,Or);for(A(this,Or,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==b(this,cs).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(a=>a.payload)).length>b(this,cs).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const a=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:c,payload:u}of i){if(this.destroyed){c(ve("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const l=a.filter(f=>f.id===u.id)[0];if(l==null){const f=ve("missing response for request","BAD_DATA",{value:a,info:{payload:u}});this.emit("error",f),c(f);continue}if("error"in l){c(this.getRpcError(u,l));continue}o(l.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of i)o(a)}})()}},t))};class rv extends nv{constructor(t,r){super(t,r);B(this,oi);let i=this._getOption("pollingInterval");i==null&&(i=Wx.pollingInterval),A(this,oi,i)}_getSubscriber(t){const r=super._getSubscriber(t);return jx(r)&&(r.pollingInterval=b(this,oi)),r}get pollingInterval(){return b(this,oi)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");A(this,oi,t),this._forEachSubscriber(r=>{jx(r)&&(r.pollingInterval=b(this,oi))})}}oi=new WeakMap;class iv extends rv{constructor(t,r,i){t==null&&(t="http://localhost:8545");super(r,i);B(this,Ka);typeof t=="string"?A(this,Ka,new rr(t)):A(this,Ka,t.clone())}_getConnection(){return b(this,Ka).clone()}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){const r=this._getConnection();r.body=JSON.stringify(t),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}Ka=new WeakMap;function Ff(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&xe(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=Ff(n[e]);if(t)return t}return null}if(typeof n=="string")try{return Ff(JSON.parse(n))}catch{}return null}function Gf(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)Gf(n[t],e);if(typeof n=="string")try{return Gf(JSON.parse(n),e)}catch{}}}function sv(n){const e=[];return Gf(n,e),e}const ld=class ld extends Mf{constructor(t,r){super(r);I(this,"address");B(this,Qa);E(t&&typeof t.sign=="function","invalid private key","privateKey","[ REDACTED ]"),A(this,Qa,t);const i=Io(this.signingKey.publicKey);Y(this,{address:i})}get signingKey(){return b(this,Qa)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new ld(b(this,Qa),t)}async signTransaction(t){t=Mo(t);const{to:r,from:i}=await Ze({to:t.to?Fe(t.to,this):void 0,from:t.from?Fe(t.from,this):void 0});r!=null&&(t.to=r),i!=null&&(t.from=i),t.from!=null&&(E(ae(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const s=Oo.from(t);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign($m(t)).serialized}authorizeSync(t){E(typeof t.address=="string","invalid address for authorizeSync","auth.address",t);const r=this.signingKey.sign(e4(t));return Object.assign({},{address:ae(t.address),nonce:Q(t.nonce||0),chainId:Q(t.chainId||0)},{signature:r})}async authorize(t){return t=Object.assign({},t,{address:await Fe(t.address,this)}),this.authorizeSync(await this.populateAuthorization(t))}async signTypedData(t,r,i){const s=await Gr.resolveNames(t,r,i,async a=>{F(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:a}});const o=await this.provider.resolveName(a);return F(o!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:a}),o});return this.signingKey.sign(Gr.hash(s.domain,r,s.value)).serialized}};Qa=new WeakMap;let Gu=ld;const Hu=" !#$%&'()*+,-./<=>?@[]^_`{|}~",av=/^[a-z]*$/i;function Kx(n,e){let t=97;return n.reduce((r,i)=>(i===e?t++:i.match(av)?r.push(String.fromCharCode(t)+i):(t=97,r.push(i)),r),[])}function ov(n,e){for(let i=Hu.length-1;i>=0;i--)n=n.split(Hu[i]).join(e.substring(2*i,2*i+2));const t=[],r=n.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,a,o)=>{if(a)for(let c=parseInt(a);c>=0;c--)t.push(";");else t.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return Kx(Kx(t,";"),":")}function cv(n){return E(n[0]==="0","unsupported auwl data","data",n),ov(n.substring(1+2*Hu.length),n.substring(1,1+2*Hu.length))}class uv{constructor(e){I(this,"locale");Y(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}class lv extends uv{constructor(t,r,i){super(t);B(this,pc);B(this,qa);B(this,dc);B(this,us);A(this,qa,r),A(this,dc,i),A(this,us,null)}get _data(){return b(this,qa)}_decodeWords(){return cv(b(this,qa))}getWord(t){const r=z(this,pc,Td).call(this);return E(t>=0&&t<r.length,`invalid word index: ${t}`,"index",t),r[t]}getWordIndex(t){return z(this,pc,Td).call(this).indexOf(t)}}qa=new WeakMap,dc=new WeakMap,us=new WeakMap,pc=new WeakSet,Td=function(){if(b(this,us)==null){const t=this._decodeWords();if(Sn(t.join(`
`)+`
`)!==b(this,dc))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);A(this,us,t)}return b(this,us)};const fv="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",dv="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let Hf=null;class Mi extends lv{constructor(){super("en",fv,dv)}static wordlist(){return Hf==null&&(Hf=new Mi),Hf}}function Qx(n){return(1<<n)-1<<8-n&255}function pv(n){return(1<<n)-1&255}function $f(n,e){wy("NFKD"),e==null&&(e=Mi.wordlist());const t=e.split(n);E(t.length%3===0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*t.length/8));let i=0;for(let u=0;u<t.length;u++){let l=e.getWordIndex(t[u].normalize("NFKD"));E(l>=0,`invalid mnemonic word at index ${u}`,"mnemonic","[ REDACTED ]");for(let f=0;f<11;f++)l&1<<10-f&&(r[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,a=t.length/3,o=Qx(a),c=K(Ut(r.slice(0,s/8)))[0]&o;return E(c===(r[r.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),V(r.slice(0,s/8))}function Vf(n,e){E(n.length%4===0&&n.length>=16&&n.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Mi.wordlist());const t=[0];let r=11;for(let a=0;a<n.length;a++)r>8?(t[t.length-1]<<=8,t[t.length-1]|=n[a],r-=8):(t[t.length-1]<<=r,t[t.length-1]|=n[a]>>8-r,t.push(n[a]&pv(8-r)),r+=3);const i=n.length/4,s=parseInt(Ut(n).substring(2,4),16)&Qx(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(a=>e.getWord(a)))}const zf={};class qs{constructor(e,t,r,i,s){I(this,"phrase");I(this,"password");I(this,"wordlist");I(this,"entropy");i==null&&(i=""),s==null&&(s=Mi.wordlist()),Ai(e,zf,"Mnemonic"),Y(this,{phrase:r,password:i,wordlist:s,entropy:t})}computeSeed(){const e=Xe("mnemonic"+this.password,"NFKD");return Ur(Xe(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){const i=$f(e,r);return e=Vf(K(i),r),new qs(zf,i,e,t,r)}static fromEntropy(e,t,r){const i=K(e,"entropy"),s=Vf(i,r);return new qs(zf,V(i),s,t,r)}static entropyToPhrase(e,t){const r=K(e,"entropy");return Vf(r,t)}static phraseToEntropy(e,t){return $f(e,t)}static isValidMnemonic(e,t){try{return $f(e,t),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Qe=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},jf=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},$u,Ht,Nn;const hv={16:10,24:12,32:14},yv=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],$t=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Vu=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],bv=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],mv=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],xv=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],gv=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],wv=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Av=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],vv=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Ev=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Tv=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Pv=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Sv=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Iv=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Wf(n){const e=[];for(let t=0;t<n.length;t+=4)e.push(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]);return e}class Kf{get key(){return Qe(this,$u,"f").slice()}constructor(e){if($u.set(this,void 0),Ht.set(this,void 0),Nn.set(this,void 0),!(this instanceof Kf))throw Error("AES must be instanitated with `new`");jf(this,$u,new Uint8Array(e),"f");const t=hv[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");jf(this,Nn,[],"f"),jf(this,Ht,[],"f");for(let l=0;l<=t;l++)Qe(this,Nn,"f").push([0,0,0,0]),Qe(this,Ht,"f").push([0,0,0,0]);const r=(t+1)*4,i=this.key.length/4,s=Wf(this.key);let a;for(let l=0;l<i;l++)a=l>>2,Qe(this,Nn,"f")[a][l%4]=s[l],Qe(this,Ht,"f")[t-a][l%4]=s[l];let o=0,c=i,u;for(;c<r;){if(u=s[i-1],s[0]^=$t[u>>16&255]<<24^$t[u>>8&255]<<16^$t[u&255]<<8^$t[u>>24&255]^yv[o]<<24,o+=1,i!=8)for(let p=1;p<i;p++)s[p]^=s[p-1];else{for(let p=1;p<i/2;p++)s[p]^=s[p-1];u=s[i/2-1],s[i/2]^=$t[u&255]^$t[u>>8&255]<<8^$t[u>>16&255]<<16^$t[u>>24&255]<<24;for(let p=i/2+1;p<i;p++)s[p]^=s[p-1]}let l=0,f,d;for(;l<i&&c<r;)f=c>>2,d=c%4,Qe(this,Nn,"f")[f][d]=s[l],Qe(this,Ht,"f")[t-f][d]=s[l++],c++}for(let l=1;l<t;l++)for(let f=0;f<4;f++)u=Qe(this,Ht,"f")[l][f],Qe(this,Ht,"f")[l][f]=Tv[u>>24&255]^Pv[u>>16&255]^Sv[u>>8&255]^Iv[u&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const t=Qe(this,Nn,"f").length-1,r=[0,0,0,0];let i=Wf(e);for(let o=0;o<4;o++)i[o]^=Qe(this,Nn,"f")[0][o];for(let o=1;o<t;o++){for(let c=0;c<4;c++)r[c]=bv[i[c]>>24&255]^mv[i[(c+1)%4]>>16&255]^xv[i[(c+2)%4]>>8&255]^gv[i[(c+3)%4]&255]^Qe(this,Nn,"f")[o][c];i=r.slice()}const s=new Uint8Array(16);let a=0;for(let o=0;o<4;o++)a=Qe(this,Nn,"f")[t][o],s[4*o]=($t[i[o]>>24&255]^a>>24)&255,s[4*o+1]=($t[i[(o+1)%4]>>16&255]^a>>16)&255,s[4*o+2]=($t[i[(o+2)%4]>>8&255]^a>>8)&255,s[4*o+3]=($t[i[(o+3)%4]&255]^a)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const t=Qe(this,Ht,"f").length-1,r=[0,0,0,0];let i=Wf(e);for(let o=0;o<4;o++)i[o]^=Qe(this,Ht,"f")[0][o];for(let o=1;o<t;o++){for(let c=0;c<4;c++)r[c]=wv[i[c]>>24&255]^Av[i[(c+3)%4]>>16&255]^vv[i[(c+2)%4]>>8&255]^Ev[i[(c+1)%4]&255]^Qe(this,Ht,"f")[o][c];i=r.slice()}const s=new Uint8Array(16);let a=0;for(let o=0;o<4;o++)a=Qe(this,Ht,"f")[t][o],s[4*o]=(Vu[i[o]>>24&255]^a>>24)&255,s[4*o+1]=(Vu[i[(o+3)%4]>>16&255]^a>>16)&255,s[4*o+2]=(Vu[i[(o+2)%4]>>8&255]^a>>8)&255,s[4*o+3]=(Vu[i[(o+1)%4]&255]^a)&255;return s}}$u=new WeakMap,Ht=new WeakMap,Nn=new WeakMap;class qx{constructor(e,t,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Kf(t)},name:{enumerable:!0,value:e}})}}var zu=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Js=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},zo,hr;class Qf extends qx{constructor(e,t){if(super("ECC",e,Qf),zo.set(this,void 0),hr.set(this,void 0),t){if(t.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");zu(this,zo,new Uint8Array(t),"f")}else zu(this,zo,new Uint8Array(16),"f");zu(this,hr,this.iv,"f")}get iv(){return new Uint8Array(Js(this,zo,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)Js(this,hr,"f")[i]^=e[r+i];zu(this,hr,this.aes.encrypt(Js(this,hr,"f")),"f"),t.set(Js(this,hr,"f"),r)}return t}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)t[r+s]=i[s]^Js(this,hr,"f")[s],Js(this,hr,"f")[s]=e[r+s]}return t}}zo=new WeakMap,hr=new WeakMap;var Ys=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Vt=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},jo,Di,zt;class Zs extends qx{constructor(e,t){super("CTR",e,Zs),jo.set(this,void 0),Di.set(this,void 0),zt.set(this,void 0),Ys(this,zt,new Uint8Array(16),"f"),Vt(this,zt,"f").fill(0),Ys(this,jo,Vt(this,zt,"f"),"f"),Ys(this,Di,16,"f"),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(Vt(this,zt,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)Vt(this,zt,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Vt(this,zt,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Vt(this,zt,"f")[e]===255)Vt(this,zt,"f")[e]=0;else{Vt(this,zt,"f")[e]++;break}}encrypt(e){var t,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)Vt(this,Di,"f")===16&&(Ys(this,jo,this.aes.encrypt(Vt(this,zt,"f")),"f"),Ys(this,Di,0,"f"),this.increment()),i[s]^=Vt(this,jo,"f")[Ys(this,Di,(r=Vt(this,Di,"f"),t=r++,r),"f"),t];return i}decrypt(e){return this.encrypt(e)}}jo=new WeakMap,Di=new WeakMap,zt=new WeakMap;function Ov(n){if(n.length<16)throw new TypeError("PKCS#7 invalid length");const e=n[n.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const t=n.length-e;for(let r=0;r<e;r++)if(n[t+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(n.subarray(0,t))}function Jx(n){return typeof n=="string"&&!n.startsWith("0x")&&(n="0x"+n),je(n)}function Wo(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function Ko(n){return typeof n=="string"?Xe(n,"NFKC"):je(n)}function Ne(n,e){const t=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);E(t!=null,"invalid path","path",e);const r=t[1],i=t[3],s=t[4]==="!";let a=n;for(const o of r.toLowerCase().split(".")){if(Array.isArray(a)){if(!o.match(/^[0-9]+$/))break;a=a[parseInt(o)]}else if(typeof a=="object"){let c=null;for(const u in a)if(u.toLowerCase()===o){c=a[u];break}a=c}else a=null;if(a==null)break}if(E(!s||a!=null,"missing required value","path",r),i&&a!=null){if(i==="int"){if(typeof a=="string"&&a.match(/^-?[0-9]+$/))return parseInt(a);if(Number.isSafeInteger(a))return a}if(i==="number"&&typeof a=="string"&&a.match(/^-?[0-9.]*$/))return parseFloat(a);if(i==="data"&&typeof a=="string")return Jx(a);if(i==="array"&&Array.isArray(a)||i===typeof a)return a;E(!1,`wrong type found for ${i} `,"path",r)}return a}const Yx="m/44'/60'/0'/0/0";function Zx(n){try{const e=JSON.parse(n);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function Cv(n,e,t){if(Ne(n,"crypto.cipher:string")==="aes-128-ctr"){const i=Ne(n,"crypto.cipherparams.iv:data!"),s=new Zs(e,i);return V(s.decrypt(t))}F(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function ju(n,e){const t=K(e),r=Ne(n,"crypto.ciphertext:data!"),i=V(de(fe([t.slice(16,32),r]))).substring(2);E(i===Ne(n,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=Cv(n,t.slice(0,16),r),a=Io(s);if(n.address){let u=n.address.toLowerCase();u.startsWith("0x")||(u="0x"+u),E(ae(u)===a,"keystore address/privateKey mismatch","address",n.address)}const o={address:a,privateKey:s};if(Ne(n,"x-ethers.version:string")==="0.1"){const u=t.slice(32,64),l=Ne(n,"x-ethers.mnemonicCiphertext:data!"),f=Ne(n,"x-ethers.mnemonicCounter:data!"),d=new Zs(u,f);o.mnemonic={path:Ne(n,"x-ethers.path:string")||Yx,locale:Ne(n,"x-ethers.locale:string")||"en",entropy:V(K(d.decrypt(l)))}}return o}function Xx(n){const e=Ne(n,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const t=Ne(n,"crypto.kdfparams.salt:data!"),r=Ne(n,"crypto.kdfparams.n:int!"),i=Ne(n,"crypto.kdfparams.r:int!"),s=Ne(n,"crypto.kdfparams.p:int!");E(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),E(i>0&&s>0,"invalid kdf","kdf",e);const a=Ne(n,"crypto.kdfparams.dklen:int!");return E(a===32,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:t,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const t=Ne(n,"crypto.kdfparams.salt:data!"),r=Ne(n,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();E(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=Ne(n,"crypto.kdfparams.c:int!"),a=Ne(n,"crypto.kdfparams.dklen:int!");return E(a===32,"invalid kdf.dklen","kdf.dklen",a),{name:"pbkdf2",salt:t,count:s,dkLen:a,algorithm:i}}}E(!1,"unsupported key-derivation function","kdf",e)}function Nv(n,e){const t=JSON.parse(n),r=Ko(e),i=Xx(t);if(i.name==="pbkdf2"){const{salt:f,count:d,dkLen:p,algorithm:y}=i,h=Ur(r,f,d,p,y);return ju(t,h)}F(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:a,r:o,p:c,dkLen:u}=i,l=Ms(r,s,a,o,c,u);return ju(t,l)}function e1(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}async function Rv(n,e,t){const r=JSON.parse(n),i=Ko(e),s=Xx(r);if(s.name==="pbkdf2"){t&&(t(0),await e1(0));const{salt:d,count:p,dkLen:y,algorithm:h}=s,m=Ur(i,d,p,y,h);return t&&(t(1),await e1(0)),ju(r,m)}F(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:a,N:o,r:c,p:u,dkLen:l}=s,f=await Ls(i,a,o,c,u,l,t);return ju(r,f)}function t1(n){const e=n.salt!=null?K(n.salt,"options.salt"):ar(32);let t=1<<17,r=8,i=1;return n.scrypt&&(n.scrypt.N&&(t=n.scrypt.N),n.scrypt.r&&(r=n.scrypt.r),n.scrypt.p&&(i=n.scrypt.p)),E(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),E(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),E(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:t,r,p:i}}function n1(n,e,t,r){const i=K(t.privateKey,"privateKey"),s=r.iv!=null?K(r.iv,"options.iv"):ar(16);E(s.length===16,"invalid options.iv length","options.iv",r.iv);const a=r.uuid!=null?K(r.uuid,"options.uuid"):ar(16);E(a.length===16,"invalid options.uuid length","options.uuid",r.iv);const o=n.slice(0,16),c=n.slice(16,32),u=new Zs(o,s),l=K(u.encrypt(i)),f=de(fe([c,l])),d={address:t.address.substring(2).toLowerCase(),id:F8(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:V(s).substring(2)},ciphertext:V(l).substring(2),kdf:"scrypt",kdfparams:{salt:V(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:f.substring(2)}};if(t.mnemonic){const p=r.client!=null?r.client:`ethers/${xy}`,y=t.mnemonic.path||Yx,h=t.mnemonic.locale||"en",m=n.slice(32,64),x=K(t.mnemonic.entropy,"account.mnemonic.entropy"),w=ar(16),g=new Zs(m,w),v=K(g.encrypt(x)),S=new Date,R="UTC--"+(S.getUTCFullYear()+"-"+Wo(S.getUTCMonth()+1,2)+"-"+Wo(S.getUTCDate(),2)+"T"+Wo(S.getUTCHours(),2)+"-"+Wo(S.getUTCMinutes(),2)+"-"+Wo(S.getUTCSeconds(),2)+".0Z")+"--"+d.address;d["x-ethers"]={client:p,gethFilename:R,path:y,locale:h,mnemonicCounter:V(w).substring(2),mnemonicCiphertext:V(v).substring(2),version:"0.1"}}return JSON.stringify(d)}function r1(n,e,t){t==null&&(t={});const r=Ko(e),i=t1(t),s=Ms(r,i.salt,i.N,i.r,i.p,64);return n1(K(s),i,n,t)}async function i1(n,e,t){t==null&&(t={});const r=Ko(e),i=t1(t),s=await Ls(r,i.salt,i.N,i.r,i.p,64,t.progressCallback);return n1(K(s),i,n,t)}const qf="m/44'/60'/0'/0/0",Bv=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),$r=2147483648,_v=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kv="0123456789abcdef";function Wu(n,e){let t="";for(;n;)t=kv[n%16]+t,n=Math.trunc(n/16);for(;t.length<e*2;)t="0"+t;return"0x"+t}function Jf(n){const e=K(n),t=we(Ut(Ut(e)),0,4),r=fe([e,t]);return Sy(r)}const Rn={};function s1(n,e,t,r){const i=new Uint8Array(37);n&$r?(F(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(K(r),1)):i.set(K(t));for(let a=24;a>=0;a-=8)i[33+(a>>3)]=n>>24-a&255;const s=K(Bs("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function a1(n,e){const t=e.split("/");E(t.length>0,"invalid path","path",e),t[0]==="m"&&(E(n.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${n.depth}`,"path",e),t.shift());let r=n;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const a=parseInt(s.substring(0,s.length-1));E(a<$r,"invalid path index",`path[${i}]`,s),r=r.deriveChild($r+a)}else if(s.match(/^[0-9]+$/)){const a=parseInt(s);E(a<$r,"invalid path index",`path[${i}]`,s),r=r.deriveChild(a)}else E(!1,"invalid path component",`path[${i}]`,s)}return r}const mn=class mn extends Gu{constructor(t,r,i,s,a,o,c,u,l){super(r,l);B(this,hc);I(this,"publicKey");I(this,"fingerprint");I(this,"parentFingerprint");I(this,"mnemonic");I(this,"chainCode");I(this,"path");I(this,"index");I(this,"depth");Ai(t,Rn,"HDNodeWallet"),Y(this,{publicKey:r.compressedPublicKey});const f=we(_s(Ut(this.publicKey)),0,4);Y(this,{parentFingerprint:i,fingerprint:f,chainCode:s,path:a,index:o,depth:c}),Y(this,{mnemonic:u})}connect(t){return new mn(Rn,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}async encrypt(t,r){return await i1(z(this,hc,Pd).call(this),t,{progressCallback:r})}encryptSync(t){return r1(z(this,hc,Pd).call(this),t)}get extendedKey(){return F(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Jf(fe(["0x0488ADE4",Wu(this.depth,1),this.parentFingerprint,Wu(this.index,4),this.chainCode,fe(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new qo(Rn,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const r=ee(t,"index");E(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~$r),r&$r&&(i+="'"));const{IR:s,IL:a}=s1(r,this.chainCode,this.publicKey,this.privateKey),o=new Pn(nr((eu(a)+BigInt(this.privateKey))%_v,32));return new mn(Rn,o,this.fingerprint,V(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return a1(this,t)}static fromExtendedKey(t){const r=Ee(E8(t));E(r.length===82||Jf(r.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=V(r.slice(5,9)),a=parseInt(V(r.slice(9,13)).substring(2),16),o=V(r.slice(13,45)),c=r.slice(45,78);switch(V(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const u=V(c);return new qo(Rn,Io(u),u,s,o,null,a,i,null)}case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new mn(Rn,new Pn(c.slice(1)),s,o,null,a,i,null,null)}E(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,r,i){var a;t==null&&(t=""),r==null&&(r=qf),i==null&&(i=Mi.wordlist());const s=qs.fromEntropy(ar(16),t,i);return z(a=mn,ls,wc).call(a,s.computeSeed(),s).derivePath(r)}static fromMnemonic(t,r){var i;return r||(r=qf),z(i=mn,ls,wc).call(i,t.computeSeed(),t).derivePath(r)}static fromPhrase(t,r,i,s){var o;r==null&&(r=""),i==null&&(i=qf),s==null&&(s=Mi.wordlist());const a=qs.fromPhrase(t,r,s);return z(o=mn,ls,wc).call(o,a.computeSeed(),a).derivePath(i)}static fromSeed(t){var r;return z(r=mn,ls,wc).call(r,t,null)}};hc=new WeakSet,Pd=function(){const t={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(t.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),t},ls=new WeakSet,wc=function(t,r){E(Yc(t),"invalid seed","seed","[REDACTED]");const i=K(t,"seed");E(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=K(Bs("sha512",Bv,i)),a=new Pn(V(s.slice(0,32)));return new mn(Rn,a,"0x00000000",V(s.slice(32)),"m",0,0,r,null)},B(mn,ls);let Qo=mn;class qo extends Df{constructor(t,r,i,s,a,o,c,u,l){super(r,l);I(this,"publicKey");I(this,"fingerprint");I(this,"parentFingerprint");I(this,"chainCode");I(this,"path");I(this,"index");I(this,"depth");Ai(t,Rn,"HDNodeVoidWallet"),Y(this,{publicKey:i});const f=we(_s(Ut(i)),0,4);Y(this,{publicKey:i,fingerprint:f,parentFingerprint:s,chainCode:a,path:o,index:c,depth:u})}connect(t){return new qo(Rn,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return F(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Jf(fe(["0x0488B21E",Wu(this.depth,1),this.parentFingerprint,Wu(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(t){const r=ee(t,"index");E(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~$r),r&$r&&(i+="'"));const{IR:s,IL:a}=s1(r,this.chainCode,this.publicKey,null),o=Pn.addPoints(a,this.publicKey,!0),c=Io(o);return new qo(Rn,c,o,this.fingerprint,V(s),i,r,this.depth+1,this.provider)}derivePath(t){return a1(this,t)}}function o1(n){try{if(JSON.parse(n).encseed)return!0}catch{}return!1}function c1(n,e){const t=JSON.parse(n),r=Ko(e),i=ae(Ne(t,"ethaddr:string!")),s=Jx(Ne(t,"encseed:string!"));E(s&&s.length%16===0,"invalid encseed","json",n);const a=K(Ur(r,r,2e3,32,"sha256")).slice(0,16),o=s.slice(0,16),c=s.slice(16),u=new Qf(a,o),l=Ov(K(u.decrypt(c)));let f="";for(let d=0;d<l.length;d++)f+=String.fromCharCode(l[d]);return{address:i,privateKey:Sn(f)}}function u1(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}const fs=class fs extends Gu{constructor(e,t){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new Pn(e):e;super(r,t)}connect(e){return new fs(this.signingKey,e)}async encrypt(e,t){const r={address:this.address,privateKey:this.privateKey};return await i1(r,e,{progressCallback:t})}encryptSync(e){const t={address:this.address,privateKey:this.privateKey};return r1(t,e)}static async fromEncryptedJson(e,t,r){var s;let i=null;return Zx(e)?i=await Rv(e,t,r):o1(e)&&(r&&(r(0),await u1(0)),i=c1(e,t),r&&(r(1),await u1(0))),z(s=fs,yc,Sd).call(s,i)}static fromEncryptedJsonSync(e,t){var i;let r=null;return Zx(e)?r=Nv(e,t):o1(e)?r=c1(e,t):E(!1,"invalid JSON wallet","json","[ REDACTED ]"),z(i=fs,yc,Sd).call(i,r)}static createRandom(e){const t=Qo.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){const r=Qo.fromPhrase(e);return t?r.connect(t):r}};yc=new WeakSet,Sd=function(e){if(E(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=qs.fromEntropy(e.mnemonic.entropy),i=Qo.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new fs(e.privateKey);return E(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t},B(fs,yc);let Yf=fs;var Xs=function(n){this.accountAddress=void 0,this.accountAddress=n};function l1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ea(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(i,s){if(i){if(typeof i=="string")return l1(i,s);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l1(i,s):void 0}}(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bn(){return Bn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bn.apply(null,arguments)}function Zf(n){return Zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zf(n)}function Jo(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Yo(n,e)}function f1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f1=function(){return!!n})()}function Yo(n,e){return Yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Yo(n,e)}function Xf(n){var e=typeof Map=="function"?new Map:void 0;return Xf=function(t){if(t===null||!function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(i,s,a){if(f1())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,s);var c=new(i.bind.apply(i,o));return a&&Yo(c,a.prototype),c}(t,arguments,Zf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Yo(r,t)},Xf(n)}Xs.proxyByteCode=void 0,Xs.initializerFunctionSelector=void 0,Xs.initializerFunctionInputAbi=void 0,Xs.executorFunctionSelector=void 0,Xs.executorFunctionInputAbi=void 0;var yr,Ui,d1,Fi="0x0000000000000000000000000000000000000000",ln="0x4337084D9E255Ff0702461CF8895CE9E3b5Ff108",qe="0x0000000071727De22E5E9d8BAf0edAc6f37da032",jt="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",ta={sender:Fi,nonce:0n,callData:"0x",callGasLimit:0n,verificationGasLimit:0n,preVerificationGas:0n,maxFeePerGas:0n,maxPriorityFeePerGas:0n,signature:"0x"},Lv={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},Mv={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint128",name:"verificationGasLimit"},{type:"uint128",name:"callGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint128",name:"maxPriorityFeePerGas"},{type:"uint128",name:"maxFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]};(function(n){n[n.Call=0]="Call",n[n.Delegate=1]="Delegate"})(yr||(yr={})),function(n){n[n.Slow=1]="Slow",n[n.Medium=1.2]="Medium",n[n.Fast=1.5]="Fast"}(Ui||(Ui={})),function(n){n.Mainnet="v2",n.ZkMainnet="zkevm",n.Amoy="amoy",n.Cardona="cardona"}(d1||(d1={}));var p1={"-32602":"INVALID_FIELDS","-32500":"SIMULATE_VALIDATION","-32501":"SIMULATE_PAYMASTER_VALIDATION","-32502":"OPCODE_VALIDATION","-32503":"EXPIRE_SHORTLY","-32504":"REPUTATION","-32505":"INSUFFICIENT_STAKE","-32506":"UNSUPPORTED_SIGNATURE_AGGREGATOR","-32507":"INVALID_SIGNATURE","-32601":"INVALID_USEROPERATION_HASH","-32521":"EXECUTION_REVERTED"},ne=function(n){function e(t,r,i){var s;i===void 0&&(i={});var a=i.errno,o=i.context;return(s=n.call(this,r,{cause:i.cause})||this).code=void 0,s.context=void 0,s.errno=void 0,s.name=s.constructor.name,s.code=t,s.errno=a,s.context=o,s}return Jo(e,n),e.prototype.stringify=function(){return JSON.stringify(this,["name","code","message","cause","errno","context"])},e}(Xf(Error));function Ae(n){if(n instanceof Error)return n;var e="[Unable to stringify the thrown value]";try{e=JSON.stringify(n)}catch{}return new Error("This value was thrown as is, not through an Error: "+e)}function Zo(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}var Dv=function(n,e,t){try{var r,i,s=function(o){return[r,i]};t===void 0&&(t=Ui.Medium);var a=e!=null?Promise.resolve(Uv(e,t)).then(function(o){r=o[0],i=o[1]}):function(){if(n!=null)return Promise.resolve(Fv(n,t)).then(function(o){r=o[0],i=o[1]});throw new ne("BAD_DATA","providerRpc cant't be null if maxFeePerGas and maxPriorityFeePerGas are not overriden")}();return Promise.resolve(a&&a.then?a.then(s):s())}catch(o){return Promise.reject(o)}},h1=function(n,e,t){try{var r=[e,t];return Promise.resolve(Zo(function(){return Promise.resolve(Re(n,"eth_getCode",r)).then(function(i){if(typeof i!="string")throw new ne("BAD_DATA","eth_getCode returned ill formed data",{context:JSON.stringify(i)});try{return i}catch(a){var s=Ae(a);throw new ne("BAD_DATA","eth_getCode returned ill formed data",{cause:s})}})},function(i){var s=Ae(i);throw new ne("BAD_DATA","eth_getCode failed",{cause:s})}))}catch(i){return Promise.reject(i)}},Ku=function(n,e,t,r){try{var i;return i=r==null?[e,t]:[e,t,r],Promise.resolve(Zo(function(){return Promise.resolve(Re(n,"eth_call",i)).then(function(s){if(typeof s!="string")throw new ne("BAD_DATA","eth_call returned ill formed data",{context:JSON.stringify(s)});try{return s}catch(o){var a=Ae(o);throw new ne("BAD_DATA","eth_call returned ill formed data",{cause:a})}})},function(s){var a=Ae(s);throw new ne("BAD_DATA","eth_call failed",{cause:a})}))}catch(s){return Promise.reject(s)}},Uv=function(n,e){try{e===void 0&&(e=Ui.Medium);var t="https://gasstation.polygon.technology/"+n;return Promise.resolve(Zo(function(){return Promise.resolve(fetch(t)).then(function(r){return Promise.resolve(r.json()).then(function(i){var s;s=e==Ui.Slow?i.safeLow:e==Ui.Medium?i.standard:i.fast;var a=BigInt(Math.ceil(1e9*Number(s.maxFee))),o=BigInt(Math.ceil(1e9*Number(s.maxPriorityFee)));return a==0n&&(a=1n),o==0n&&(o=1n),[a,o]})})},function(r){var i=Ae(r);throw new ne("BAD_DATA","fetching gas prices from "+t+" failed.",{cause:i})}))}catch(r){return Promise.reject(r)}},Fv=function(n,e){try{return e===void 0&&(e=Ui.Medium),Promise.resolve(Zo(function(){var t=new iv(n);return Promise.resolve(t.getFeeData()).then(function(r){var i,s;return r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null?(i=BigInt(Math.ceil(Number(r.maxFeePerGas)*e)),s=BigInt(Math.ceil(Number(r.maxPriorityFeePerGas)*e))):s=i=r.gasPrice!=null?BigInt(Math.ceil(Number(r.gasPrice)*e)):BigInt(Math.ceil(1e9*e)),i==0n&&(i=1n),s==0n&&(s=1n),[i,s]})},function(t){var r=Ae(t);throw new ne("BAD_DATA","fetching gas prices from node failed.",{cause:r})}))}catch(t){return Promise.reject(t)}},y1=function(n,e,t,r){r===void 0&&(r=0);try{var i=[{from:"0x0000000000000000000000000000000000000000",to:e,data:Be(Qu("getNonce(address,uint192)"),["address","uint192"],[t,r])},"latest"];return Promise.resolve(Zo(function(){return Promise.resolve(Re(n,"eth_call",i)).then(function(s){if(typeof s!="string")throw new ne("BAD_DATA","getNonce returned ill formed data",{context:JSON.stringify(s)});try{return BigInt(s)}catch(o){var a=Ae(o);throw new ne("BAD_DATA","getNonce returned ill formed data",{cause:a})}})},function(s){var a=Ae(s);throw new ne("BAD_DATA","getNonce failed",{cause:a})}))}catch(s){return Promise.reject(s)}},Re=function(n,e,t,r,i){r===void 0&&(r={"Content-Type":"application/json"}),i===void 0&&(i="params");try{var s,a=Il||my,o={method:"POST",headers:r,body:JSON.stringify(((s={method:e})[i]=t,s.id=new Date().getTime(),s.jsonrpc="2.0",s),function(c,u){return typeof u=="bigint"?"0x"+u.toString(16):u}),redirect:"follow"};return Promise.resolve(a(n,o)).then(function(c){return Promise.resolve(c.json()).then(function(u){if("result"in u)return u.result;if("simulation_results"in u)return u.simulation_results;var l=u.error,f=String(l.code);throw new ne(f in p1?p1[f]:"UNKNOWN_ERROR",l.message,{errno:l.code,context:{url:n,requestOptions:JSON.stringify(o)}})})})}catch(c){return Promise.reject(c)}};function Be(n,e,t){return n+ct.defaultAbiCoder().encode(e,t).slice(2)}function Qu(n){return Sn(n).slice(0,10)}function qu(n){var e,t;return"initCode"in n?(n.callGasLimit+n.verificationGasLimit*(n.paymasterAndData=="0x"||n.paymasterAndData==null?3n:0n)+n.preVerificationGas)*n.maxFeePerGas:(n.verificationGasLimit+n.callGasLimit+((e=n.paymasterVerificationGasLimit)!=null?e:0n)+((t=n.paymasterPostOpGasLimit)!=null?t:0n)+n.preVerificationGas)*n.maxFeePerGas}function na(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}var ed=function(){function n(t){this.rpcUrl=void 0,this.rpcUrl=t}var e=n.prototype;return e.chainId=function(){try{var t=this;return Promise.resolve(na(function(){return Promise.resolve(Re(t.rpcUrl,"eth_chainId",[])).then(function(r){if(typeof r=="string")return r;throw new ne("BAD_DATA","bundler eth_chainId rpc call failed")})},function(r){var i=Ae(r);throw new ne("BUNDLER_ERROR","bundler eth_chainId rpc call failed",{cause:i})}))}catch(r){return Promise.reject(r)}},e.supportedEntryPoints=function(){try{var t=this;return Promise.resolve(na(function(){return Promise.resolve(Re(t.rpcUrl,"eth_supportedEntryPoints",[]))},function(r){var i=Ae(r);throw new ne("BUNDLER_ERROR","bundler eth_supportedEntryPoints rpc call failed",{cause:i})}))}catch(r){return Promise.reject(r)}},e.estimateUserOperationGas=function(t,r,i){try{var s=this;return Promise.resolve(na(function(){function a(){var u=o;return{callGasLimit:BigInt(u.callGasLimit),preVerificationGas:BigInt(u.preVerificationGas),verificationGasLimit:BigInt(u.verificationGasLimit)}}var o={},c=i===void 0?Promise.resolve(Re(s.rpcUrl,"eth_estimateUserOperationGas",[t,r])).then(function(u){o=u}):Promise.resolve(Re(s.rpcUrl,"eth_estimateUserOperationGas",[t,r,i])).then(function(u){o=u});return c&&c.then?c.then(a):a()},function(a){var o=Ae(a);throw new ne("BUNDLER_ERROR","bundler eth_estimateUserOperationGas rpc call failed",{cause:o})}))}catch(a){return Promise.reject(a)}},e.sendUserOperation=function(t,r){try{var i=this;return Promise.resolve(na(function(){return Promise.resolve(Re(i.rpcUrl,"eth_sendUserOperation",[t,r]))},function(s){var a=Ae(s);throw new ne("BUNDLER_ERROR","bundler eth_sendUserOperation rpc call failed",{cause:a})}))}catch(s){return Promise.reject(s)}},e.getUserOperationReceipt=function(t){try{var r=this;return Promise.resolve(na(function(){return Promise.resolve(Re(r.rpcUrl,"eth_getUserOperationReceipt",[t])).then(function(i){var s=i;if(s!=null){var a=Bn({},s.receipt,{blockNumber:BigInt(s.receipt.blockNumber),cumulativeGasUsed:BigInt(s.receipt.cumulativeGasUsed),gasUsed:BigInt(s.receipt.gasUsed),transactionIndex:BigInt(s.receipt.transactionIndex),effectiveGasPrice:s.receipt.effectiveGasPrice==null?void 0:BigInt(s.receipt.effectiveGasPrice),logs:JSON.stringify(s.receipt.logs)});return Bn({},s,{nonce:BigInt(s.nonce),actualGasCost:BigInt(s.actualGasCost),actualGasUsed:BigInt(s.actualGasUsed),logs:JSON.stringify(s.logs),receipt:a})}return null})},function(i){var s=Ae(i);throw new ne("BUNDLER_ERROR","bundler eth_getUserOperationReceipt rpc call failed",{cause:s,context:{useroperationhash:t}})}))}catch(i){return Promise.reject(i)}},e.getUserOperationByHash=function(t){try{var r=this;return Promise.resolve(na(function(){return Promise.resolve(Re(r.rpcUrl,"eth_getUserOperationByHash",[t])).then(function(i){return i!=null?Bn({},i,{blockNumber:i.blockNumber==null?null:BigInt(i.blockNumber)}):null})},function(i){var s=Ae(i);throw new ne("BUNDLER_ERROR","bundler eth_getUserOperationByHash rpc call failed",{cause:s,context:{useroperationhash:t}})}))}catch(i){return Promise.reject(i)}},n}();function Pt(n,e,t){if(!n.s){if(t instanceof td){if(!t.s)return void(t.o=Pt.bind(null,n,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(Pt.bind(null,n,e),Pt.bind(null,n,2));n.s=e,n.v=t;const r=n.o;r&&r(n)}}var td=function(){function n(){}return n.prototype.then=function(e,t){var r=new n,i=this.s;if(i){var s=1&i?e:t;if(s){try{Pt(r,1,s(this.v))}catch(a){Pt(r,2,a)}return r}return this}return this.o=function(a){try{var o=a.v;1&a.s?Pt(r,1,e?e(o):o):t?Pt(r,1,t(o)):Pt(r,2,o)}catch(c){Pt(r,2,c)}},r},n}();function Ju(n){return n instanceof td&&1&n.s}var Gv=function(){function n(t,r,i){this.userOperationHash=void 0,this.bundler=void 0,this.entrypointAddress=void 0,this.bundler=r,this.userOperationHash=t,this.entrypointAddress=i}var e=n.prototype;return e.delay=function(t){return new Promise(function(r){return setTimeout(r,t)})},e.included=function(t,r){t===void 0&&(t=180),r===void 0&&(r=2);try{var i,s=function(u){if(i)return u;throw new ne("TIMEOUT","can't find useroperation",{context:a.userOperationHash})},a=this;if(t<=0||r<=0)throw RangeError("timeoutInSeconds and requestIntervalInSeconds should be bigger than zero");if(t<r)throw RangeError("timeoutInSeconds can't be less than requestIntervalInSeconds");var o=0,c=function(u,l,f){for(var d;;){var p=u();if(Ju(p)&&(p=p.v),!p)return y;if(p.then){d=0;break}var y=f();if(y&&y.then){if(!Ju(y)){d=1;break}y=y.s}}var h=new td,m=Pt.bind(null,h,2);return(d===0?p.then(w):d===1?y.then(x):(void 0).then(function(){(p=u())?p.then?p.then(w).then(void 0,m):w(p):Pt(h,1,y)})).then(void 0,m),h;function x(g){y=g;do{if(!(p=u())||Ju(p)&&!p.v)return void Pt(h,1,y);if(p.then)return void p.then(w).then(void 0,m);Ju(y=f())&&(y=y.v)}while(!y||!y.then);y.then(x).then(void 0,m)}function w(g){g?(y=f())&&y.then?y.then(x).then(void 0,m):x(y):Pt(h,1,y)}}(function(){return!i&&o<=t},0,function(){return Promise.resolve(a.delay(1e3*r)).then(function(){return Promise.resolve(a.bundler.getUserOperationReceipt(a.userOperationHash)).then(function(u){if(u!=null)return i=1,u;o++})})});return Promise.resolve(c&&c.then?c.then(s):s(c))}catch(u){return Promise.reject(u)}},n}(),br,Hv=function(n,e,t,r){try{var i="https://api.tenderly.co/api/v1/account/"+n+"/project/"+e+"/simulate-bundle",s=r.map(function(a){var o,c,u,l={network_id:a.chainId.toString(),save:(o=a.save)==null||o,save_if_fails:(c=a.saveIfFails)==null||c,from:a.from,to:a.to,input:a.data,simulation_type:(u=a.simulationType)!=null?u:"full"};if(a.blockNumber!=null&&(l.block_number=a.blockNumber),a.gas!=null&&(l.gas=a.gas),a.gasPrice!=null&&(l.gas_price=a.gasPrice),a.value!=null&&(l.value=a.value),a.stateOverrides!=null){var f=a.stateOverrides;for(var d in f)for(var p in f[d]){if(p!="balance"&&p!="storage"&&p!="stateDiff")throw RangeError("Invalide stateOverrides key: "+p+".");if("storage"in f[d]&&"stateDiff"in f[d])throw RangeError("can't set both storage and stateDiff for stateOverrides");"stateDiff"in f[d]&&(f[d].storage=f[d].stateDiff,delete f[d].stateDiff)}l.state_objects=f}return a.transactionIndex!=null&&(l.transaction_index=a.transactionIndex),a.estimateGas!=null&&(l.estimate_gas=a.estimateGas),a.generateAccessList!=null&&(l.generate_access_list=a.generateAccessList),a.accessList!=null&&(l.access_list=a.accessList),l});return Promise.resolve(Re(i,"tenderly_simulateBundle",s,{Accept:"application/json","Content-Type":"application/json","X-Access-Key":t},"simulations"))}catch(a){return Promise.reject(a)}},b1=function(n,e,t,r,i,s,a,o,c,u,l){o===void 0&&(o=null),c===void 0&&(c=null),u===void 0&&(u=null);try{var f,d=[],p=i.toLowerCase();if(p=="0x5ff137d4b0fdcd49dca30c7cf57e578a026d2789")f="0x7fc98430eaedbb6070b35b39d798725049088348";else if(p=="0x0000000071727de22e5e9d8baf0edac6f37da032")f="0xefc2c1444ebcc4db75e7613d20c6a62ff67a167c";else{if(p!="0x4337084d9e255ff0702461cf8895ce9e3b5ff108")throw RangeError("Invalid entrypoint: "+i);f="0x449ed7c3e6fee6a97311d4b55475df59c44add33"}if(o==null&&c!=null||o!=null&&c==null)throw RangeError("Invalid factory and factoryData");return o!=null&&c!=null&&d.push({chainId:r,blockNumber:u,from:f,to:o,data:c,stateOverrides:l}),d.push({chainId:r,blockNumber:u,from:i,to:s,data:a,stateOverrides:l}),Promise.resolve(Hv(n,e,t,d)).then(function(y){for(var h,m=ea(y);!(h=m()).done;)if(h.value.simulation.id=="")throw new ne("TENDERLY_SIMULATION_ERROR","tenderly simulation failed",{context:JSON.stringify(y,function(x,w){return typeof w=="bigint"?"0x"+w.toString(16):w})});return y})}catch(y){return Promise.reject(y)}},$v=function(n,e,t,r,i,s,a,o,c,u,l){return o===void 0&&(o=null),c===void 0&&(c=null),u===void 0&&(u=null),Promise.resolve(b1(n,e,t,r,i,s,a,o,c,u,l)).then(function(f){var d=f.map(function(y){return y.simulation.id});d.map(function(y){return Vv(n,e,t,y)});var p=d.map(function(y){return"https://dashboard.tenderly.co/shared/simulation/"+y});if(p.length==1)return{simulation:f,callDataSimulationShareLink:p[0]};if(p.length==2)return{simulation:f,accountDeploymentSimulationShareLink:p[0],callDataSimulationShareLink:p[1]};throw new ne("BAD_DATA","invalid number of simulations retuned",{context:JSON.stringify(f,function(y,h){return typeof h=="bigint"?"0x"+h.toString(16):h})})})},Vv=function(n,e,t,r){try{return Promise.resolve((Il||my)("https://api.tenderly.co/api/v1/account/"+n+"/project/"+e+"/simulations/"+r+"/share",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Access-Key":t},redirect:"follow"})).then(function(i){var s=i.status;if(s!=204)throw new ne("BAD_DATA","tenderly share simulation failed.",{context:{tenderlyAccountSlug:n,tenderlyProjectSlug:e,tenderlyAccessKey:t,tenderlySimulationId:r,status:s}})})}catch(i){return Promise.reject(i)}};(function(n){n.executeUserOpWithErrorString="0x541d63c8",n.executeUserOp="0x7bb37428"})(br||(br={}));var nd={signer:"0xfD90FAd33ee8b58f32c00aceEad1358e4AFC23f9",signature:"0x47003599ffa7e9198f321afa774e34a12a959844efd6363b88896e9c24ed33cf4e1be876ef123a3c4467e7d451511434039539699f2baa2f44955fa3d1c1c6d81c",isContractSignature:!1},zv={signer:"0xfD90FAd33ee8b58f32c00aceEad1358e4AFC23f9",signature:"0x000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e06c92f0ac5c4ef9e74721c23d80a9fc12f259ca84afb160f0890483539b9e6080d824c0e6c795157ad5d1ee5eff1ceeb3031009a595f9360919b83dd411c5a78d0000000000000000000000000000000000000000000000000000000000000025a24f744b28d73f066bf3203d145765a7bc735e6328168c8b03e476da3ad0d8fe0400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e226f726967696e223a2268747470733a2f2f736166652e676c6f62616c220000",isContractSignature:!0};function Yu(n){return"0x"+n.map(function(e){return i=(r=(t=e).operation)!=null?r:yr.Call,s=K(t.data),ur(["uint8","address","uint256","uint256","bytes"],[i,t.to,t.value,s.length,s]).slice(2);var t,r,i,s}).join("")}var jv=function(){function n(e,t,r){this.address=void 0,this.generatorFunctionSelector=void 0,this.generatorFunctionInputAbi=void 0,this.address=e,this.generatorFunctionSelector=t,this.generatorFunctionInputAbi=r}return n.prototype.getFactoryGeneratorFunctionCallData=function(e){return Be(this.generatorFunctionSelector,this.generatorFunctionInputAbi,e)},n}(),ra=function(n){function e(t){return t===void 0&&(t=e.DEFAULT_FACTORY_ADDRESS),n.call(this,t,"0x1688f0b9",["address","bytes","uint256"])||this}return Jo(e,n),e}(jv);ra.DEFAULT_FACTORY_ADDRESS="0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67";var Wv={SafeMessage:[{type:"bytes",name:"message"}]};function Kv(n,e,t){var r={message:$m(t)};return{domain:{chainId:Number(e),verifyingContract:n},types:Wv,messageValue:r}}function m1(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}var He=function(n){function e(r,i,s,a){var o;if(a===void 0&&(a={}),(o=n.call(this,r)||this).isInitWebAuthn=void 0,o.x=null,o.y=null,o.entrypointAddress=void 0,o.safe4337ModuleAddress=void 0,o.factoryAddress=void 0,o.factoryData=void 0,o.onChainIdentifier=void 0,o.entrypointAddress=s,o.safe4337ModuleAddress=i,o.factoryAddress=null,o.factoryData=null,o.isInitWebAuthn=!1,a.onChainIdentifierParams!=null&&a.onChainIdentifier!=null)throw RangeError("can't override both onChainIdentifier and onChainIdentifierParams");if(a.onChainIdentifierParams!=null)o.onChainIdentifier=function(u,l,f,d){l===void 0&&(l="Web"),f===void 0&&(f="abstractionkit"),d===void 0&&(d="0.2.30");var p=de("0x"+Buffer.from(u,"utf8").toString("hex")).slice(-20),y=de("0x"+Buffer.from(l,"utf8").toString("hex")).slice(-3),h=de("0x"+Buffer.from(f,"utf8").toString("hex")).slice(-3),m=de("0x"+Buffer.from(d,"utf8").toString("hex")).slice(-3);return"5afe00"+Buffer.from(p,"utf8").toString("hex")+Buffer.from(y,"utf8").toString("hex")+Buffer.from(h,"utf8").toString("hex")+Buffer.from(m,"utf8").toString("hex")}(a.onChainIdentifierParams.project,a.onChainIdentifierParams.platform,a.onChainIdentifierParams.tool,a.onChainIdentifierParams.toolVersion);else if(a.onChainIdentifier!=null){var c=a.onChainIdentifier;if(c.startsWith("0x")&&(c=c.slice(2)),c.length!=64)throw RangeError("onChainIdentifier length must be 64.");o.onChainIdentifier=c}else o.onChainIdentifier=null;return o}Jo(e,n),e.createProxyAddress=function(r,i){var s,a,o;i===void 0&&(i={});var c=(s=i.c2Nonce)!=null?s:0n;if(c<0n)throw RangeError("c2Nonce can't be negative");var u=(a=i.safeFactoryAddress)!=null?a:ra.DEFAULT_FACTORY_ADDRESS,l=(o=i.singletonInitHash)!=null?o:e.DEFAULT_SAFE_SINGLETON.singletonInitHash,f=de(ur(["bytes32","uint256"],[de(r),c])),d=zm(["bytes1","address","bytes32","bytes32"],["0xff",u,f,l]).slice(-40);return ae("0x"+d)},e.createAccountCallDataSingleTransaction=function(r,i){var s,a,o,c;i===void 0&&(i={});var u=(s=r.value)!=null?s:0,l=(a=r.data)!=null?a:"0x",f=(o=r.operation)!=null?o:yr.Call,d=(c=i.safeModuleExecutorFunctionSelector)!=null?c:e.DEFAULT_EXECUTOR_FUCNTION_SELECTOR;return e.createAccountCallData(r.to,u,l,f,{safeModuleExecutorFunctionSelector:d})},e.createAccountCallDataBatchTransactions=function(r,i){var s,a;if(i===void 0&&(i={}),r.length<1)throw RangeError("There should be at least one metaTransaction");var o=(s=i.safeModuleExecutorFunctionSelector)!=null?s:e.DEFAULT_EXECUTOR_FUCNTION_SELECTOR,c=(a=i.multisendContractAddress)!=null?a:e.DEFAULT_MULTISEND_CONTRACT_ADDRESS,u=Be("0x8d80ff0a",["bytes"],[Yu(r)]);return e.createAccountCallData(c,0n,u,yr.Delegate,{safeModuleExecutorFunctionSelector:o})},e.createAccountCallData=function(r,i,s,a,o){var c;return o===void 0&&(o={}),Be((c=o.safeModuleExecutorFunctionSelector)!=null?c:e.DEFAULT_EXECUTOR_FUCNTION_SELECTOR,e.executorFunctionInputAbi,[r,i,s,a])},e.decodeAccountCallData=function(r){var i=null;if(r.startsWith(br.executeUserOpWithErrorString)?i=br.executeUserOpWithErrorString:r.startsWith(br.executeUserOp)&&(i=br.executeUserOp),i!=null){var s,a=ct.defaultAbiCoder(),o="0x"+r.slice(10),c=a.decode(["address","uint256","bytes","uint8"],o);return s=typeof c[2]!="string"?new TextDecoder().decode(c[2]):c[2],[{to:c[0],value:BigInt(c[1]),data:s,operation:Number(c[3])},i]}throw new ne("BAD_DATA","Invalid calldata, should start with "+br.executeUserOpWithErrorString+" or "+br.executeUserOp,{context:{callData:r}})},e.prependTokenPaymasterApproveToCallDataStatic=function(r,i,s,a,o){var c;o===void 0&&(o={});var u=(c=o.multisendContractAddress)!=null?c:e.DEFAULT_MULTISEND_CONTRACT_ADDRESS,l=e.decodeAccountCallData(r),f=l[0],d=l[1],p=Yu([{to:i,value:0n,data:Be(Qu("approve(address,uint256)"),["address","uint256"],[s,a]),operation:yr.Call}]),y="",h="0x8d80ff0a";if(f.data.startsWith(h)){var m=function(w){return ct.defaultAbiCoder().decode(["bytes"],"0x"+w.slice(10))[0]}(f.data);y=m+p.slice(2)}else y=Yu([f])+p.slice(2);var x=Be(h,["bytes"],[y]);return e.createAccountCallData(u,0n,x,yr.Delegate,{safeModuleExecutorFunctionSelector:d})},e.formatEip712SignaturesToUseroperationSignature=function(r,i,s){var a,o;if(s===void 0&&(s={}),r.length!=i.length)throw RangeError("signersAddresses and signatures arrays should be the same length");var c=(a=s.validAfter)!=null?a:0n,u=(o=s.validUntil)!=null?o:0n,l=new Map;r.forEach(function(p,y){l.set(p.toLocaleLowerCase(),i[y])});var f=new Map(Array.from(l).sort()),d="0x"+Array.from(f.values()).reduce(function(p,y){return p+y.slice(2)},"");return e.formatEip712SingleSignatureToUseroperationSignature(d,{validAfter:c,validUntil:u})},e.getUserOperationEip712Hash=function(r,i,s){return s===void 0&&(s={}),"initCode"in r?e.getUserOperationEip712Hash_V6(r,i,s):e.getUserOperationEip712Hash_V7(r,i,s)},e.getUserOperationEip712Data=function(r,i,s){if("initCode"in r){var a=e.getUserOperationEip712Data_V6(r,i,s);return{domain:a.domain,types:a.types,messageValue:a.messageValue}}var o=e.getUserOperationEip712Data_V7(r,i,s);return{domain:o.domain,types:o.types,messageValue:o.messageValue}},e.getUserOperationEip712Data_V6=function(r,i,s){var a,o,c,u;s===void 0&&(s={});var l=(a=s.validAfter)!=null?a:0n,f=(o=s.validUntil)!=null?o:0n,d=(c=s.entrypointAddress)!=null?c:jt,p=(u=s.safe4337ModuleAddress)!=null?u:"0xa581c4A4DB7175302464fF3C06380BC3270b4037",y={safe:r.sender,nonce:r.nonce,initCode:r.initCode,callData:r.callData,callGasLimit:r.callGasLimit,verificationGasLimit:r.verificationGasLimit,preVerificationGas:r.preVerificationGas,maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas,paymasterAndData:r.paymasterAndData,validAfter:l,validUntil:f,entryPoint:d};return{domain:{chainId:Number(i),verifyingContract:p},types:Lv,messageValue:y}},e.getUserOperationEip712Hash_V6=function(r,i,s){s===void 0&&(s={});var a=e.getUserOperationEip712Data_V6(r,i,s);return Gr.hash(a.domain,a.types,a.messageValue)},e.getUserOperationEip712Data_V7=function(r,i,s){var a,o,c,u;s===void 0&&(s={});var l=(a=s.validAfter)!=null?a:0n,f=(o=s.validUntil)!=null?o:0n,d=(c=s.entrypointAddress)!=null?c:qe,p=(u=s.safe4337ModuleAddress)!=null?u:"0x75cf11467937ce3F2f357CE24ffc3DBF8fD5c226",y=ct.defaultAbiCoder(),h="0x";r.factory!=null&&(h=r.factory,r.factoryData!=null&&(h+=r.factoryData.slice(2)));var m="0x";r.paymaster!=null&&(m=r.paymaster,r.paymasterVerificationGasLimit!=null&&(m+=y.encode(["uint128"],[r.paymasterVerificationGasLimit]).slice(34)),r.paymasterPostOpGasLimit!=null&&(m+=y.encode(["uint128"],[r.paymasterPostOpGasLimit]).slice(34)),r.paymasterData!=null&&(m+=r.paymasterData.slice(2)));var x={safe:r.sender,nonce:r.nonce,initCode:h,callData:r.callData,verificationGasLimit:r.verificationGasLimit,callGasLimit:r.callGasLimit,preVerificationGas:r.preVerificationGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,paymasterAndData:m,validAfter:l,validUntil:f,entryPoint:d};return{domain:{chainId:Number(i),verifyingContract:p},types:Mv,messageValue:x}},e.getUserOperationEip712Hash_V7=function(r,i,s){s===void 0&&(s={});var a=e.getUserOperationEip712Data_V7(r,i,s);return Gr.hash(a.domain,a.types,a.messageValue)},e.formatEip712SingleSignatureToUseroperationSignature=function(r,i){var s,a;i===void 0&&(i={});var o=(s=i.validAfter)!=null?s:0n,c=(a=i.validUntil)!=null?a:0n;if(o<0n)throw RangeError("validAfter can't be negative");if(c<0n)throw RangeError("validUntil can't be negative");return ur(["uint48","uint48","bytes"],[o,c,r])};var t=e.prototype;return t.sendUserOperation=function(r,i){try{var s=this,a=new ed(i);return Promise.resolve(a.sendUserOperation(r,s.entrypointAddress)).then(function(o){return new Gv(o,a,s.entrypointAddress)})}catch(o){return Promise.reject(o)}},e.createAccountAddressAndFactoryAddressAndData=function(r,i,s,a){var o,c,u,l,f,d,p,y;if(r.length<1)throw RangeError("There should be at least one owner");var h,m=e.createBaseInitializerCallData(r,(o=i.threshold)!=null?o:1,s,a,(c=i.multisendContractAddress)!=null?c:e.DEFAULT_MULTISEND_CONTRACT_ADDRESS,(u=i.webAuthnSharedSigner)!=null?u:e.DEFAULT_WEB_AUTHN_SHARED_SIGNER,(l=i.eip7212WebAuthnPrecompileVerifierForSharedSigner)!=null?l:e.DEFAULT_WEB_AUTHN_PRECOMPILE,(f=i.eip7212WebAuthnContractVerifierForSharedSigner)!=null?f:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER);h=i.safeAccountFactoryAddress!=null?new ra(i.safeAccountFactoryAddress):new ra;var x=(d=i.safeAccountSingleton)!=null?d:e.DEFAULT_SAFE_SINGLETON,w=this.createProxyAddress(m,{c2Nonce:(p=i.c2Nonce)!=null?p:0n,safeFactoryAddress:h.address,singletonInitHash:x.singletonInitHash}),g=[x.singletonAddress,m,(y=i.c2Nonce)!=null?y:0n],v=h.getFactoryGeneratorFunctionCallData(g);return[w,h.address,v]},e.createBaseInitializerCallData=function(r,i,s,a,o,c,u,l){if(o===void 0&&(o=e.DEFAULT_MULTISEND_CONTRACT_ADDRESS),c===void 0&&(c=e.DEFAULT_WEB_AUTHN_SHARED_SIGNER),u===void 0&&(u=e.DEFAULT_WEB_AUTHN_PRECOMPILE),l===void 0&&(l=e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER),r.length<1)throw RangeError("There should be at least one owner");if(i<1)throw RangeError("threshold should be at least one");if(i>r.length)throw RangeError("threshold can't be larger than number of owners");for(var f,d,p=Be("0x8d0dc49f",["address[]"],[[s]]),y=!1,h=[],m=ea(r);!(d=m()).done;){var x=d.value;typeof x!="string"?y=!0:h.push(x)}if(y){var w=[];w.push({to:a,value:0n,data:p,operation:yr.Delegate});for(var g,v=[],S=0,O=ea(r);!(g=O()).done;){var R=g.value;if(typeof R!="string"){if(S>0)throw RangeError("Only one WebAuthn owner can be set during initialization");var C=Be("0x0dd9692f",["uint256","uint256","uint176"],[R.x,R.y,"0x"+u.slice(-4)+l.slice(2)]);w.push({to:c,value:0n,data:C,operation:yr.Delegate}),v.push(c),S++}else v.push(R)}f=[v,i,o,Be("0x8d80ff0a",["bytes"],[Yu(w)]),s,Fi,0,Fi]}else f=[h,i,a,p,s,Fi,0,Fi];return Be(e.initializerFunctionSelector,e.initializerFunctionInputAbi,f)},e.createFactoryAddressAndData=function(r,i,s,a){var o,c,u,l,f,d,p,y;if(i===void 0&&(i={}),r.length<1)throw RangeError("There should be at least one owner");var h=(o=i.threshold)!=null?o:1,m=(c=i.c2Nonce)!=null?c:0;if(h<1)throw RangeError("threshold should be at least one");if(h>r.length)throw RangeError("threshold can't be larger than number of owners");if(m<0n)throw RangeError("c2Nonce can't be negative");var x,w=e.createBaseInitializerCallData(r,(u=i.threshold)!=null?u:1,s,a,(l=i.multisendContractAddress)!=null?l:e.DEFAULT_MULTISEND_CONTRACT_ADDRESS,(f=i.webAuthnSharedSigner)!=null?f:e.DEFAULT_WEB_AUTHN_SHARED_SIGNER,(d=i.eip7212WebAuthnPrecompileVerifierForSharedSigner)!=null?d:e.DEFAULT_WEB_AUTHN_PRECOMPILE,(p=i.eip7212WebAuthnContractVerifierForSharedSigner)!=null?p:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER);x=i.safeAccountFactoryAddress!=null?new ra(i.safeAccountFactoryAddress):new ra;var g=(y=i.safeAccountSingleton)!=null?y:e.DEFAULT_SAFE_SINGLETON,v=x.getFactoryGeneratorFunctionCallData([g.singletonAddress,w,m]);return[x.address,v]},t.prependTokenPaymasterApproveToCallData=function(r,i,s,a,o){var c;o===void 0&&(o={});var u=(c=o.multisendContractAddress)!=null?c:e.DEFAULT_MULTISEND_CONTRACT_ADDRESS;return e.prependTokenPaymasterApproveToCallDataStatic(r,i,s,a,{multisendContractAddress:u})},t.estimateUserOperationGas=function(r,i,s){s===void 0&&(s={});try{var a=0xffffffffffffn,o=0xffffffffffffn;if(s.dummySignerSignaturePairs!=null){if(s.expectedSigners!=null)throw RangeError("Can't use both dummySignerSignaturePairs and expectedSigners overrides.");if(s.dummySignerSignaturePairs.length<1)throw RangeError("Number of dummy signers signature pairs can't be less than 1");r.signature=e.formatSignaturesToUseroperationSignature(s.dummySignerSignaturePairs,{validAfter:a,validUntil:o})}else if(s.expectedSigners!=null){var c,u=e.createDummySignerSignaturePairForExpectedSigners(s.expectedSigners,{isInit:(c="initCode"in r?r.initCode:r.factory)!=null&&c!="0x",webAuthnSharedSigner:s.webAuthnSharedSigner,eip7212WebAuthnPrecompileVerifier:s.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:s.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:s.webAuthnSignerFactory,webAuthnSignerSingleton:s.webAuthnSignerSingleton,validAfter:a,validUntil:o});r.signature=e.formatSignaturesToUseroperationSignature(u,{validAfter:a,validUntil:o})}else r.signature.length<3&&(r.signature=e.formatSignaturesToUseroperationSignature([nd],{validAfter:a,validUntil:o}));var l=new ed(i),f=r.maxFeePerGas,d=r.maxPriorityFeePerGas;return r.maxFeePerGas=0n,r.maxPriorityFeePerGas=0n,Promise.resolve(l.estimateUserOperationGas(r,this.entrypointAddress,s.stateOverrideSet)).then(function(p){return r.maxFeePerGas=f,r.maxPriorityFeePerGas=d,[BigInt(p.preVerificationGas),s.dummySignerSignaturePairs!=null?BigInt(p.verificationGasLimit)+55000n*BigInt(s.dummySignerSignaturePairs.length):BigInt(p.verificationGasLimit),BigInt(p.callGasLimit)]})}catch(p){return Promise.reject(p)}},t.createBaseUserOperationAndFactoryAddressAndFactoryData=function(r,i,s,a,o){o===void 0&&(o={});try{var c,u,l,f=function(){var O,R,C,_,U,D,$,H;function G(Ve){var xn,Ye,ge,ke,vt,lt;if(typeof o.preVerificationGas=="bigint"&&o.preVerificationGas<0n)throw RangeError("preVerificationGas overrid can't be negative");if(typeof o.verificationGasLimit=="bigint"&&o.verificationGasLimit<0n)throw RangeError("verificationGasLimit overrid can't be negative");if(typeof o.callGasLimit=="bigint"&&o.callGasLimit<0n)throw RangeError("callGasLimit overrid can't be negative");return J.preVerificationGas=(xn=o.preVerificationGas)!=null?xn:X*BigInt(Math.floor((((Ye=o.preVerificationGasPercentageMultiplier)!=null?Ye:0)+100)/100)),J.verificationGasLimit=(ge=o.verificationGasLimit)!=null?ge:Pe*BigInt(Math.floor((((ke=o.verificationGasLimitPercentageMultiplier)!=null?ke:0)+100)/100)),J.callGasLimit=(vt=o.callGasLimit)!=null?vt:en*BigInt(Math.floor((((lt=o.callGasLimitPercentageMultiplier)!=null?lt:0)+100)/100)),[J,L,M]}w=(O=o.maxFeePerGas)!=null?O:w*BigInt(Math.floor((((R=o.maxFeePerGasPercentageMultiplier)!=null?R:0)+100)/100)),g=(C=o.maxPriorityFeePerGas)!=null?C:g*BigInt(Math.floor((((_=o.maxPriorityFeePerGasPercentageMultiplier)!=null?_:0)+100)/100));var P=(U=o.eip7212WebAuthnPrecompileVerifier)!=null?U:e.DEFAULT_WEB_AUTHN_PRECOMPILE,T=(D=o.eip7212WebAuthnContractVerifier)!=null?D:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER,N=($=o.webAuthnSignerFactory)!=null?$:e.DEFAULT_WEB_AUTHN_SIGNER_FACTORY,k=(H=o.webAuthnSignerSingleton)!=null?H:e.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON,L=d.factoryAddress,M=d.factoryData;if(m==null)throw RangeError("failed to determine nonce");if(m<0n)throw RangeError("nonce can't be negative");if(m>0n)L=null,M=null;else if(d.isInitWebAuthn){if(d.x==null||d.y==null)throw RangeError("Invalide account initialization with Webauthnn signer.Webauthnn signer publickey can be null!!");var W=e.createDeployWebAuthnVerifierMetaTransaction(d.x,d.y,{eip7212WebAuthnPrecompileVerifier:P,eip7212WebAuthnContractVerifier:T,webAuthnSignerFactory:N}),Z=e.createWebAuthnSignerVerifierAddress(d.x,d.y,{eip7212WebAuthnPrecompileVerifier:P,eip7212WebAuthnContractVerifier:T,webAuthnSignerFactory:N,webAuthnSignerSingleton:k}),le=Be("0xe318b52b",["address","address","address"],["0x0000000000000000000000000000000000000001",p,Z]);r=[W,{to:d.accountAddress,value:0n,data:le}].concat(r)}var ie="0x";ie=o.callData==null?r.length==1?e.createAccountCallDataSingleTransaction(r[0],{safeModuleExecutorFunctionSelector:y}):e.createAccountCallDataBatchTransactions(r,{safeModuleExecutorFunctionSelector:y,multisendContractAddress:h}):o.callData,d.onChainIdentifier!=null&&(ie+=d.onChainIdentifier);var J=Bn({},ta,{sender:d.accountAddress,nonce:m,callData:ie,maxFeePerGas:w,maxPriorityFeePerGas:g}),X=ta.preVerificationGas,Pe=ta.verificationGasLimit,en=ta.callGasLimit,Me=function(){if(o.preVerificationGas==null||o.verificationGasLimit==null||o.callGasLimit==null)return function(){if(a!=null){J.callGasLimit=0n,J.verificationGasLimit=0n,J.preVerificationGas=0n;var Ve,xn=J.maxFeePerGas,Ye=J.maxPriorityFeePerGas;if(J.maxFeePerGas=0n,J.maxPriorityFeePerGas=0n,i){var ge="0x";L!=null&&(ge=L,M!=null&&(ge+=M.slice(2))),Ve=Bn({},J,{initCode:ge,paymasterAndData:"0x"})}else Ve=Bn({},J,{factory:L,factoryData:M,paymaster:null,paymasterVerificationGasLimit:null,paymasterPostOpGasLimit:null,paymasterData:null});var ke,vt=0xffffffffffffn,lt=0xffffffffffffn;if(o.dummySignerSignaturePairs!=null){if(o.expectedSigners!=null)throw RangeError("Can't use both dummySignerSignaturePairs and expectedSigners overrides.");if(o.dummySignerSignaturePairs.length<1)throw RangeError("Number of dummySignerSignaturePairs can't be less than 1");ke=o.dummySignerSignaturePairs}else ke=o.expectedSigners==null?[nd]:e.createDummySignerSignaturePairForExpectedSigners(o.expectedSigners,{isInit:L!=null&&L!="0x",webAuthnSharedSigner:p,eip7212WebAuthnPrecompileVerifier:P,eip7212WebAuthnContractVerifier:T,webAuthnSignerFactory:N,webAuthnSignerSingleton:k,validAfter:vt,validUntil:lt});return J.signature=e.formatSignaturesToUseroperationSignature(ke,{validAfter:vt,validUntil:lt,webAuthnSharedSigner:p}),Promise.resolve(d.estimateUserOperationGas(Ve,a,{stateOverrideSet:o.state_override_set})).then(function(fd){X=fd[0],Pe=fd[1],en=fd[2],Pe+=55000n*BigInt(ke.length),J.maxFeePerGas=xn,J.maxPriorityFeePerGas=Ye})}throw new ne("BAD_DATA","bundlerRpc cant't be null if preVerificationGas,verificationGasLimit and callGasLimit are not overriden")}()}();return Me&&Me.then?Me.then(G):G()},d=this;if(r.length<1)throw RangeError("There should be at least one transaction");var p=(c=o.webAuthnSharedSigner)!=null?c:e.DEFAULT_WEB_AUTHN_SHARED_SIGNER,y=(u=o.safeModuleExecutorFunctionSelector)!=null?u:e.DEFAULT_EXECUTOR_FUCNTION_SELECTOR,h=(l=o.multisendContractAddress)!=null?l:e.DEFAULT_MULTISEND_CONTRACT_ADDRESS,m=null,x=null;if(o.nonce==null){if(s==null)throw new ne("BAD_DATA","providerRpc cant't be null if nonce is not overriden");x=y1(s,d.entrypointAddress,d.accountAddress)}else m=o.nonce;if(typeof o.maxFeePerGas=="bigint"&&o.maxFeePerGas<0n)throw RangeError("maxFeePerGas overrid can't be negative");if(typeof o.maxPriorityFeePerGas=="bigint"&&o.maxPriorityFeePerGas<0n)throw RangeError("maxPriorityFeePerGas overrid can't be negative");var w=ta.maxFeePerGas,g=ta.maxPriorityFeePerGas,v=null;o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null||(v=Dv(s,o.polygonGasStation,o.gasLevel));var S=function(){if(v!=null&&x!=null)return Promise.resolve(Promise.all([x,v]).then(function(R){m=R[0];var C=R[1];w=C[0],g=C[1]})).then(function(){});var O=function(){if(v!=null)return Promise.resolve(v).then(function(C){w=C[0],g=C[1]});var R=function(){if(x!=null)return Promise.resolve(x).then(function(C){m=C})}();return R&&R.then?R.then(function(){}):void 0}();return O&&O.then?O.then(function(){}):void 0}();return Promise.resolve(S&&S.then?S.then(f):f())}catch(O){return Promise.reject(O)}},t.signUserOperation=function(r,i,s,a){var o,c;a===void 0&&(a={});var u=(o=a.validAfter)!=null?o:0n,l=(c=a.validUntil)!=null?c:0n;if(i.length<1)throw RangeError("There should be at least one privateKey");if(s<0n)throw RangeError("chainId can't be negative");if(u<0n)throw RangeError("validAfter can't be negative");if(l<0n)throw RangeError("validUntil can't be negative");for(var f,d=e.getUserOperationEip712Hash(r,s,{validAfter:u,validUntil:l,entrypointAddress:this.entrypointAddress,safe4337ModuleAddress:this.safe4337ModuleAddress}),p=[],y=[],h=ea(i);!(f=h()).done;){var m=new Yf(f.value),x=m.signingKey.sign(d).serialized;p.push(m.address),y.push(x)}return e.formatEip712SignaturesToUseroperationSignature(p,y,{validAfter:u,validUntil:l})},e.createWebAuthnSignerVerifierAddress=function(r,i,s){var a,o,c,u;s===void 0&&(s={});var l=(a=s.eip7212WebAuthnPrecompileVerifier)!=null?a:e.DEFAULT_WEB_AUTHN_PRECOMPILE,f=(o=s.eip7212WebAuthnContractVerifier)!=null?o:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER,d=(c=s.webAuthnSignerFactory)!=null?c:e.DEFAULT_WEB_AUTHN_SIGNER_FACTORY,p=(u=s.webAuthnSignerSingleton)!=null?u:e.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON;if(l.length!=42||l.slice(0,38)!=Fi.slice(0,38))throw RangeError("Invalide precompile address. It should have the format 0x000000000000000000000000000000000000____");var y=de(ur(["bytes","uint256","uint256","uint256","uint256"],[e.DEFAULT_WEB_AUTHN_SIGNER_PROXY_CREATION_CODE,p,r,i,"0x"+l.slice(-4)+f.slice(2)]));return"0x"+zm(["bytes1","address","bytes32","bytes32"],["0xff",d,"0x0000000000000000000000000000000000000000000000000000000000000000",y]).slice(-40)},e.formatSignaturesToUseroperationSignature=function(r,i){var s,a;i===void 0&&(i={});var o=(s=i.validAfter)!=null?s:0n,c=(a=i.validUntil)!=null?a:0n,u=this.buildSignaturesFromSingerSignaturePairs(r,i);return ur(["uint48","uint48","bytes"],[o,c,u])},e.getSignerLowerCaseAddress=function(r,i){if(i===void 0&&(i={}),typeof r=="string")return r.toLowerCase();var s,a,o,c,u=(s=i.eip7212WebAuthnPrecompileVerifier)!=null?s:e.DEFAULT_WEB_AUTHN_PRECOMPILE,l=(a=i.eip7212WebAuthnContractVerifier)!=null?a:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER,f=(o=i.webAuthnSignerFactory)!=null?o:e.DEFAULT_WEB_AUTHN_SIGNER_FACTORY,d=(c=i.webAuthnSignerSingleton)!=null?c:e.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON;return e.createWebAuthnSignerVerifierAddress(r.x,r.y,{eip7212WebAuthnPrecompileVerifier:u,eip7212WebAuthnContractVerifier:l,webAuthnSignerFactory:f,webAuthnSignerSingleton:d}).toLowerCase()},e.sortSignatures=function(r,i){i===void 0&&(i={}),r.sort(function(s,a){return e.getSignerLowerCaseAddress(s.signer,i).localeCompare(e.getSignerLowerCaseAddress(a.signer,i))})},e.buildSignaturesFromSingerSignaturePairs=function(r,i){i===void 0&&(i={}),e.sortSignatures(r,i);var s=65*r.length,a=r.reduce(function(o,c){var u=o.segments,l=o.offset,f=c.signer,d=c.signature,p=c.isContractSignature;if(p=p||typeof f!="string"){if(typeof f!="string"){if(i.isInit==null)throw RangeError("Must define isInit parameter when using WebAuthn");if(i.isInit){var y;f=(y=i.webAuthnSharedSigner)!=null?y:e.DEFAULT_WEB_AUTHN_SHARED_SIGNER}else{var h,m,x,w,g=(h=i.eip7212WebAuthnPrecompileVerifier)!=null?h:e.DEFAULT_WEB_AUTHN_PRECOMPILE,v=(m=i.eip7212WebAuthnContractVerifier)!=null?m:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER,S=(x=i.webAuthnSignerFactory)!=null?x:e.DEFAULT_WEB_AUTHN_SIGNER_FACTORY,O=(w=i.webAuthnSignerSingleton)!=null?w:e.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON;f=e.createWebAuthnSignerVerifierAddress(f.x,f.y,{eip7212WebAuthnPrecompileVerifier:g,eip7212WebAuthnContractVerifier:v,webAuthnSignerFactory:S,webAuthnSignerSingleton:O})}}return{segments:[].concat(u,[ur(["uint256","uint256","uint8"],[f,s+l,0])]),offset:l+32+tr(d)}}return{segments:[].concat(u,[ur(["bytes"],[d])]),offset:l}},{segments:[],offset:0});return fe([].concat(a.segments,r.map(function(o){var c=o.signature,u=o.isContractSignature;return(u=u||typeof o.signer!="string")?ur(["uint256","bytes"],[tr(c),c]):"0x"})))},e.createWebAuthnSignature=function(r){return ct.defaultAbiCoder().encode(["bytes","bytes","uint256[2]"],[new Uint8Array(r.authenticatorData),r.clientDataFields,r.rs])},t.createSwapOwnerMetaTransactions=function(r,i,s,a){a===void 0&&(a={});try{var o,c,u=function(){function p(m){var x=l.createStandardSwapOwnerMetaTransaction(o,c,y);return f==null?[x]:[f,x]}c=typeof s!="string"?e.createWebAuthnSignerVerifierAddress(s.x,s.y,{eip7212WebAuthnPrecompileVerifier:a.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:a.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:a.webAuthnSignerFactory,webAuthnSignerSingleton:a.webAuthnSignerSingleton}):s;var y=a.prevOwner,h=function(){if(y==null)return Promise.resolve(l.getOwners(r)).then(function(m){var x=m.indexOf(c);if(x==-1)throw RangeError("oldOwner is not a current owner.");if(x==0)y="0x0000000000000000000000000000000000000001";else{if(!(x>0))throw RangeError("Invalid owner index");y=m[x-1]}})}();return h&&h.then?h.then(p):p()},l=this,f=null,d=function(){if(typeof i!="string")return o=e.createWebAuthnSignerVerifierAddress(i.x,i.y,{eip7212WebAuthnPrecompileVerifier:a.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:a.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:a.webAuthnSignerFactory,webAuthnSignerSingleton:a.webAuthnSignerSingleton}),Promise.resolve(h1(r,o,"latest")).then(function(p){p.length<3&&(f=e.createDeployWebAuthnVerifierMetaTransaction(i.x,i.y,{eip7212WebAuthnPrecompileVerifier:a.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:a.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:a.webAuthnSignerFactory}))});o=i}();return Promise.resolve(d&&d.then?d.then(u):u())}catch(p){return Promise.reject(p)}},t.createRemoveOwnerMetaTransaction=function(r,i,s,a){a===void 0&&(a={});try{var o,c=function(d){return u.createStandardRemoveOwnerMetaTransaction(o,s,l)},u=this;o=typeof i!="string"?e.createWebAuthnSignerVerifierAddress(i.x,i.y,{eip7212WebAuthnPrecompileVerifier:a.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:a.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:a.webAuthnSignerFactory,webAuthnSignerSingleton:a.webAuthnSignerSingleton}):i;var l=a.prevOwner,f=function(){if(l==null)return Promise.resolve(u.getOwners(r)).then(function(d){var p=d.indexOf(o);if(p==-1)throw RangeError("ownerToDelete is not a current owner.");if(p==0)l="0x0000000000000000000000000000000000000001";else{if(!(p>0))throw RangeError("Invalid owner index");l=d[p-1]}})}();return Promise.resolve(f&&f.then?f.then(c):c())}catch(d){return Promise.reject(d)}},t.createAddOwnerWithThresholdMetaTransactions=function(r,i,s){s===void 0&&(s={});try{var a,o=function(f){var d=c.createStandardAddOwnerWithThresholdMetaTransaction(a,i);return u==null?[d]:[u,d]},c=this,u=null,l=function(){if(typeof r!="string"){if(a=e.createWebAuthnSignerVerifierAddress(r.x,r.y,{eip7212WebAuthnPrecompileVerifier:s.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:s.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:s.webAuthnSignerFactory,webAuthnSignerSingleton:s.webAuthnSignerSingleton}),s.nodeRpcUrl==null)throw RangeError("overrides.nodeRpcUrl can't be null if adding a webauthn owner");return Promise.resolve(h1(s.nodeRpcUrl,a,"latest")).then(function(f){f.length<3&&(u=e.createDeployWebAuthnVerifierMetaTransaction(r.x,r.y,{eip7212WebAuthnPrecompileVerifier:s.eip7212WebAuthnPrecompileVerifier,eip7212WebAuthnContractVerifier:s.eip7212WebAuthnContractVerifier,webAuthnSignerFactory:s.webAuthnSignerFactory}))})}a=r}();return Promise.resolve(l&&l.then?l.then(o):o())}catch(f){return Promise.reject(f)}},t.createStandardAddOwnerWithThresholdMetaTransaction=function(r,i){var s=Be("0x0d582f13",["address","uint256"],[r,i]);return{to:this.accountAddress,data:s,value:0n}},t.createStandardSwapOwnerMetaTransaction=function(r,i,s){var a=Be("0xe318b52b",["address","address","address"],[s,i,r]);return{to:this.accountAddress,data:a,value:0n}},t.createStandardRemoveOwnerMetaTransaction=function(r,i,s){var a=Be("0xf8dc5dd9",["address","address","uint256"],[s,r,i]);return{to:this.accountAddress,data:a,value:0n}},e.createDeployWebAuthnVerifierMetaTransaction=function(r,i,s){var a,o,c;s===void 0&&(s={});var u=(a=s.eip7212WebAuthnPrecompileVerifier)!=null?a:e.DEFAULT_WEB_AUTHN_PRECOMPILE,l=(o=s.eip7212WebAuthnContractVerifier)!=null?o:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER;return{to:(c=s.webAuthnSignerFactory)!=null?c:e.DEFAULT_WEB_AUTHN_SIGNER_FACTORY,value:0n,data:Be("0x0d2f0489",["uint256","uint256","uint176"],[r,i,"0x"+u.slice(-4)+l.slice(2)])}},t.getOwners=function(r){try{var i=Be(Qu("getOwners()"),[],[]);return Promise.resolve(Ku(r,{to:this.accountAddress,data:i},"latest")).then(function(s){return ct.defaultAbiCoder().decode(["address[]"],s)[0]})}catch(s){return Promise.reject(s)}},t.getModules=function(r,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(m1(function(){var a=i.start;a==null&&(a="0x0000000000000000000000000000000000000001");var o=i.pageSize;o==null&&(o=10n);var c=Be("0xcc2f8452",["address","uint256"],[a,o]);return Promise.resolve(Ku(r,{to:s.accountAddress,data:c},"latest")).then(function(u){if(u=="0x")throw new ne("BAD_DATA","getModules retuned an empty result, the target account is probably not deployed yet.");var l=ct.defaultAbiCoder().decode(["address[]","address"],u);return[l[0],l[1]]})},function(a){var o=Ae(a);throw new ne("BAD_DATA","getModules failed",{cause:o})}))}catch(a){return Promise.reject(a)}},t.isModuleEnabled=function(r,i){try{var s=Be(Qu("isModuleEnabled(address)"),["address"],[i]);return Promise.resolve(Ku(r,{to:this.accountAddress,data:s},"latest")).then(function(a){return ct.defaultAbiCoder().decode(["bool"],a)[0]})}catch(a){return Promise.reject(a)}},e.createDummySignerSignaturePairForExpectedSigners=function(r,i){i===void 0&&(i={});for(var s,a=[],o=ea([].concat(r));!(s=o()).done;){var c=s.value,u=void 0;if(typeof c=="string")u=nd;else{if(i.isInit==null)throw RangeError("Must define isInit parameter when using WebAuthn");if(u=zv,i.isInit){var l,f=(l=i.webAuthnSharedSigner)!=null?l:e.DEFAULT_WEB_AUTHN_SHARED_SIGNER;u.signer=f}else{var d,p,y,h,m=(d=i.eip7212WebAuthnPrecompileVerifier)!=null?d:e.DEFAULT_WEB_AUTHN_PRECOMPILE,x=(p=i.eip7212WebAuthnContractVerifier)!=null?p:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER,w=(y=i.webAuthnSignerFactory)!=null?y:e.DEFAULT_WEB_AUTHN_SIGNER_FACTORY,g=(h=i.webAuthnSignerSingleton)!=null?h:e.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON;u.signer=e.createWebAuthnSignerVerifierAddress(c.x,c.y,{eip7212WebAuthnPrecompileVerifier:m,eip7212WebAuthnContractVerifier:x,webAuthnSignerFactory:w,webAuthnSignerSingleton:g})}}a.push(u)}return a},e.verifyWebAuthnSignatureForMessageHash=function(r,i,s,a,o){o===void 0&&(o={});try{var c,u,l,f;if(s.length!=66||s.slice(0,2)!="0x")throw RangeError("Invalide messageHash ,must be a 0x prefixed keccak256 hash.");var d=(c=o.eip7212WebAuthnPrecompileVerifier)!=null?c:e.DEFAULT_WEB_AUTHN_PRECOMPILE,p=(u=o.eip7212WebAuthnContractVerifier)!=null?u:e.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER,y=(l=o.webAuthnSignerSingleton)!=null?l:e.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON;if(d.length!=42||d.slice(0,38)!=Fi.slice(0,38))throw RangeError("Invalide precompile address. It should have the format 0x000000000000000000000000000000000000____");var h=Be("0x1626ba7e",["bytes32","bytes"],[s,a]),m="0x1111111111111111111111111111111111111111",x={to:m,data:h},w=e.createSafeWebAuthnSignerProxyDeployedByteCode(i,d,p,y);return Promise.resolve(Ku(r,x,"latest",(f={},f[m]={code:w},f))).then(function(g){return ct.defaultAbiCoder().decode(["bool"],g)[0]})}catch(g){return Promise.reject(g)}},e.createSafeWebAuthnSignerProxyDeployedByteCode=function(r,i,s,a){var o=ct.defaultAbiCoder(),c=o.encode(["uint256"],[r.x]),u=o.encode(["uint256"],[r.y]);return"0x608060408190527f"+o.encode(["uint176"],["0x"+i.slice(-4)+s.slice(2)]).slice(2)+"3660b681018290527f"+u.slice(2)+"60a082018190527f"+c.slice(2)+"8285018190527f000000000000000000000000"+a.slice(2)+"9490939192600082376000806056360183885af490503d6000803e8060c3573d6000fd5b503d6000f3fea2646970667358221220ddd9bb059ba7a6497d560ca97aadf4dbf0476f578378554a50d41c6bb654beae64736f6c63430008180033"},e.createEnableModuleMetaTransaction=function(r,i){return{to:i,data:Be("0x610b5925",["address"],[r]),value:0n}},t.createDisableModuleMetaTransaction=function(r,i,s,a){a===void 0&&(a={});try{var o=this;return Promise.resolve(m1(function(){function c(f){return e.createStandardDisableModuleMetaTransaction(i,u,s)}var u=a.prevModuleAddress,l=function(){if(u==null)return Promise.resolve(o.getModules(r,{start:a.modulesStart,pageSize:a.modulesPageSize})).then(function(f){var d=f[0],p=d.indexOf(i);if(p==-1)throw RangeError("moduleToDisable "+i+" is not an enabled module.");if(p==0)u="0x0000000000000000000000000000000000000001";else{if(!(p>0))throw RangeError("Invalid module index for "+i);u=d[p-1]}})}();return l&&l.then?l.then(c):c()},function(c){var u=Ae(c);throw new ne("BAD_DATA","createDisableModuleMetaTransaction failed",{cause:u})}))}catch(c){return Promise.reject(c)}},e.createStandardDisableModuleMetaTransaction=function(r,i,s){return{to:s,data:Be("0xe009cfde",["address","address"],[i,r]),value:0n}},t.simulateCallDataWithTenderlyAndCreateShareLink=function(r,i,s,a,o,c,u,l){a===void 0&&(a=null),u===void 0&&(u=null),l===void 0&&(l={});try{var f=function(h){var m,x;return x=l.callData==null?c.length==1?e.createAccountCallDataSingleTransaction(c[0],{safeModuleExecutorFunctionSelector:l.safeModuleExecutorFunctionSelector}):e.createAccountCallDataBatchTransactions(c,{safeModuleExecutorFunctionSelector:l.safeModuleExecutorFunctionSelector,multisendContractAddress:l.multisendContractAddress}):l.callData,(m=l.createShareLink)==null||m?Promise.resolve($v(r,i,s,o,d.entrypointAddress,d.accountAddress,x,p?d.factoryAddress:null,p?d.factoryData:null,u)):Promise.resolve(b1(r,i,s,o,d.entrypointAddress,d.accountAddress,x,p?d.factoryAddress:null,p?d.factoryData:null,u)).then(function(w){return{simulation:w}})},d=this,p=!1,y=function(){if(a==null&&l.isInit==null)throw RangeError("nodeRpcUrl and overrides.isInit can't both be null");var h=function(){if(l.isInit==null)return Promise.resolve(y1(a,d.entrypointAddress,d.accountAddress)).then(function(m){p=m==0n});p=l.isInit}();if(h&&h.then)return h.then(function(){})}();return Promise.resolve(y&&y.then?y.then(f):f())}catch(h){return Promise.reject(h)}},t.getSafeMessageEip712Data=function(r,i){return Kv(this.accountAddress,r,i)},e}(Xs);He.DEFAULT_SAFE_SINGLETON={singletonAddress:"0x29fcB43b46531BcA003ddC8FCB67FFE91900C762",singletonInitHash:"0xe298282cefe913ab5d282047161268a8222e4bd4ed106300c547894bbefd31ee"},He.DEFAULT_WEB_AUTHN_SHARED_SIGNER="0xfD90FAd33ee8b58f32c00aceEad1358e4AFC23f9",He.DEFAULT_WEB_AUTHN_SIGNER_SINGLETON="0x270D7E4a57E6322f336261f3EaE2BADe72E68d72",He.DEFAULT_WEB_AUTHN_SIGNER_FACTORY="0xF7488fFbe67327ac9f37D5F722d83Fc900852Fbf",He.DEFAULT_WEB_AUTHN_FCLP256_VERIFIER="0x445a0683e494ea0c5AF3E83c5159fBE47Cf9e765",He.DEFAULT_WEB_AUTHN_PRECOMPILE="0x0000000000000000000000000000000000000000",He.DEFAULT_WEB_AUTHN_SIGNER_PROXY_CREATION_CODE="0x61010060405234801561001157600080fd5b506040516101ee3803806101ee83398101604081905261003091610058565b6001600160a01b0390931660805260a09190915260c0526001600160b01b031660e0526100bc565b6000806000806080858703121561006e57600080fd5b84516001600160a01b038116811461008557600080fd5b60208601516040870151606088015192965090945092506001600160b01b03811681146100b157600080fd5b939692955090935050565b60805160a05160c05160e05160ff6100ef60003960006008015260006031015260006059015260006080015260ff6000f3fe608060408190527f00000000000000000000000000000000000000000000000000000000000000003660b681018290527f000000000000000000000000000000000000000000000000000000000000000060a082018190527f00000000000000000000000000000000000000000000000000000000000000008285018190527f00000000000000000000000000000000000000000000000000000000000000009490939192600082376000806056360183885af490503d6000803e8060c3573d6000fd5b503d6000f3fea2646970667358221220ddd9bb059ba7a6497d560ca97aadf4dbf0476f578378554a50d41c6bb654beae64736f6c63430008180033",He.DEFAULT_MULTISEND_CONTRACT_ADDRESS="0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",He.initializerFunctionSelector="0xb63e800d",He.initializerFunctionInputAbi=["address[]","uint256","address","bytes","address","address","uint256","address"],He.DEFAULT_EXECUTOR_FUCNTION_SELECTOR=br.executeUserOpWithErrorString,He.executorFunctionInputAbi=["address","uint256","bytes","uint8"];var rd;(function(n){n.After3Minutes="0x949d01d424bE050D09C16025dd007CB59b3A8c66",n.After3Days="0x38275826E1933303E508433dD5f289315Da2541c",n.After7Days="0x088f6cfD8BB1dDb1BB069CCb3fc1A98927D233f2",n.After14Days="0x9BacD92F4687Db306D7ded5d4513a51EA05df25b"})(rd||(rd={})),rd.After3Days;var Wt=function(n){function e(t,r){var i,s;r===void 0&&(r={});var a=(i=r.safe4337ModuleAddress)!=null?i:e.DEFAULT_SAFE_4337_MODULE_ADDRESS,o=(s=r.entrypointAddress)!=null?s:e.DEFAULT_ENTRYPOINT_ADDRESS;return n.call(this,t,a,o,{onChainIdentifierParams:r.onChainIdentifierParams,onChainIdentifier:r.onChainIdentifier})||this}return Jo(e,n),e.createAccountAddress=function(t,r){var i,s;return r===void 0&&(r={}),He.createAccountAddressAndFactoryAddressAndData(t,r,(i=r.safe4337ModuleAddress)!=null?i:e.DEFAULT_SAFE_4337_MODULE_ADDRESS,(s=r.safeModuleSetupddress)!=null?s:e.DEFAULT_SAFE_MODULE_SETUP_ADDRESS)[0]},e.initializeNewAccount=function(t,r){var i,s;r===void 0&&(r={});for(var a,o=!1,c=0n,u=0n,l=ea(t);!(a=l()).done;){var f=a.value;if(typeof f!="string"){if(o)throw RangeError("Only one Webauthn signer is allowed during initialization");if(t.indexOf(f)!=0)throw RangeError("Webauthn owner has to be the first owner for an init transaction.");o=!0,c=f.x,u=f.y}}var d=e.createAccountAddressAndFactoryAddressAndData(t,r,(i=r.safe4337ModuleAddress)!=null?i:e.DEFAULT_SAFE_4337_MODULE_ADDRESS,(s=r.safeModuleSetupddress)!=null?s:e.DEFAULT_SAFE_MODULE_SETUP_ADDRESS),p=d[1],y=d[2],h=new e(d[0],{safe4337ModuleAddress:r.safe4337ModuleAddress,entrypointAddress:r.entrypointAddress,onChainIdentifierParams:r.onChainIdentifierParams,onChainIdentifier:r.onChainIdentifier});return h.factoryAddress=p,h.factoryData=y,o&&(h.isInitWebAuthn=!0,h.x=c,h.y=u),h},e.getUserOperationEip712Hash=function(t,r,i){var s,a,o,c;i===void 0&&(i={});var u=(s=i.validAfter)!=null?s:0n,l=(a=i.validUntil)!=null?a:0n,f=(o=i.entrypointAddress)!=null?o:e.DEFAULT_ENTRYPOINT_ADDRESS,d=(c=i.safe4337ModuleAddress)!=null?c:e.DEFAULT_SAFE_4337_MODULE_ADDRESS;return He.getUserOperationEip712Hash(t,r,{validAfter:u,validUntil:l,entrypointAddress:f,safe4337ModuleAddress:d})},e.getUserOperationEip712Data=function(t,r,i){var s,a,o,c;i===void 0&&(i={});var u=(s=i.validAfter)!=null?s:0n,l=(a=i.validUntil)!=null?a:0n,f=(o=i.entrypointAddress)!=null?o:e.DEFAULT_ENTRYPOINT_ADDRESS,d=(c=i.safe4337ModuleAddress)!=null?c:e.DEFAULT_SAFE_4337_MODULE_ADDRESS;return He.getUserOperationEip712Data(t,r,{validAfter:u,validUntil:l,entrypointAddress:f,safe4337ModuleAddress:d})},e.createInitializerCallData=function(t,r,i){var s,a;i===void 0&&(i={});var o=(s=i.safe4337ModuleAddress)!=null?s:e.DEFAULT_SAFE_4337_MODULE_ADDRESS,c=(a=i.safeModuleSetupddress)!=null?a:e.DEFAULT_SAFE_MODULE_SETUP_ADDRESS;return He.createBaseInitializerCallData(t,r,o,c,i.multisendContractAddress,i.webAuthnSharedSigner,i.eip7212WebAuthnPrecompileVerifierForSharedSigner,i.eip7212WebAuthnContractVerifierForSharedSigner)},e.createFactoryAddressAndData=function(t,r){var i,s;return r===void 0&&(r={}),He.createFactoryAddressAndData(t,r,(i=r.safe4337ModuleAddress)!=null?i:e.DEFAULT_SAFE_4337_MODULE_ADDRESS,(s=r.safeModuleSetupddress)!=null?s:e.DEFAULT_SAFE_MODULE_SETUP_ADDRESS)},e.prototype.createUserOperation=function(t,r,i,s){s===void 0&&(s={});try{return Promise.resolve(this.createBaseUserOperationAndFactoryAddressAndFactoryData(t,!1,r,i,s)).then(function(a){return Bn({},a[0],{factory:a[1],factoryData:a[2],paymaster:null,paymasterVerificationGasLimit:null,paymasterPostOpGasLimit:null,paymasterData:null})})}catch(a){return Promise.reject(a)}},e}(He);Wt.DEFAULT_ENTRYPOINT_ADDRESS=qe,Wt.DEFAULT_SAFE_4337_MODULE_ADDRESS="0x75cf11467937ce3F2f357CE24ffc3DBF8fD5c226",Wt.DEFAULT_SAFE_MODULE_SETUP_ADDRESS="0x2dd68b007B46fBe91B9A7c3EDa5A7a1063cB5b47";var Qv=function(){};function Vr(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}var id=function(n){function e(r){var i;return(i=n.call(this)||this).rpcUrl=void 0,i.version=void 0,i.entrypointDataV8=void 0,i.entrypointDataV7=void 0,i.entrypointDataV6=void 0,i.initialized=!1,i.rpcUrl=r,i}Jo(e,n);var t=e.prototype;return t.initialize=function(){try{var r=this;return Promise.resolve(Vr(function(){return Promise.resolve(Re(r.rpcUrl,"pm_clientVersion",[])).then(function(i){if(i.startsWith("Candide/v3"))r.version="v3";else{if(!i.startsWith("Candide/v2"))throw RangeError("Invalid paymaster version received from paymaster rpc");r.version="v2"}return Promise.resolve(r.getSupportedEntrypointsLive()).then(function(s){function a(){function c(){function l(){if(r.entrypointDataV8==null&&r.entrypointDataV7==null&&r.entrypointDataV6==null)throw RangeError("Invalid data received during initialization.");return r.initialized=!0,null}var f=function(){if(s.some(function(d){return d.toLowerCase()===jt.toLowerCase()}))return Promise.resolve(r.getSupportedERC20TokensAndPaymasterMetadata(jt)).then(function(d){r.entrypointDataV6=d??null})}();return f&&f.then?f.then(l):l()}var u=function(){if(s.some(function(l){return l.toLowerCase()===qe.toLowerCase()}))return Promise.resolve(r.getSupportedERC20TokensAndPaymasterMetadata(qe)).then(function(l){r.entrypointDataV7=l??null})}();return u&&u.then?u.then(c):c()}var o=function(){if(s.some(function(c){return c.toLowerCase()===ln.toLowerCase()}))return Promise.resolve(r.getSupportedERC20TokensAndPaymasterMetadata(ln)).then(function(c){r.entrypointDataV8=c??null})}();return o&&o.then?o.then(a):a()})})},function(i){var s=Ae(i);throw new ne("PAYMASTER_ERROR","failed initializing the paymaster",{cause:s})}))}catch(i){return Promise.reject(i)}},t.getSupportedERC20TokensAndPaymasterMetadata=function(r){try{var i,s=this,a=function(){if(!s.initialized)return Vr(function(){function p(){if(r==ln){var m={tokens:y.tokens.map(function(g){return{name:g.name,symbol:g.symbol,address:g.address,decimals:Number(g.decimals)}}),paymasterMetadata:y.paymasterMetadata};return i=1,m}if(r==qe){var x={tokens:y.tokens.map(function(g){return{name:g.name,symbol:g.symbol,address:g.address,decimals:Number(g.decimals)}}),paymasterMetadata:y.paymasterMetadata};return i=1,x}if(r==jt){var w={tokens:y.tokens.map(function(g){return{name:g.name,symbol:g.symbol,address:g.address,decimals:Number(g.decimals)}}),paymasterMetadata:y.paymasterMetadata};return i=1,w}throw RangeError("unsupported entrypoint.")}var y,h=s.version=="v3"?Promise.resolve(Re(s.rpcUrl,"pm_supportedERC20Tokens",[r])).then(function(m){y=m}):Promise.resolve(Re(s.rpcUrl,"pm_supportedERC20Tokens",[])).then(function(m){y=m});return h&&h.then?h.then(p):p()},function(p){var y=Ae(p);throw new ne("PAYMASTER_ERROR","getSupportedERC20TokensAndPaymasterMetadata failed",{cause:y})});if(r==ln){var o,c=(o=s.entrypointDataV8)!=null?o:null;return i=1,c}if(r==qe){var u,l=(u=s.entrypointDataV7)!=null?u:null;return i=1,l}if(r==jt){var f,d=(f=s.entrypointDataV6)!=null?f:null;return i=1,d}}();return Promise.resolve(a&&a.then?a.then(function(o){return i?o:null}):i?a:null)}catch(o){return Promise.reject(o)}},t.getSupportedEntrypointsLive=function(){try{var r=this;return Promise.resolve(Vr(function(){return r.version=="v3"?Promise.resolve(Re(r.rpcUrl,"pm_supportedEntryPoints",[])):Promise.resolve(Re(r.rpcUrl,"pm_supportedEntryPoint",[])).then(function(i){return[i]})},function(i){var s=Ae(i);throw new ne("PAYMASTER_ERROR","getSupportedEntrypoint failed",{cause:s})}))}catch(i){return Promise.reject(i)}},t.getSupportedEntrypoints=function(){try{var r=function(){var a=[];return i.entrypointDataV8!=null&&a.push(ln),i.entrypointDataV7!=null&&a.push(qe),i.entrypointDataV6!=null&&a.push(jt),a},i=this,s=function(){if(!i.initialized)return Promise.resolve(i.initialize()).then(function(){})}();return Promise.resolve(s&&s.then?s.then(r):r())}catch(a){return Promise.reject(a)}},t.getPaymasterMetaData=function(r){try{var i=function(){if(r==ln&&s.entrypointDataV8!=null)return s.entrypointDataV8.paymasterMetadata;if(r==qe&&s.entrypointDataV7!=null)return s.entrypointDataV7.paymasterMetadata;if(r==jt&&s.entrypointDataV6!=null)return s.entrypointDataV6.paymasterMetadata;throw RangeError("unsupported entrypoint.")},s=this,a=function(){if(!s.initialized)return Promise.resolve(s.initialize()).then(function(){})}();return Promise.resolve(a&&a.then?a.then(i):i())}catch(o){return Promise.reject(o)}},t.isSupportedERC20Token=function(r,i){i===void 0&&(i=qe);try{var s=this.getSupportedERC20TokenData(r,i);return Promise.resolve(!!s)}catch(a){return Promise.reject(a)}},t.getSupportedERC20TokenData=function(r,i){i===void 0&&(i=qe);try{var s=function(){var c;if(i==ln&&a.entrypointDataV8!=null)c=a.entrypointDataV8.tokens;else if(i==qe&&a.entrypointDataV7!=null)c=a.entrypointDataV7.tokens;else{if(i!=jt||a.entrypointDataV6==null)throw RangeError("unsupported entrypoint.");c=a.entrypointDataV6.tokens}var u=c.find(function(l){return l.address.toLowerCase()===r.toLowerCase()});return u?{name:u.name,symbol:u.symbol,address:u.address,decimals:Number(u.decimals)}:null},a=this,o=function(){if(!a.initialized)return Promise.resolve(a.initialize()).then(function(){})}();return Promise.resolve(o&&o.then?o.then(s):s())}catch(c){return Promise.reject(c)}},t.createPaymasterUserOperation=function(r,i,s,a){try{var o=function(){var f=void 0;return Vr(function(){function d(x){return Promise.resolve(Re(c.rpcUrl,"pm_sponsorUserOperation",[r,p,s])).then(function(w){var g,v,S,O,R,C=w,_={callGasLimit:C.callGasLimit==null?void 0:BigInt(C.callGasLimit),preVerificationGas:C.preVerificationGas==null?void 0:BigInt(C.preVerificationGas),verificationGasLimit:C.verificationGasLimit==null?void 0:BigInt(C.verificationGasLimit),maxFeePerGas:C.maxFeePerGas==null?void 0:BigInt(C.maxFeePerGas),maxPriorityFeePerGas:C.maxPriorityFeePerGas==null?void 0:BigInt(C.maxPriorityFeePerGas),sponsorMetadata:C.sponsorMetadata==null?void 0:C.sponsorMetadata};if(r.callGasLimit=(g=_.callGasLimit)!=null?g:r.callGasLimit,r.preVerificationGas=(v=_.preVerificationGas)!=null?v:r.preVerificationGas,r.verificationGasLimit=(S=_.verificationGasLimit)!=null?S:r.verificationGasLimit,r.maxFeePerGas=(O=_.maxFeePerGas)!=null?O:r.maxFeePerGas,r.maxPriorityFeePerGas=(R=_.maxPriorityFeePerGas)!=null?R:r.maxPriorityFeePerGas,f=_.sponsorMetadata,"initCode"in r)r.paymasterAndData=w.paymasterAndData;else{var U=w;r.paymaster=U.paymaster,r.paymasterVerificationGasLimit=BigInt(U.paymasterVerificationGasLimit),r.paymasterPostOpGasLimit=BigInt(U.paymasterPostOpGasLimit),r.paymasterData=U.paymasterData}return[r,f]})}var p=u.entrypoint;if(p==null)if("initCode"in r){if(c.entrypointDataV6==null)throw RangeError("UserOperation v0.06 is not supported");p=jt,r.paymasterAndData=c.entrypointDataV6.paymasterMetadata.dummyPaymasterAndData}else if("eip7702Auth"in r){if(c.entrypointDataV8==null)throw RangeError("UserOperation v0.08 is not supported");p=ln;var y=c.entrypointDataV8.paymasterMetadata.dummyPaymasterAndData;r.paymaster=y.paymaster,r.paymasterVerificationGasLimit=y.paymasterVerificationGasLimit,r.paymasterPostOpGasLimit=y.paymasterPostOpGasLimit,r.paymasterData=y.paymasterData}else{if(c.entrypointDataV7==null)throw RangeError("UserOperation v0.07 is not supported");p=qe;var h=c.entrypointDataV7.paymasterMetadata.dummyPaymasterAndData;r.paymaster=h.paymaster,r.paymasterVerificationGasLimit=h.paymasterVerificationGasLimit,r.paymasterPostOpGasLimit=h.paymasterPostOpGasLimit,r.paymasterData=h.paymasterData}var m=function(){if(c.version=="v2"||s.token!==void 0){var x=function(O){var R,C,_,U,D,$;if(typeof u.preVerificationGas=="bigint"&&u.preVerificationGas<0n)throw RangeError("preVerificationGas override can't be negative");if(typeof u.verificationGasLimit=="bigint"&&u.verificationGasLimit<0n)throw RangeError("verificationGasLimit override can't be negative");if(typeof u.callGasLimit=="bigint"&&u.callGasLimit<0n)throw RangeError("callGasLimit override can't be negative");r.preVerificationGas=(R=u.preVerificationGas)!=null?R:w*BigInt((C=u.preVerificationGasPercentageMultiplier)!=null?C:100)/100n,r.verificationGasLimit=(_=u.verificationGasLimit)!=null?_:g*BigInt((U=u.verificationGasLimitPercentageMultiplier)!=null?U:100)/100n,r.callGasLimit=(D=u.callGasLimit)!=null?D:v*BigInt(($=u.callGasLimitPercentageMultiplier)!=null?$:100)/100n,r.preVerificationGas=r.preVerificationGas+100n,r.verificationGasLimit=r.verificationGasLimit+10000n},w=r.preVerificationGas,g=r.verificationGasLimit,v=r.callGasLimit,S=function(){if(u.preVerificationGas==null||u.verificationGasLimit==null||u.callGasLimit==null)return function(){if(i!=null){var O=new ed(i);r.callGasLimit=0n,r.verificationGasLimit=0n,r.preVerificationGas=0n;var R=r.maxFeePerGas,C=r.maxPriorityFeePerGas;return r.maxFeePerGas=0n,r.maxPriorityFeePerGas=0n,Promise.resolve(O.estimateUserOperationGas(r,p,u.state_override_set)).then(function(_){w<_.preVerificationGas&&(w=_.preVerificationGas),g<_.verificationGasLimit&&(g=_.verificationGasLimit),v<_.callGasLimit&&(v=_.callGasLimit),r.maxFeePerGas=R,r.maxPriorityFeePerGas=C})}throw new ne("BAD_DATA","bundlerRpc can't be null if preVerificationGas,verificationGasLimit and callGasLimit are not overridden")}()}();return S&&S.then?S.then(x):x()}if(u.preVerificationGas!=null||u.verificationGasLimit!=null||u.callGasLimit!=null||u.preVerificationGasPercentageMultiplier!=null||u.verificationGasLimitPercentageMultiplier!=null||u.callGasLimitPercentageMultiplier!=null)throw RangeError("you can't use any gas overrides for paymaster v3, as it will estimate gas and override any provided values.")}();return m&&m.then?m.then(d):d()},function(d){var p=Ae(d);throw new ne("PAYMASTER_ERROR","pm_sponsorUserOperation failed",{cause:p})})},c=this;s==null&&(s={});var u=a;u==null&&(u={}),r=Bn({},r);var l=function(){if(!c.initialized)return Promise.resolve(c.initialize()).then(function(){})}();return Promise.resolve(l&&l.then?l.then(o):o())}catch(f){return Promise.reject(f)}},t.createSponsorPaymasterUserOperation=function(r,i,s,a){try{var o={};return s&&s.trim().length>0&&(o.sponsorshipPolicyId=s),Promise.resolve(this.createPaymasterUserOperation(r,i,o,a))}catch(c){return Promise.reject(c)}},t.createTokenPaymasterUserOperation=function(r,i,s,a,o){try{var c=this;return Promise.resolve(Vr(function(){function u(){var f=o||{};(f==null?void 0:f.callGasLimitPercentageMultiplier)==null&&(f.callGasLimitPercentageMultiplier=105);var d=o==null?void 0:o.entrypoint;return d==null&&(d="initCode"in i?jt:"eip7702Auth"in i?ln:qe),Promise.resolve(c.calculateUserOperationErc20TokenMaxGasCost(i,s)).then(function(p){var y=2n*p;return Promise.resolve(c.getPaymasterMetaData(d)).then(function(h){if(h==null)throw RangeError("unsupported entrypoint.");var m=r.prependTokenPaymasterApproveToCallData(i.callData,s,h.address,y);return i.callData=m,"initCode"in i?Promise.resolve(c.createPaymasterUserOperation(i,a,{token:s},f)).then(function(x){return x[0]}):"eip7702Auth"in i?Promise.resolve(c.createPaymasterUserOperation(i,a,{token:s},f)).then(function(x){return x[0]}):Promise.resolve(c.createPaymasterUserOperation(i,a,{token:s},f)).then(function(x){return x[0]})})})}var l=function(){if(!c.initialized)return Promise.resolve(c.initialize()).then(function(){})}();return l&&l.then?l.then(u):u()},function(u){var l=Ae(u);throw new ne("PAYMASTER_ERROR","createTokenPaymasterUserOperation failed",{cause:l})}))}catch(u){return Promise.reject(u)}},t.calculateUserOperationErc20TokenMaxGasCost=function(r,i,s){s===void 0&&(s={});try{var a=this;return Promise.resolve(Vr(function(){function o(){var u=s.entrypoint;return u==null&&(u="initCode"in r?jt:"eip7702Auth"in r?ln:qe),Promise.resolve(a.fetchTokenPaymasterExchangeRate(i,u)).then(function(l){return l*qu(r)/BigInt(Math.pow(10,18))})}var c=function(){if(!a.initialized)return Promise.resolve(a.initialize()).then(function(){})}();return c&&c.then?c.then(o):o()},function(o){var c=Ae(o);throw new ne("PAYMASTER_ERROR","calculateUserOperationErc20TokenMaxGasCost failed",{cause:c})}))}catch(o){return Promise.reject(o)}},t.fetchTokenPaymasterExchangeRate=function(r,i){i===void 0&&(i=qe);try{var s=this;return Promise.resolve(Vr(function(){function a(){function c(){var f=u.tokens.map(function(p){return{address:p.address,exchangeRate:p.exchangeRate}}),d=f.find(function(p){return p.address.toLowerCase()===r.toLowerCase()});if(d)return BigInt(d.exchangeRate);throw new ne("PAYMASTER_ERROR",r+" token is not supported by the paymaster.",{context:{supportedERC20TokensAndPaymasterMetadataV7:JSON.stringify(s.entrypointDataV7,function(p,y){return typeof y=="bigint"?"0x"+y.toString(16):y}),supportedERC20TokensAndPaymasterMetadataV6:JSON.stringify(s.entrypointDataV6,function(p,y){return typeof y=="bigint"?"0x"+y.toString(16):y})}})}var u,l=s.version=="v3"?Promise.resolve(Re(s.rpcUrl,"pm_supportedERC20Tokens",[i])).then(function(f){u=f}):Promise.resolve(Re(s.rpcUrl,"pm_supportedERC20Tokens",[])).then(function(f){u=f});return l&&l.then?l.then(c):c()}var o=function(){if(!s.initialized)return Promise.resolve(s.initialize()).then(function(){})}();return o&&o.then?o.then(a):a()},function(a){var o=Ae(a);throw new ne("PAYMASTER_ERROR","fetchTokenPaymasterExchangeRate failed",{cause:o})}))}catch(a){return Promise.reject(a)}},t.fetchSupportedERC20TokensAndPaymasterMetadata=function(r){r===void 0&&(r=qe);try{var i=this;return Promise.resolve(Vr(function(){function s(){function o(){if(r==ln||r==qe)return{tokens:c.tokens.map(function(l){return{name:l.name,symbol:l.symbol,address:l.address,decimals:Number(l.decimals),exchangeRate:BigInt(l.exchangeRate)}}),paymasterMetadata:c.paymasterMetadata};if(r==jt)return{tokens:c.tokens.map(function(l){return{name:l.name,symbol:l.symbol,address:l.address,decimals:Number(l.decimals),exchangeRate:BigInt(l.exchangeRate)}}),paymasterMetadata:c.paymasterMetadata};throw RangeError("unsupported entrypoint.")}var c,u=i.version=="v3"?Promise.resolve(Re(i.rpcUrl,"pm_supportedERC20Tokens",[r])).then(function(l){c=l}):Promise.resolve(Re(i.rpcUrl,"pm_supportedERC20Tokens",[])).then(function(l){c=l});return u&&u.then?u.then(o):o()}var a=function(){if(!i.initialized)return Promise.resolve(i.initialize()).then(function(){})}();return a&&a.then?a.then(s):s()},function(s){var a=Ae(s);throw new ne("PAYMASTER_ERROR","fetchSupportedERC20TokensAndPaymasterMetadata failed",{cause:a})}))}catch(s){return Promise.reject(s)}},e}(Qv);const qv=n=>hi(An(n)),Kt=n=>{let e=n.message.toString()||n.toString();return e.includes("TRPCClientError:")&&(e=e.replace("TRPCClientError:","").trim()),e},Jv=n=>n?n._longShares?{_longShares:BigInt(n._longShares||0),_shortShares:BigInt(n._shortShares||0),_meanEntryPrice:BigInt(n._meanEntryPrice||0),_meanEntrySpread:BigInt(n._meanEntrySpread||0),_meanEntryLeverage:BigInt(n._meanEntryLeverage||0),_liquidationPrice:BigInt(n._liquidationPrice||0)}:{_longShares:n[0],_shortShares:n[1],_meanEntryPrice:n[2],_meanEntrySpread:n[3],_meanEntryLeverage:n[4],_liquidationPrice:n[5]}:null,sd=n=>n==null||n==null?null:(Object.keys(n).forEach(t=>{typeof n[t]=="object"?n[t]=sd(n[t]):typeof n[t]=="bigint"&&(n[t]=An(n[t]))}),n),Yv=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h)=>{Number(s)>0?a=BigInt(0).toString():a=BigInt(a).toString();const m={_marketId:i,_closeSharesAmount:BigInt(s),_openMPHTokenAmount:BigInt(a),_tradeDirection:o,_orderLeverage:BigInt(c),_onlyIfPriceAbove:BigInt(u),_onlyIfPriceBelow:BigInt(l),_goodUntil:BigInt(f),_goodFrom:BigInt(d)},x=kt({abi:_e,address:r,client:{public:e,wallet:n}});console.log("createOrder",m);try{const w=await x.write.createOrderFromGasToken([m],{chain:e.chain,value:m._openMPHTokenAmount,gas:BigInt(2e6),account:t.address});console.log("transaction_hash",w),clearTimeout(p);let g="";const v=await e.waitForTransactionReceipt({hash:w});if(v.status!=="success")throw new Error(`Transaction failed with status: ${v.status}`);return v&&v&&v.transactionHash&&v.logs&&Jn({abi:_e,logs:v.logs,eventName:["OrderCreated"]}).forEach(O=>{var R;g=(R=O==null?void 0:O.args)==null?void 0:R._orderId}),{transaction_hash:w,order_id:g}}catch(w){throw console.log("err",w.toString()),clearTimeout(p),new Error(`Transaction failed: ${Kt(w)}`)}},Zv=async(n,e,t,r,i,s)=>{var a;try{const o=((a=n.chain)==null?void 0:a.id)||1,c={name:"MorpherOracle",version:"1",chainId:Number(o),verifyingContract:t},u={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],CancelOrder:[{name:"_orderId",type:"bytes32"},{name:"_msgSender",type:"address"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},l={_orderId:s,_msgSender:it(e.address||""),nonce:r.toString(),deadline:i.toString()},f=await n.signTypedData({account:e.address,domain:c,types:u,primaryType:"CancelOrder",message:l});if(f){const d=await Ps(f);return Nr({abi:_e,functionName:"initiateCancelOrderPermitted",args:[s,e.address,i,Number(d.v),d.r,d.s]})}return"0x"}catch(o){return console.log("error in getOracleCancelCallPermitCallData",o),"0x"}},Xv=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p)=>{let y="",h="0x";try{const m=[r,BigInt(i),BigInt(s),a,BigInt(o),BigInt(c),BigInt(u),BigInt(l),BigInt(f)],x=await n.sendCalls({account:e.address,calls:[{to:t,abi:_e,functionName:"createOrder",args:m}],capabilities:{paymasterService:{url:p}}});let w=await n.waitForCallsStatus({id:x.id});if(w.status==="success"&&w.receipts&&w.receipts.length>0){h=w.receipts[0].transactionHash,clearTimeout(d);const g=w.receipts[0];if(g.status!=="success")throw new Error(`Transaction failed with status: ${g.status}`);window.clearTimeout(d),g&&g&&g.transactionHash&&g.logs&&Jn({abi:_e,logs:g.logs,eventName:["OrderCreated"]}).forEach(S=>{var O;y=(O=S==null?void 0:S.args)==null?void 0:O._orderId})}return{transaction_hash:h,order_id:y}}catch(m){throw console.log("err",m.toString()),clearTimeout(d),new Error(`Transaction failed: ${Kt(m)}`)}},eE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h,m,x)=>{var v;let w="",g="0x";try{const S=Math.round(Date.now()/1e3)+4200,O=kt({abi:go,address:i,client:{public:e,wallet:n}}),R=await O.read.nonces([t.address]),C=await O.read.name([]);Number(c)>0?u=BigInt(0).toString():u=BigInt(u).toString();const _={_marketId:o,_closeSharesAmount:c,_openMPHTokenAmount:u,_tradeDirection:l,_orderLeverage:f,_onlyIfPriceAbove:d,_onlyIfPriceBelow:p,_goodUntil:y,_goodFrom:h},U=((v=n.chain)==null?void 0:v.id)||1;let D;if(console.log("Number(close_shares_amount)",Number(c)),Number(c)>0){const N=await kt({abi:go,address:s,client:{public:e,wallet:n}}).read.nonces([t.address]),k={name:"MorpherToken",version:"1",chainId:Number(U),verifyingContract:s},L={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},M={owner:it(t.address||""),spender:it(r||""),value:a.toString(),nonce:An(N),deadline:S.toString()};D=await ia(n,{account:t.address,types:L,domain:k,message:M,primaryType:"Permit"})}else{const T={name:C,version:"2",chainId:Number(U),verifyingContract:i},N={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},k={owner:it(t.address||""),spender:it(r||""),value:u.toString(),nonce:An(R),deadline:S.toString()};D=await ia(n,{account:t.address,types:N,domain:T,message:k,primaryType:"Permit"})}const $=await Ps(D),H={tokenAddress:i,owner:it(t.address||""),value:u.toString(),minOutValue:u,deadline:S,v:$.v,r:$.r,s:$.s},G=await n.sendCalls({account:t.address,calls:[{to:r,abi:_e,functionName:"createOrderFromToken",args:[_,H]}],capabilities:{paymasterService:{url:x}}});let P=await n.waitForCallsStatus({id:G.id});if(P.status==="success"&&P.receipts&&P.receipts.length>0){g=P.receipts[0].transactionHash,clearTimeout(m);const T=P.receipts[0];if(T.status!=="success")throw new Error(`Transaction failed with status: ${T.status}`);window.clearTimeout(m),T&&T&&T.transactionHash&&T.logs&&Jn({abi:_e,logs:T.logs,eventName:["OrderCreated"]}).forEach(k=>{var L;w=(L=k==null?void 0:k.args)==null?void 0:L._orderId})}return{transaction_hash:g,order_id:w}}catch(S){throw console.log("err",S.toString()),clearTimeout(m),new Error(`Transaction failed: ${Kt(S)}`)}},tE=async(n,e,t,r,i,s)=>{let a="0x";try{const o=await n.sendCalls({account:e.address,calls:[{to:t,abi:_e,functionName:"initiateCancelOrder",args:[r]}],capabilities:{paymasterService:{url:s}}});let c=await n.waitForCallsStatus({id:o.id});if(c.status==="success"&&c.receipts&&c.receipts.length>0){a=c.receipts[0].transactionHash,clearTimeout(i);const u=c.receipts[0];if(u.status!=="success")throw new Error(`Transaction failed with status: ${u.status}`)}return{transaction_hash:a,order_id:r}}catch(o){throw console.log("err",o.toString()),clearTimeout(i),new Error(`Transaction failed: ${Kt(o)}`)}},nE=async(n,e,t,r,i,s,a,o)=>{var c;try{let u=Wt.initializeNewAccount([t.address.toLowerCase()]);const f=await kt({abi:_e,address:r,client:{public:e,wallet:n}}).read.nonces([t.address]),d=BigInt(Math.round(o/1e3)+180),p=await Zv(n,t,r,f,d,a);if(!p||p=="0x")throw new Error("ORACLE_CALL_GENERATION_FAILED");const y={to:r,value:0n,data:p};let h=await u.createUserOperation([y],e.transport.url,i);const m="";let x=new id(s),[w,g]=await x.createSponsorPaymasterUserOperation(h,i,m);h=w;const v=qu(w),S=((c=n.chain)==null?void 0:c.id)||1;let O=Wt.getUserOperationEip712Data(w,BigInt(S),{validAfter:BigInt(0),validUntil:BigInt(0),entrypointAddress:u.entrypointAddress,safe4337ModuleAddress:u.safe4337ModuleAddress});const R=await n.signTypedData({account:t.address,domain:O.domain,types:O.types,primaryType:"SafeOp",message:O.messageValue});w.signature=Wt.formatEip712SignaturesToUseroperationSignature([t.address],[R],{validAfter:BigInt(0),validUntil:BigInt(0)});const C=await u.sendUserOperation(w,i||"");console.log("Useroperation sent. Waiting to be included ......");let _=await C.included();return console.log("Useroperation receipt received."),console.log(_),_.success?console.log("Order cancel user operation successful. The transaction hash is : "+_.receipt.transactionHash):console.log("Useroperation execution failed"),console.log("cost",v),!0}catch(u){throw console.log("err",u.toString()),new Error(`Transaction failed: ${Kt(u)}`)}},rE=async(n,e,t,r,i)=>{let s=null;try{const o=await kt({abi:_e,address:r,client:{public:e,wallet:n}}).write.initiateCancelOrder([i],{chain:e.chain,gas:BigInt(8e5),account:t.address});s=o;const c=await e.waitForTransactionReceipt({hash:o});if(c.status!=="success")throw new Error(`Transaction failed with status: ${c.status}`);return{transaction_hash:s,order_id:i}}catch(a){throw console.log("err",a.toString()),new Error(`Transaction failed: ${Kt(a)}`)}},iE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h)=>{let m="";const x=kt({abi:_e,address:r,client:{public:e,wallet:n}});try{const w=[i,BigInt(s),BigInt(a),o,BigInt(c),BigInt(u),BigInt(l),BigInt(f),BigInt(d)],g=await x.write.createOrder(w,{chain:e.chain,gas:BigInt(8e5),account:t.address});clearTimeout(p);const v=await e.waitForTransactionReceipt({hash:g});if(v.status!=="success")throw new Error(`Transaction failed with status: ${v.status}`);return window.clearTimeout(p),v&&v&&v.transactionHash&&v.logs&&Jn({abi:_e,logs:v.logs,eventName:["OrderCreated"]}).forEach(O=>{var R;m=(R=O==null?void 0:O.args)==null?void 0:R._orderId}),{transaction_hash:g,order_id:m}}catch(w){throw console.log("err",w.toString()),clearTimeout(p),new Error(`Transaction failed: ${Kt(w)}`)}},sE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p)=>{var y;try{const h=((y=n.chain)==null?void 0:y.id)||1,m={name:"MorpherOracle",version:"1",chainId:Number(h),verifyingContract:t},x={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],CreateOrder:[{name:"_marketId",type:"bytes32"},{name:"_closeSharesAmount",type:"uint256"},{name:"_openMPHTokenAmount",type:"uint256"},{name:"_msgSender",type:"address"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},w={_marketId:s,_closeSharesAmount:a,_openMPHTokenAmount:o,_msgSender:e.address,nonce:r.toString(),deadline:i.toString()},g=await n.signTypedData({account:e.address,domain:m,types:x,primaryType:"CreateOrder",message:w});if(g){const v=await Ps(g);return{data:Nr({abi:_e,functionName:"createOrderPermittedBySignature",args:[{_marketId:s,_closeSharesAmount:a,_openMPHTokenAmount:o,_tradeDirection:c,_orderLeverage:u,_onlyIfPriceAbove:l,_onlyIfPriceBelow:f,_goodUntil:d,_goodFrom:p},e.address,i,Number(v.v),v.r,v.s]}),success:!0,error:""}}return{data:"0x",success:!1,error:"no signature"}}catch(h){return console.log("error in getOracleCallPermitCalldata",h),{data:"0x",success:!1,error:h.toString()}}},aE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h,m,x,w)=>{var g;try{let v=Wt.initializeNewAccount([t.address.toLowerCase()]);const O=await kt({abi:_e,address:r,client:{public:e,wallet:n}}).read.nonces([t.address]);(!w||w==0)&&(w=Date.now());const R=BigInt(Math.round(w/1e3)+180),C=await sE(n,t,r,O,R,a,o,c,u,l,f,d,p,y);if(clearTimeout(h),!C)return;if(C.success==!1||C.data=="0x")throw clearTimeout(h),new Error(C.error||"ORACLE_CALL_GENERATION_FAILED");const _=((g=n.chain)==null?void 0:g.id)||1,U={to:r,value:0n,data:C.data};let D=await v.createUserOperation([U],e.transport.url,i);console.log("Create ORder"),console.log(sd(D));const $="";let H=new id(s),[G,P]=await H.createSponsorPaymasterUserOperation(D,i,$);D=G;const T=qu(G);let N=Wt.getUserOperationEip712Data(G,BigInt(_),{validAfter:BigInt(0),validUntil:BigInt(0),entrypointAddress:v.entrypointAddress,safe4337ModuleAddress:v.safe4337ModuleAddress});const k=await n.signTypedData({account:t.address,domain:N.domain,types:N.types,primaryType:"SafeOp",message:N.messageValue});clearTimeout(h),G.signature=Wt.formatEip712SignaturesToUseroperationSignature([t.address],[k],{validAfter:BigInt(0),validUntil:BigInt(0)}),console.log("paymasterUserOperation",i,G);const L=await v.sendUserOperation(G,i||"");console.log("Useroperation sent. Waiting to be included ......");let M=await L.included();console.log("Useroperation receipt received."),console.log(M),M.success?console.log("Order create user operation successful. The transaction hash is : "+M.receipt.transactionHash):console.log("Useroperation execution failed"),console.log("cost",T);const W=await e.waitForTransactionReceipt({hash:M.receipt.transactionHash});let Z="";return W&&W&&W.transactionHash&&W.logs&&Jn({abi:_e,logs:W.logs,eventName:["OrderCreated"]}).forEach(ie=>{var J;Z=(J=ie==null?void 0:ie.args)==null?void 0:J._orderId}),{transaction_hash:M.receipt.transactionHash,order_id:Z}}catch(v){throw console.log("err",v.toString()),clearTimeout(h),new Error(`Transaction failed: ${Kt(v)}`)}},ia=async(n,e)=>await n.signTypedData(e),oE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h,m,x,w)=>{var T;const g=Math.round(Date.now()/1e3)+4200,v=kt({abi:go,address:i,client:{public:e,wallet:n}}),S=await v.read.nonces([t.address]),O=await v.read.name([]);Number(c)>0?u=BigInt(0).toString():u=BigInt(u).toString();const R={_marketId:o,_closeSharesAmount:c,_openMPHTokenAmount:u,_tradeDirection:l,_orderLeverage:f,_onlyIfPriceAbove:d,_onlyIfPriceBelow:p,_goodUntil:y,_goodFrom:h},C=((T=n.chain)==null?void 0:T.id)||1;let _;if(console.log("Number(close_shares_amount)",Number(c)),Number(c)>0){const k=await kt({abi:go,address:s,client:{public:e,wallet:n}}).read.nonces([t.address]),L={name:"MorpherToken",version:"1",chainId:Number(C),verifyingContract:s},M={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},W={owner:it(t.address||""),spender:it(r),value:a.toString(),nonce:An(k),deadline:g.toString()};_=await ia(n,{account:t.address,types:M,domain:L,message:W,primaryType:"Permit"})}else{const N={name:O,version:"2",chainId:Number(C),verifyingContract:i},k={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},L={owner:it(t.address||""),spender:it(r),value:u.toString(),nonce:An(S),deadline:g.toString()};_=await ia(n,{account:t.address,types:k,domain:N,message:L,primaryType:"Permit"})}const U=await Ps(_),D={tokenAddress:i,owner:it(t.address||""),value:u.toString(),minOutValue:u,deadline:g,v:U.v,r:U.r,s:U.s},H=await kt({abi:_e,address:r,client:{public:e,wallet:n}}).write.createOrderFromToken([R,D],{chain:e.chain,gas:BigInt(8e5),account:t.address});clearTimeout(m);const G=await e.waitForTransactionReceipt({hash:H});let P="";if(G.status!=="success")throw new Error(`Transaction failed with status: ${G.status}`);return G&&G&&G.transactionHash&&G.logs&&Jn({abi:_e,logs:G.logs,eventName:["OrderCreated"]}).forEach(k=>{var L;P=(L=k==null?void 0:k.args)==null?void 0:L._orderId}),{transaction_hash:H,order_id:P}},cE=async(n,e,t,r,i,s)=>{var x;const a=((x=n.chain)==null?void 0:x.id)||1,o=Math.round(Date.now()/1e3)+4200,c=kt({abi:go,address:t,client:{public:e,wallet:n}}),u=await c.read.nonces([r.address]),f={name:await c.read.name([]),version:"2",chainId:Number(a),verifyingContract:t},d={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},p={owner:it(r.address||""),spender:it(i),value:BigInt(s).toString(),nonce:An(u),deadline:o.toString()},y=await ia(n,{account:it(r.address||""),types:d,domain:f,message:p,primaryType:"Permit"}),h=await Ps(y);return{tokenAddress:t,owner:it(r.address||""),value:s.toString(),minOutValue:s,deadline:o,v:h.v,r:h.r,s:h.s}},uE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h)=>{var m;try{const x=await cE(n,e,t,r,i,u);if(!x)throw new Error("Failed to get input token permit");const w=((m=n.chain)==null?void 0:m.id)||1,g=i,v=r.address,S=BigInt(Number(u)/10**6*10**18).toString(),O={name:"MorpherOracle",version:"1",chainId:Number(w),verifyingContract:g},R={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],CreateOrder:[{name:"_marketId",type:"bytes32"},{name:"_closeSharesAmount",type:"uint256"},{name:"_openMPHTokenAmount",type:"uint256"},{name:"_msgSender",type:"address"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},C={_marketId:o,_closeSharesAmount:c.toString(),_openMPHTokenAmount:S.toString(),_msgSender:v,nonce:s.toString(),deadline:a.toString()},_=await ia(n,{account:v,domain:O,types:R,primaryType:"CreateOrder",message:C});if(!_)throw new Error("Failed to sign CreateOrder message");const U=await Ps(_),D={_marketId:o,_closeSharesAmount:BigInt(c),_openMPHTokenAmount:BigInt(S),_tradeDirection:l,_orderLeverage:BigInt(f),_onlyIfPriceAbove:BigInt(d),_onlyIfPriceBelow:BigInt(p),_goodUntil:BigInt(y),_goodFrom:BigInt(h)},$={tokenAddress:x.tokenAddress,owner:x.owner,value:BigInt(x.value),minOutValue:BigInt(S),deadline:BigInt(x.deadline),v:Number(x.v),r:x.r,s:x.s};return Nr({abi:_e,functionName:"createOrderFromToken",args:[D,$,v,a,Number(U.v),U.r,U.s]})}catch(x){throw console.error("Error in getCreateOrderTokenPermit:",x),new Error(`GET_CREATE_ORDER_TOKEN_PERMIT_FAILED: ${x.message||"Unknown error"}`)}},lE=async(n,e,t,r,i,s,a,o,c,u,l,f,d,p,y,h,m,x,w,g)=>{var v;try{let S=Wt.initializeNewAccount([t.address.toLowerCase()]);const R=await kt({abi:_e,address:r,client:{public:e,wallet:n}}).read.nonces([t.address]);(!g||g==0)&&(g=Date.now());const C=BigInt(Math.round(g/1e3)+180),_=await uE(n,e,i,t,r,R,C,o,c,u,l,f,d,p,y,h);if(clearTimeout(m),!_)return;if(_=="0x")throw clearTimeout(m),new Error("ORACLE_CALL_GENERATION_FAILED");const U=((v=n.chain)==null?void 0:v.id)||1,D={to:r||"0x00",value:0n,data:_};let $=await S.createUserOperation([D],e.transport.url,s);console.log("Create ORder Token"),console.log(sd($));const H="";let G=new id(a),[P,T]=await G.createSponsorPaymasterUserOperation($,s,H);$=P;const N=qu(P);let k=Wt.getUserOperationEip712Data(P,BigInt(U),{validAfter:BigInt(0),validUntil:BigInt(0),entrypointAddress:S.entrypointAddress,safe4337ModuleAddress:S.safe4337ModuleAddress});const L=await n.signTypedData({account:t.address,domain:k.domain,types:k.types,primaryType:"SafeOp",message:k.messageValue});clearTimeout(m),P.signature=Wt.formatEip712SignaturesToUseroperationSignature([t.address],[L],{validAfter:BigInt(0),validUntil:BigInt(0)});const M=await S.sendUserOperation(P,s||"");console.log("Useroperation sent. Waiting to be included ......");let W=await M.included();console.log("Useroperation receipt received."),console.log(W),W.success?console.log("Order create user operation successful. The transaction hash is : "+W.receipt.transactionHash):console.log("Useroperation execution failed"),console.log("cost",N);const Z=await e.waitForTransactionReceipt({hash:W.receipt.transactionHash});let le="";return Z&&Z&&Z.transactionHash&&Z.logs&&Jn({abi:_e,logs:Z.logs,eventName:["OrderCreated"]}).forEach(J=>{var X;le=(X=J==null?void 0:J.args)==null?void 0:X._orderId}),{transaction_hash:W.receipt.transactionHash,order_id:le}}catch(S){throw console.log("err",S.toString()),clearTimeout(m),new Error(`Transaction failed: ${Kt(S)}`)}};class fE{constructor(e){I(this,"endpoint");I(this,"rpcClient");I(this,"transactionNumber",0);I(this,"stateAddress");I(this,"oracleAddress");I(this,"usdcAddress");I(this,"tokenAddress");I(this,"clientURLHttps","");I(this,"clientURLWs","");I(this,"bundler");I(this,"paymaster");I(this,"paymaster_base");I(this,"ready",!1);I(this,"marketSubscriptions",{});I(this,"unsubscribeFromOrder");I(this,"orderCreating",!1);I(this,"orderCreatingTimeout");this.endpoint=e,this.rpcClient=this.createTradingClient(this.endpoint),this.rpcClient.getConfig.query().then(t=>{this.stateAddress=t.stateAddress,this.oracleAddress=t.oracleAddress,this.usdcAddress=t.usdcAddress,this.tokenAddress=t.tokenAddress,this.bundler=t.bundler,this.paymaster=t.paymaster,this.paymaster_base=t.paymaster_base,this.ready=!0})}createTradingClient(e){if(!e||e.length<5)throw"URL not specified";return e[e.length-1]!=="/"&&(e+="/"),e.includes("/v2")||(e+="v2/"),this.clientURLHttps=e,this.clientURLWs=this.clientURLHttps.replace("http://","ws://").replace("https://","wss://").replace("/v2/","/graphql"),gg({links:[og({url:this.clientURLHttps})]})}async getCurrencyList({address:e,publicClient:t,tokenAddresses:r}){if(!this.rpcClient)throw new Error("No RPC Client");let i=t;const s=await this.rpcClient.getExchangeRates.query();let a=await i.getBalance({address:e}),o={};o={ETH:{symbol:"ETH",balance:a,usd:a?Number(a)/10**18*Number(s.eth_price):void 0,decimals:18,usd_exchange_rate:Number(s.eth_price)}};for(var c=0;c<r.length;c++){const u=r[c],l=await i.readContract({address:u.address,abi:Vc,functionName:"decimals"}),f=await i.readContract({address:u.address,abi:Vc,functionName:"balanceOf",args:[e]});o[u.symbol]={symbol:u.symbol,balance:f,usd:f&&s[u.symbol.toLowerCase()+"_price"]?Number(f)/10**l*s[u.symbol.toLowerCase()+"_price"]:void 0,decimals:l,usd_exchange_rate:Number(s[u.symbol.toLowerCase()+"_price"||0])}}return o}async getMarketList({type:e}){if(!this.rpcClient)throw new Error("No RPC Client");return(await this.rpcClient.getMarketList.query({type:e||"stock"})).markets}async getMarketData({eth_address:e,market_id:t}){if(!this.rpcClient)throw new Error("No RPC Client");if(e&&t)return await this.rpcClient.getMarketData.query({eth_address:e,market_id:t})}async getOrders({eth_address:e,tx_hash:t,order_id:r,market_id:i}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getOrders.query({eth_address:e,tx_hash:t,order_id:r,market_id:i})}async getTrendingMarkets(){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getTrendingMarkets.query()}async getPortfolio({eth_address:e}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getPortfolio.query({eth_address:e})}async getPositions({eth_address:e,market_id:t,position_id:r}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getPositions.query({eth_address:e,market_id:t,position_id:r})}async getReturns({eth_address:e,type:t}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getReturns.query({eth_address:e,type:t})}async getLeaderboard({type:e,eth_address:t,app:r}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getLeaderboard.query({type:e,eth_address:t,app:r})}async getContext({eth_address:e,app:t}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.getContext.query({eth_address:e,app:t})}async setContext({eth_address:e,id:t,app:r,user_name:i,display_name:s,profile_image:a,platformType:o,clientFid:c,added:u}){if(!this.rpcClient)throw new Error("No RPC Client");return await this.rpcClient.setContext.mutate({eth_address:e,id:t,app:r,user_name:i,display_name:s,profile_image:a,platformType:o,clientFid:c,added:u})}unsubscribeFromMarket(e){this.marketSubscriptions[e]&&(this.marketSubscriptions[e](),delete this.marketSubscriptions[e])}subscribeToMarket(e,t){const r=Wd({url:this.clientURLWs,retryAttempts:1/0,shouldRetry:()=>!0,keepAlive:1e4});this.marketSubscriptions[e]&&(this.marketSubscriptions[e](),delete this.marketSubscriptions[e]),this.marketSubscriptions[e]=r.subscribe({query:`  subscription marketDataV2($market_id: String) {
          marketDataV2(market_id: $market_id)
        }`,variables:{market_id:e}},{next:i=>{var s;t((s=i==null?void 0:i.data)==null?void 0:s.marketDataV2)},error:i=>{console.log("err",i)},complete:()=>{}})}subscribeToOrder(e,t){const r=Wd({url:this.clientURLWs,retryAttempts:1/0,shouldRetry:()=>!0,keepAlive:1e4});this.unsubscribeFromOrder&&this.unsubscribeFromOrder(),e&&(this.unsubscribeFromOrder=r.subscribe({query:`  subscription orderExecutionV2($eth_address: String) {
          orderExecutionV2(eth_address: $eth_address)
        }`,variables:{eth_address:e}},{next:i=>{var s;t((s=i==null?void 0:i.data)==null?void 0:s.orderExecutionV2)},error:i=>{console.log("err",i)},complete:()=>{}}))}async cancelOrder({account:e,walletClient:t,publicClient:r,order_id:i,market_id:s,callback:a,gaslessOverride:o}){var l,f;if(!this.rpcClient)throw new Error("No RPC Client");if(!this.oracleAddress){a&&a({result:"error",err:"SDK not ready",error_code:"SDK_NOT_READY"});return}let c=await r.getBalance({address:e.address}),u;if(o===!0?u=!0:u=c<8*10**12,u){let d=!1;try{const p=await t.getCapabilities({account:e,chainId:(l=t.chain)==null?void 0:l.id});p&&((f=p==null?void 0:p.paymasterService)==null?void 0:f.supported)===!0&&(d=!0)}catch{d=!1}if(d){let p=setTimeout(()=>{a&&a({result:"error",err:"Something went wrong - Order cancellation timeout.",error_code:"ORDER_TIMEOUT"})},15e3);const y=await tE(t,e,this.oracleAddress||"0x",i,p,this.paymaster_base||this.paymaster);a&&a({result:"success",callback_result:y,tx_hash:y.transaction_hash});return}else{let p=0;try{const h=await this.rpcClient.getPositionValue.query({eth_address:e.address,market_id:s});p=(h==null?void 0:h.timestamp)||0}catch{p=Date.now()}(!p||p==0)&&(p=Date.now());const y=await nE(t,r,e,this.oracleAddress||"0x",this.bundler||"",this.paymaster||"",i,p);a&&a({result:"success",callback_result:y});return}}else{const d=await rE(t,r,e,this.oracleAddress||"0x",i);a&&a({result:"success",callback_result:d,tx_hash:d.transaction_hash});return}}async openPosition({account:e,walletClient:t,publicClient:r,market_id:i,currency:s,direction:a,tradeAmount:o,leverage:c,callback:u,gaslessOverride:l}){if(!this.rpcClient)throw new Error("No RPC Client");if(!this.oracleAddress){u&&u({result:"error",err:"SDK not ready",error_code:"SDK_NOT_READY"});return}if(!o||o<=0n){this.orderCreating=!1,u&&u({result:"error",err:"No trade amount was specified",error_code:"INVALID_TRADE_AMOUNT"});return}await this.executeTrade({account:e,walletClient:t,publicClient:r,market_id:i,currency:s,direction:a,tradeAmount:o,leverage:c,callback:u,gaslessOverride:l})}async setSLTP({account:e,walletClient:t,publicClient:r,market_id:i,priceAbove:s,priceBelow:a,callback:o,gaslessOverride:c}){if(!this.rpcClient)throw new Error("No RPC Client");if(!this.oracleAddress){o&&o({result:"error",err:"SDK not ready",error_code:"SDK_NOT_READY"});return}if(s||(s=0),a||(a=0),s==0&&a==0){this.orderCreating=!1,o&&o({result:"error",err:"No limit price was specified. Please specify a priceAbove or priceBelow",error_code:"INVALID_LIMIT_PRICE"});return}await this.executeTrade({account:e,walletClient:t,publicClient:r,market_id:i,currency:"MPH",direction:"short",leverage:1,priceAbove:s,priceBelow:a,callback:o,gaslessOverride:c})}async closePosition({account:e,walletClient:t,publicClient:r,market_id:i,closePercentage:s,callback:a,gaslessOverride:o}){if(!this.rpcClient)throw new Error("No RPC Client");if(!this.oracleAddress){a&&a({result:"error",err:"SDK not ready",error_code:"SDK_NOT_READY"});return}if(!s){this.orderCreating=!1,a&&a({result:"error",err:"No close percentage specified",error_code:"INVALID_CLOSE_PERCENTAGE"});return}if(Number(s)<0){this.orderCreating=!1,a&&a({result:"error",err:"Close percentage cannot be negative",error_code:"INVALID_CLOSE_PERCENTAGE"});return}if(Number(s)>100){this.orderCreating=!1,a&&a({result:"error",err:"Close percentage cannot be more than 100",error_code:"INVALID_CLOSE_PERCENTAGE"});return}await this.executeTrade({account:e,walletClient:t,publicClient:r,market_id:i,currency:"MPH",direction:"short",leverage:1,closePercentage:s,callback:a,gaslessOverride:o})}async executeTrade({account:e,walletClient:t,publicClient:r,market_id:i,currency:s,direction:a,tradeAmount:o,leverage:c,priceAbove:u,priceBelow:l,closePercentage:f,callback:d,gaslessOverride:p}){var H,G,P,T;if(f||(f=0),o||(o=BigInt(0)),!this.rpcClient)throw new Error("No RPC Client");if(!this.oracleAddress){d&&d({result:"error",err:"SDK not ready",error_code:"SDK_NOT_READY"});return}let y;try{y=await this.rpcClient.getPositionValue.query({eth_address:e.address,market_id:i}),Number(y.long_shares)==0&&Number(y.short_shares)==0&&(y=void 0)}catch(N){console.log("ERROR",N),this.orderCreating=!1,d&&d({result:"error",err:"Error Fetching Market-Position - "+Kt(N),error_code:Kt(N)});return}if(o&&Number(o)<0){this.orderCreating=!1,d&&d({result:"error",err:"Trade amount cannot be negative",error_code:"INVALID_TRADE_AMOUNT"});return}if(f&&Number(f)<0){this.orderCreating=!1,d&&d({result:"error",err:"Close percentage cannot be negative",error_code:"INVALID_CLOSE_PERCENTAGE"});return}if((!o||Number(o)==0)&&(!f||Number(f)==0)&&(!u||Number(u)==0)&&(!l||Number(l)==0)){this.orderCreating=!1,d&&d({result:"error",err:"Must specify either a tradeAmount or a closePercentage or a priceAbove / Price Below combination for SLTP orders",error_code:"INVALID_TRADE_AMOUNT"});return}if(o&&Number(o)>0&&f&&Number(f)>0){this.orderCreating=!1,d&&d({result:"error",err:"You cannot specify both a tradeAmount and a closePercentage together",error_code:"INVALID_TRADE_AMOUNT"});return}let h=await r.getBalance({address:e.address});if(o&&Number(o)>0){let N=0n;if(s==="ETH")N=h-BigInt(10**14),N<0n&&(N=0n);else if(s==="USDC"){if(!this.usdcAddress){d&&d({result:"error",err:"No eth address was set ",error_code:"MISSING_ADDRESSES"});return}N=await r.readContract({address:this.usdcAddress,abi:Vc,functionName:"balanceOf",args:[e.address]})}else{if(!this.tokenAddress){d&&d({result:"error",err:"No eth address was set ",error_code:"MISSING_ADDRESSES"});return}N=await r.readContract({address:this.tokenAddress,abi:Vc,functionName:"balanceOf",args:[e.address]})}if(N==0n){d&&d({result:"error",err:`You do not have enough ${s} to process this order. `,error_code:"BALANCE_TOO_LOW"});return}o>N&&(o=N)}let m=!1;(u&&u>0||l&&l>0)&&(m=!0);let x=!0;if(o&&o>0&&y&&y.long_shares+y.short_shares>0&&(a==="long"&&y.direction==="short"&&(x=!1),a==="short"&&y.direction==="long"&&(x=!1)),m&&!y){d&&d({result:"error",err:"You cannot create a limit order because you have no position.",error_code:"LIMIT_NO_POSITION"});return}if(!x){this.orderCreating=!1,d&&d({result:"error",err:"You cannot trade in the opposite direction to an existing position. PLease close the existing position first. ",error_code:"TRADE_DIRECTION_ERROR"});return}if(this.orderCreating){d&&d({result:"error",err:"An order is already executing. Can only execute one order at a time ",error_code:"UNPROCESSED_DELAYED_ORDER"});return}this.orderCreating=!0,this.orderCreatingTimeout&&(clearTimeout(this.orderCreatingTimeout),this.orderCreatingTimeout=void 0),this.orderCreatingTimeout=setTimeout(()=>{this.orderCreatingTimeout=void 0,this.orderCreating=!1},5e3);let w=Number(o);w||(w=0);let g="0";if(m&&y)w=0,y.direction==="long"?(g=String(y.long_shares),a="short"):y.direction==="short"&&(g=String(y.short_shares),a="long");else if(f&&(f||0)>0&&y){if((f||0)>100)return;y.direction==="long"?(a="short",c=Number(y.average_leverage||1e8)/10**8,g=(BigInt(y.long_shares)*BigInt(f||0)/BigInt(100)).toString()):y.direction==="short"&&(c=Number(y.average_leverage||1e8)/10**8,a="long",g=(BigInt(y.short_shares)*BigInt(f||0)/BigInt(100)).toString())}if((!w||w<=0)&&(!g||Number(g)<=0)){this.orderCreating=!1,d&&d({result:"error",err:"Somehting went wrong. Could not resolve a open trade amount or a close shares amount from the parameters provided.",error_code:"INVALID_TRADE_AMOUNT"});return}const v=qv(i);this.orderCreating=!1;let S=(y==null?void 0:y.timestamp)||0;const O=Jv(await r.readContract({address:this.stateAddress||"0x",abi:p8,functionName:"getPosition",args:[e.address,v]}));O&&y&&!y.error?(Number(y.long_shares||0)!==Number(O._longShares)||Number(y.short_shares||0)!==Number(O._shortShares))&&(this.orderCreating=!1,d&&d({result:"error",err:"Position contract mismatch.",error_code:"POSITION_CONTRACT_MISMATCH"})):y&&(Number(y.long_shares)!==0||Number(y.short_shares)!==0)&&(this.orderCreating=!1,d&&d({result:"error",err:"Position contract mismatch.",error_code:"POSITION_CONTRACT_MISMATCH"}));let R=BigInt(Math.round((u||0)*10**8)).toString(),C=BigInt(Math.round((l||0)*10**8)).toString();if(Number(u)<0&&(u=0),Number(l)<0&&(l=0),m)try{let N=await this.rpcClient.getPositionSplitValue.query({eth_address:e.address,market_id:i,price_above:BigInt(Math.round((u||0)*1e8)).toString(),price_below:BigInt(Math.round((l||0)*1e8)).toString()});(!N.price_above||!N.price_below)&&(this.orderCreating=!1,d&&d({result:"error",err:"Position Contract Mismatch",error_code:"POSITION_CONTRACT_MISMATCH"})),R=N.price_above,C=N.price_below}catch{this.orderCreating=!1,d&&d({result:"error",err:"Error fetching position split data",error_code:"MARKET_SPLIT"})}const _=0,U=0;this.transactionNumber+=1;const D=Date.now(),$={market:v,close_shares_amount:String(g),open_mph_token_amount:BigInt(w).toString(),direction:a==="long",leverage:BigInt(Math.round(c*10**8)).toString(),priceAbove:m?R:"0",priceBelow:m?C:"0",good_until:_,good_from:U};try{if(!m&&(!R||R=="0")&&(!C||C=="0")&&g&&String(g)!=="0"){const M=BigInt(String(g));y||(this.orderCreating=!1,d&&d({result:"error",err:"POSITION_CONTRACT_MISMATCH",error_code:"POSITION_CONTRACT_MISMATCH"}));const W=BigInt(String(y.long_shares)||"0"),Z=BigInt(String(y.short_shares)||"0");W+Z<M&&(this.orderCreating=!1,d&&d({result:"error",err:"POSITION_CONTRACT_MISMATCH",error_code:"POSITION_CONTRACT_MISMATCH"}))}let N;p===!0?N=!0:N=h<8*10**12;let k=setTimeout(()=>{this.orderCreating=!1,d&&d({result:"error",err:"Something went wrong - ORder creation timeout.",error_code:"ORDER_TIMEOUT"})},15e3),L;if(s!=="MPH")if(s=="ETH")L=await Yv(t,r,e,this.oracleAddress||"0x",v,String(g),w,a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,D,$);else if(!N)L=await oE(t,r,e,this.oracleAddress||"0x",this.usdcAddress||"0x",this.tokenAddress||"0x",(y==null?void 0:y.value)||0n,v,String(g),w,a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,D,$);else{let M=!1;try{const W=await t.getCapabilities({account:e,chainId:(H=t.chain)==null?void 0:H.id});W&&((G=W==null?void 0:W.paymasterService)==null?void 0:G.supported)===!0&&(M=!0)}catch{M=!1}M?L=await eE(t,r,e,this.oracleAddress||"0x",this.usdcAddress||"0x",this.tokenAddress||"0x",(y==null?void 0:y.value)||0n,v,String(g),w,a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,this.paymaster_base||this.paymaster):L=await lE(t,r,e,this.oracleAddress||"0x",this.usdcAddress||"0x",this.bundler||"",this.paymaster||"",v,String(g),w,a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,D,$,S)}else if(!N)L=await iE(t,r,e,this.oracleAddress||"0x",v,String(g),BigInt(Number(w)).toString(),a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,D,$);else{let M=!1;try{const W=await t.getCapabilities({account:e,chainId:(P=t.chain)==null?void 0:P.id});W&&((T=W==null?void 0:W.paymasterService)==null?void 0:T.supported)===!0&&(M=!0)}catch{M=!1}M?L=await Xv(t,e,this.oracleAddress||"0x",v,String(g),BigInt(Number(w)).toString(),a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,this.paymaster_base||this.paymaster):L=await aE(t,r,e,this.oracleAddress||"0x",this.bundler||"",this.paymaster||"",v,String(g),BigInt(Number(w)).toString(),a==="long",BigInt(Math.round(c*10**8)).toString(),m?R:"0",m?C:"0",_,U,k,D,$,S)}d&&d({result:"success",tx_hash:L==null?void 0:L.transaction_hash,order_id:L==null?void 0:L.order_id})}catch(N){this.orderCreating=!1,d&&d({result:"error",err:`Error executing order: ${Kt(N)}`,error_code:"EXECUTION_ERROR"})}}}const dE=n=>parseFloat(n||0).toFixed(2),pE=n=>{let e=parseFloat(n);const t=Math.abs(e);let r=0;return 1e4>t&&t>=10?r=2:10>t&&t>=1?r=3:1>t&&t>=.1?r=4:.1>t&&t>=.01?r=5:.01>t&&t>=.001?r=6:.001>t&&t>=1e-4?r=7:1e-4>t&&t>=1e-5?r=8:1e-5>t&&(r=9),r>0&&(e=Math.floor(e*10**r)/10**r),e?e.toFixed(r):"0"};oe.MorpherTradeSDK=fE,oe.tokenValueFormatter=pE,oe.usdFormatter=dE,Object.defineProperty(oe,Symbol.toStringTag,{value:"Module"})});
